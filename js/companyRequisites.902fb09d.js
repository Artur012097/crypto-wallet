(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["companyRequisites"],{"043d":function(e,t,i){"use strict";i("4b20")},"07ac":function(e,t,i){var a=i("23e7"),s=i("6f53").values;a({target:"Object",stat:!0},{values:function(e){return s(e)}})},"26ad":function(e,t,i){"use strict";i.r(t);i("b0c0"),i("d3b7");var a=i("7a23"),s=i("c8de"),n=i.n(s),l=function(e){return Object(a["w"])("data-v-40e72b74"),e=e(),Object(a["u"])(),e},o={class:"requisites"},r=l((function(){return Object(a["g"])("h1",{class:"requisites__title page__title"},"Реквизиты компании",-1)})),c={class:"requisites-content page-wrapper"},u={class:"requisites-fields"},d={class:"requisites-fields-row fields-row"},b={class:"requisites-fields-row fields-row _inn"},j={class:"requisites-fields-row fields-row"},O={class:"requisites-fields-row fields-row"},f={class:"requisites-fields-row fields-row"},p={class:"requisites-fields-row fields-row _index"},m={class:"requisites-fields-row fields-row"},g={class:"requisites-fields-row fields-row _email"},_={class:"requisites-fields-row fields-row"},h={class:"requisites-fields-row fields-row _position"},v={class:"requisites-file _logo"},y=l((function(){return Object(a["g"])("h5",{class:"requisites-file__title"},"Логотип",-1)})),q={for:"requisitesLogo"},w={key:1,class:"requisites-file-loaded"},k=l((function(){return Object(a["g"])("img",{src:n.a,alt:"Remove"},null,-1)})),V=[k],F=["src"],C={class:"requisites-file"},$=l((function(){return Object(a["g"])("h5",{class:"requisites-file__title"},"Оттиск печати",-1)})),M={for:"requisitesBlankPhoto"},I={key:1,class:"requisites-file-loaded"},x=l((function(){return Object(a["g"])("img",{src:n.a,alt:"Remove"},null,-1)})),B=[x],U=["src"],P={class:"requisites-buttons page-buttons _save"},A={class:"requisites__send _save__button"},L=Object(a["h"])(" Сохранить "),R={class:"requisites-search page-wrapper"},S={class:"requisites-search-field"},E={class:"page-wrapper"};function D(e,t,i,s,n,l){var k=Object(a["B"])("base-input"),x=Object(a["B"])("base-button"),D=Object(a["B"])("company-requisites-table"),T=Object(a["B"])("base-modal");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("section",o,[r,Object(a["g"])("div",c,[Object(a["g"])("div",u,[Object(a["g"])("div",d,[Object(a["i"])(k,{id:"requisitesCompany",label:"Компания",required:!0,modelValue:n.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.data.name=e})},null,8,["modelValue"])]),Object(a["g"])("div",b,[Object(a["i"])(k,{id:"requisitesInn",label:"ИНН",type:"number",message:n.message,onInput:t[1]||(t[1]=function(e){return n.message=""}),required:!0,modelValue:n.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.data.inn=e})},null,8,["message","modelValue"])]),Object(a["g"])("div",j,[Object(a["i"])(k,{id:"requisitesAddress",label:"Адрес",required:!0,modelValue:n.data.address_street,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.data.address_street=e})},null,8,["modelValue"])]),Object(a["g"])("div",O,[Object(a["i"])(k,{id:"requisitesCity",label:"Город",modelValue:n.data.address_city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.data.address_city=e})},null,8,["modelValue"])]),Object(a["g"])("div",f,[Object(a["i"])(k,{id:"requisitesCountry",label:"Страна",required:!0,modelValue:n.data.address_country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.data.address_country=e})},null,8,["modelValue"])]),Object(a["g"])("div",p,[Object(a["i"])(k,{id:"requisitesIndex",label:"Индекс",type:"number",short:!0,required:!0,modelValue:n.data.address_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return n.data.address_index=e})},null,8,["modelValue"])]),Object(a["g"])("div",m,[Object(a["i"])(k,{id:"requisitesPhone",label:"Телефон",type:"number",required:!0,modelValue:n.data.phone_number,"onUpdate:modelValue":t[7]||(t[7]=function(e){return n.data.phone_number=e})},null,8,["modelValue"])]),Object(a["g"])("div",g,[Object(a["i"])(k,{id:"requisitesEmail",type:"email",label:"Электронная почта",required:!0,modelValue:n.data.email,"onUpdate:modelValue":t[8]||(t[8]=function(e){return n.data.email=e})},null,8,["modelValue"])]),Object(a["g"])("div",_,[Object(a["i"])(k,{id:"requisitesBio",label:"ФИО",modelValue:n.data.director_full_name,"onUpdate:modelValue":t[9]||(t[9]=function(e){return n.data.director_full_name=e})},null,8,["modelValue"])]),Object(a["g"])("div",h,[Object(a["i"])(k,{id:"requisitesPosition",label:"Должность",required:!0,modelValue:n.data.director_position,"onUpdate:modelValue":t[10]||(t[10]=function(e){return n.data.director_position=e})},null,8,["modelValue"])]),Object(a["g"])("div",v,[y,n.data.logo?(Object(a["t"])(),Object(a["f"])("div",w,[Object(a["g"])("div",{class:"requisites-file-loaded__close",onClick:t[14]||(t[14]=function(e){return n.data.logo=null})},V),Object(a["g"])("img",{src:n.data.logo,alt:"Logo"},null,8,F)])):(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"requisites-file-field",onDragover:t[12]||(t[12]=Object(a["O"])((function(){}),["prevent"])),onDrop:t[13]||(t[13]=function(e){return l.drop("logo","requisitesLogo")})},[Object(a["g"])("label",q,[Object(a["h"])(Object(a["F"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(a["g"])("span",null,Object(a["F"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(a["h"])(" "+Object(a["F"])(e.$isMobile?"":"файл")+" ",1),Object(a["g"])("input",{type:"file",id:"requisitesLogo",ref:"requisitesLogo",multiple:"",onChange:t[11]||(t[11]=function(e){return l.uploadImage("logo","requisitesLogo")}),accept:".jpg,.jpeg,.png"},null,544)])],32))]),Object(a["g"])("div",C,[$,n.data.blank_photo?(Object(a["t"])(),Object(a["f"])("div",I,[Object(a["g"])("div",{class:"requisites-file-loaded__close",onClick:t[18]||(t[18]=function(e){return n.data.blank_photo=null})},B),Object(a["g"])("img",{src:n.data.blank_photo,alt:"BlankPhoto"},null,8,U)])):(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"requisites-file-field",onDragover:t[16]||(t[16]=Object(a["O"])((function(){}),["prevent"])),onDrop:t[17]||(t[17]=Object(a["O"])((function(e){return l.drop("blank_photo","requisitesBlankPhoto")}),["prevent"]))},[Object(a["g"])("label",M,[Object(a["h"])(Object(a["F"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(a["g"])("span",null,Object(a["F"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(a["h"])(" "+Object(a["F"])(e.$isMobile?"":"файл")+" ",1),Object(a["g"])("input",{type:"file",id:"requisitesBlankPhoto",ref:"requisitesBlankPhoto",multiple:"",onChange:t[15]||(t[15]=function(e){return l.uploadImage("blank_photo","requisitesBlankPhoto")}),accept:".pdf,.jpg,.jpeg,.png"},null,544)])],32))])])]),Object(a["g"])("div",P,[Object(a["g"])("div",A,[Object(a["i"])(x,{type:"filled",onClick:l.addCompany},{default:Object(a["L"])((function(){return[L]})),_:1},8,["onClick"])])]),Object(a["g"])("div",R,[Object(a["g"])("div",S,[Object(a["i"])(k,{id:"requisitesSearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:n.suggestions,onSetSuggestion:l.getCompanies,onKeypressEnter:l.getCompanies,onClear:t[19]||(t[19]=function(e){return n.query="",l.getCompanies()}),onInput:t[20]||(t[20]=function(e){return l.getCompanies("search")}),modelValue:n.query,"onUpdate:modelValue":t[21]||(t[21]=function(e){return n.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])])]),Object(a["g"])("div",E,[Object(a["i"])(D,{companies:n.companies,onEdit:l.editCompany},null,8,["companies","onEdit"])])]),Object(a["i"])(T,{open:n.openModal,text:"Отправлено",onClose:t[22]||(t[22]=function(e){return n.openModal=!1})},null,8,["open"])],64)}var T=i("3835"),z=i("b85c"),J=i("ade3"),K=(i("45fc"),i("07ac"),i("99af"),i("c740"),i("4fad"),i("d9e2"),i("d401"),i("7db0"),i("2141")),W=i("30a8"),G=i("4829"),H=function(e){return Object(a["w"])("data-v-591922fa"),e=e(),Object(a["u"])(),e},N={key:0,class:"requisites-table"},Q=H((function(){return Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"Компания"),Object(a["g"])("th",{class:"upp"},"Инн"),Object(a["g"])("th",null,"Адрес"),Object(a["g"])("th",null,"Телефон"),Object(a["g"])("th",null,"Эл. почта")])],-1)})),X={key:0},Y=["onClick"],Z={class:"tooltip"},ee={class:"tooltip"},te={class:"tooltip"},ie={class:"tooltip"},ae={class:"tooltip"},se={key:1,class:"requisites-table-mobile table-mobile",ref:"table"},ne=["onClick"],le={class:"table-mobile-row"},oe=H((function(){return Object(a["g"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Компания ",-1)})),re={class:"table-mobile__value"},ce={class:"table-mobile-row"},ue=H((function(){return Object(a["g"])("span",{class:"table-mobile__title requisites-table-mobile__title upp"}," Инн ",-1)})),de={class:"table-mobile__value"},be={class:"table-mobile-row"},je=H((function(){return Object(a["g"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Адрес ",-1)})),Oe={class:"table-mobile__value"},fe={class:"table-mobile-row"},pe=H((function(){return Object(a["g"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Телефон ",-1)})),me={class:"table-mobile__value"},ge={class:"table-mobile-row"},_e=H((function(){return Object(a["g"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Эл. почта ",-1)})),he={class:"table-mobile__value"};function ve(e,t,i,s,n,l){var o=Object(a["C"])("tooltip");return e.$isMobile?i.companies.length&&e.$isMobile?(Object(a["t"])(),Object(a["f"])("div",se,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(i.companies,(function(t){return Object(a["t"])(),Object(a["f"])("div",{class:"table-mobile-column",key:t.id,onClick:function(i){return e.$emit("edit",t.id)}},[Object(a["g"])("div",le,[oe,Object(a["g"])("span",re,Object(a["F"])(t.name),1)]),Object(a["g"])("div",ce,[ue,Object(a["g"])("span",de,Object(a["F"])(t.inn),1)]),Object(a["g"])("div",be,[je,Object(a["g"])("span",Oe,Object(a["F"])(t.address_street&&t.address_street+",")+" "+Object(a["F"])(t.address_city&&t.address_city+",")+" "+Object(a["F"])(t.address_country&&t.address_country+",")+" "+Object(a["F"])(t.address_index&&t.address_index),1)]),Object(a["g"])("div",fe,[pe,Object(a["g"])("span",me,Object(a["F"])(t.phone_number),1)]),Object(a["g"])("div",ge,[_e,Object(a["g"])("span",he,Object(a["F"])(t.email),1)])],8,ne)})),128))],512)):Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("table",N,[Q,i.companies.length?(Object(a["t"])(),Object(a["f"])("tbody",X,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(i.companies,(function(t){return Object(a["t"])(),Object(a["f"])("tr",{key:t.id,onClick:function(i){return e.$emit("edit",t.id)}},[Object(a["g"])("td",null,[Object(a["g"])("span",null,Object(a["F"])(t.name),1),Object(a["M"])((Object(a["t"])(),Object(a["f"])("span",Z,[Object(a["h"])(Object(a["F"])(t.name),1)])),[[o]])]),Object(a["g"])("td",null,[Object(a["g"])("span",null,Object(a["F"])(t.inn),1),Object(a["M"])((Object(a["t"])(),Object(a["f"])("span",ee,[Object(a["h"])(Object(a["F"])(t.inn),1)])),[[o]])]),Object(a["g"])("td",null,[Object(a["g"])("span",null,Object(a["F"])(t.address_street&&t.address_street+",")+" "+Object(a["F"])(t.address_city&&t.address_city+",")+" "+Object(a["F"])(t.address_country&&t.address_country+",")+" "+Object(a["F"])(t.address_index&&t.address_index),1),Object(a["M"])((Object(a["t"])(),Object(a["f"])("span",te,[Object(a["h"])(Object(a["F"])(t.address_street&&t.address_street+",")+" "+Object(a["F"])(t.address_city&&t.address_city+",")+" "+Object(a["F"])(t.address_country&&t.address_country+",")+" "+Object(a["F"])(t.address_index&&t.address_index),1)])),[[o]])]),Object(a["g"])("td",null,[Object(a["g"])("span",null,Object(a["F"])(t.phone_number),1),Object(a["M"])((Object(a["t"])(),Object(a["f"])("span",ie,[Object(a["h"])(Object(a["F"])(t.phone_number),1)])),[[o]])]),Object(a["g"])("td",null,[Object(a["g"])("span",null,Object(a["F"])(t.email),1),Object(a["M"])((Object(a["t"])(),Object(a["f"])("span",ae,[Object(a["h"])(Object(a["F"])(t.email),1)])),[[o]])])],8,Y)})),128))])):Object(a["e"])("",!0)]))}var ye={name:"CompanyRequisitesTable",props:{companies:{type:Array}}},qe=(i("a19e"),i("6b0d")),we=i.n(qe);const ke=we()(ye,[["render",ve],["__scopeId","data-v-591922fa"]]);var Ve=ke,Fe={name:"CompanyRequisites",components:{BaseInput:K["a"],BaseButton:W["a"],BaseModal:G["a"],CompanyRequisitesTable:Ve},computed:{user:function(){return this.$store.state.user}},data:function(){return{data:{name:"",inn:"",address_street:"",address_city:"",address_country:"",address_index:"",phone_number:"",email:"",director_full_name:"",director_position:"",logo:null,blank_photo:null},message:"",query:"",openModal:!1,edit:!1,id:"",companies:[],suggestions:[]}},mounted:function(){this.getCompanies()},methods:{getCompanies:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=Object(J["a"])({},this.query&&"search",this.query);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/company"),{params:i}).then((function(i){"search"!==t&&(e.companies=[]);var a,s=Object(z["a"])(i.data.results);try{for(s.s();!(a=s.n()).done;){var n=a.value;"search"!==t&&e.companies.push(n),"search"==t&&e.query&&e.suggestions.push({key:n.id,value:n.id})}}catch(l){s.e(l)}finally{s.f()}}))},addCompany:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/company/").concat(this.id),this.data).then((function(t){var i=e.companies.findIndex((function(e){return e.id==t.data.id}));e.companies[i]=t.data;for(var a=0,s=Object.entries(e.data);a<s.length;a++){var n=Object(T["a"])(s[a],1),l=n[0];e.data[l]=""}e.edit=!1,e.openModal=!0})).catch((function(e){new Error(e)})):this.$api.post("".concat(this.$api.defaults.API,"/company"),this.data).then((function(t){e.companies.push(t.data);for(var i=0,a=Object.entries(e.data);i<a.length;i++){var s=Object(T["a"])(a[i],1),n=s[0];e.data[n]=""}e.openModal=!0})).catch((function(t){t.response.data.inn&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},uploadImage:function(e,t){var i=this,a=this.$refs[t].files[0];console.log(this.$refs[t].files[0]);var s=new FileReader;s.readAsDataURL(a),s.onload=function(t){"logo"===e?i.data.logo=t.target.result:i.data.blank_photo=t.target.result}},drop:function(e,t){var i=window.event;i.preventDefault(),this.$refs[t].files=i.dataTransfer.files,this.uploadImage(e,t)},editCompany:function(e){var t=this.companies.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var i=0,a=Object.entries(t);i<a.length;i++){var s=Object(T["a"])(a[i],1),n=s[0];this.data[n]=t[n]}}}};i("043d");const Ce=we()(Fe,[["render",D],["__scopeId","data-v-40e72b74"]]);t["default"]=Ce},3835:function(e,t,i){"use strict";function a(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return o}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function s(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,s,n=[],l=!0,o=!1;try{for(i=i.call(e);!(l=(a=i.next()).done);l=!0)if(n.push(a.value),t&&n.length===t)break}catch(r){o=!0,s=r}finally{try{l||null==i["return"]||i["return"]()}finally{if(o)throw s}}return n}}var n=i("06c5");i("d9e2"),i("d401");function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return a(e)||s(e,t)||Object(n["a"])(e,t)||l()}},"4b20":function(e,t,i){},"4fad":function(e,t,i){var a=i("23e7"),s=i("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return s(e)}})},5503:function(e,t,i){},"6f53":function(e,t,i){var a=i("83ab"),s=i("e330"),n=i("df75"),l=i("fc6a"),o=i("d1e7").f,r=s(o),c=s([].push),u=function(e){return function(t){var i,s=l(t),o=n(s),u=o.length,d=0,b=[];while(u>d)i=o[d++],a&&!r(s,i)||c(b,e?[i,s[i]]:s[i]);return b}};e.exports={entries:u(!0),values:u(!1)}},"7db0":function(e,t,i){"use strict";var a=i("23e7"),s=i("b727").find,n=i("44d2"),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),n(l)},a19e:function(e,t,i){"use strict";i("5503")}}]);
//# sourceMappingURL=companyRequisites.902fb09d.js.map