(window.webpackJsonp=window.webpackJsonp||[]).push([[53,29,40,89],{521:function(t,e,n){"use strict";n.r(e);n(30);var r=n(62),o=n(522),l={name:"SubscribesButton",components:{RcButton:r.default,RcPopover:o.default},props:{profileId:{type:Number,required:!0},text:{type:String,default:""}},computed:{buttonText:function(){return this.isSubscribed?"вы подписаны":"".concat(this.text?this.text:"подписаться")},isSubscribed:function(){return this.$isSubscribed(this.$store,this.profileId)},activePlan:function(){return this.$getActivePlan(this.$store,this.profileId)},activePlanTitle:function(){var t;return null===(t=this.activePlan)||void 0===t?void 0:t.title},isMyProfile:function(){var t,e,n;return(null!==(t=null===(e=this.$auth.user)||void 0===e?void 0:e.pid)&&void 0!==t?t:null===(n=this.$auth.user)||void 0===n?void 0:n.id)===this.profileId}},mounted:function(){var t=this;this.$nuxt.$once("subscribe",(function e(n){n===t._uid&&(console.log("Subscribe!",n),t.$emit("subscribe")),t.$nuxt.$once("subscribe",e)})),this.$nuxt.$once("unsubscribe",(function e(n){n===t._uid&&(console.log("Unsubscribe!",n),t.$emit("subscribe")),t.$nuxt.$once("unsubscribe",e)}))},methods:{subscribe:function(){this.isMyProfile||this.$openSubscribeModal(this.profileId,this._uid)}}},c=n(0),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("rc-popover",{attrs:{enabled:t.isSubscribed,"auto-hide":!1},scopedSlots:t._u([{key:"popover",fn:function(){return[t._v('\n    Вы подписаны на тариф "'+t._s(t.activePlanTitle)+'"\n  ')]},proxy:!0}])},[n("rc-button",{staticClass:"subscribes-button",class:{"subscribes-button--active":t.isSubscribed},attrs:{light:!0,small:!0,disabled:t.isMyProfile},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.subscribe.apply(null,arguments)}}},[t._v("\n    "+t._s(t.buttonText)+"\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports},522:function(t,e,n){"use strict";n.r(e);var r={name:"RcPopover",props:{enabled:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},autoHide:{type:Boolean,default:!0},show:{type:Boolean,default:void 0}},data:function(){return{loaded:!1}},computed:{enabledActual:function(){return!!this.loaded&&this.enabled}},mounted:function(){this.loaded=!0}},o=n(0),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.enabledActual?"v-popover":"div",{tag:"component",attrs:{trigger:t.enabled?t.trigger:void 0,"auto-hide":t.enabled?t.autoHide:void 0,show:t.enabled?t.show:void 0},scopedSlots:t._u([t.enabled?{key:"popover",fn:function(){return[t._t("popover")]},proxy:!0}:null],null,!0)},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},721:function(t,e,n){"use strict";n.r(e);n(13),n(10),n(12),n(8),n(15),n(11),n(16);var r=n(2),o=n(4),l=(n(22),n(30),n(56),n(63),n(26),n(6));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"FeedPostNoSubscribe",components:{SubscribesButton:n(521).default},props:{authorProfileId:{type:Number,required:!0},post:{type:Object,required:!0}},computed:{planName:function(){var t,e,n,r;return null!==(t=null===(e=this.post)||void 0===e||null===(n=e.article)||void 0===n||null===(r=n.plan_details)||void 0===r?void 0:r.title)&&void 0!==t?t:"Unknown"},planCost:function(){var t,e,n,r;return null!==(t=null===(e=this.post)||void 0===e||null===(n=e.article)||void 0===n||null===(r=n.plan_details)||void 0===r?void 0:r.cost)&&void 0!==t?t:0},routeToSubscribes:function(){return this.$routeToSubscribes(this.authorProfileId)},postCreator:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.creator)||null}},methods:d(d({},Object(l.b)("feed",["postAction","profilePostAction","tagsAction","recommendsAction"])),{},{handleSubscribe:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$route.name.includes("profile")){e.next=4;break}return d=null!==(n=null==t||null===(r=t.$route)||void 0===r||null===(o=r.params)||void 0===o?void 0:o.profile_identifier)&&void 0!==n?n:null==t||null===(l=t.$route)||void 0===l||null===(c=l.params)||void 0===c?void 0:c.profile_id,t.profilePostAction({profileId:d}),e.abrupt("return");case 4:return e.next=6,t.postAction();case 6:return e.next=8,t.tagsAction();case 8:case"end":return e.stop()}}),e)})))()}})},v=n(0),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"limited-post"},[t._m(0),t._v(" "),n("div",{staticClass:"flex justify-between mt-[14px] xs:items-center items-center xs:justify-center"},[n("nuxt-link",{staticClass:"xs:hidden f-medium xs:text-sm text-md text-purple-100 py-[9px] px-1",attrs:{to:t.$routeToProfile(t.postCreator)}},[t._v("\n      о подписках автора >\n    ")]),t._v(" "),n("subscribes-button",{staticClass:"xs:f-medium f-bold text-md rounded-lg xs:pt-[7.5px] xs:pb-[8.5px] py-[10.5px] px-1",attrs:{"profile-id":t.authorProfileId,text:t.planName+" "+t.planCost+"$"},on:{subscribe:t.handleSubscribe}})],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xs:mx-0 mx-3 not-subscribe flex justify-center pt-[19px] flex-col"},[n("p",{staticClass:"post-no-subscribe mb-[13.5px]"},[t._v("\n      Только для premium подписчиков\n    ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{SubscribesButton:n(521).default})}}]);