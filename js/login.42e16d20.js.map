{"version":3,"sources":["webpack:///./src/pages/Login.vue","webpack:///./src/pages/Login.vue?99e2","webpack:///./src/assets/images/logo-big.svg","webpack:///./src/pages/Login.vue?9970"],"names":["class","src","alt","width","$isMobile","height","login","errorMsg","style","type","id","error","placeholder","required","fasle","username","password","name","data","setup","title","methods","this","$api","post","defaults","API","then","res","token","get","headers","Authorization","user","$store","dispatch","localStorage","setItem","JSON","stringify","$route","next","$router","push","catch","err","Error","response","__exports__","render","module","exports"],"mappings":"yOACWA,MAAM,S,GACRA,MAAM,c,8BASaA,MAAM,e,GAmBvBA,MAAM,kB,GAWNA,MAAM,gB,iBACqB,W,uBAEhC,eAEO,QAFDA,MAAM,gBAAe,qDAE3B,M,mHA7CJ,eA+CU,UA/CV,EA+CU,CA9CR,eAOM,MAPN,EAOM,CANJ,eAKE,OAJAC,IAAA,IACAC,IAAI,OACHC,MAAO,EAAAC,UAAS,QAChBC,QAAQ,EAAAD,UAAS,M,YAGtB,eAqCO,QArCDJ,MAAM,aAAc,SAAM,8CAAU,EAAAM,OAAA,EAAAA,MAAA,qBAAK,e,CACjC,EAAAC,U,iBAAZ,eAEO,OAFP,EAEO,eADF,EAAAA,UAAQ,I,sBAEb,eAeM,OAdJP,MAAM,iBACLQ,MAAK,gB,UAAyB,WAAQ,OAAR,UAAuB,YAAS,kB,CAI/D,eAQE,GAPCC,KAAM,OACNC,GAAI,QACJC,MAAO,EAAAA,MACPC,YAAa,QACbC,UAAU,EACV,QAAK,+BAAG,EAAAN,SAAQ,GAAS,EAAAI,MAAQ,EAAAG,Q,WACzB,EAAAC,S,qDAAA,EAAAA,SAAQ,K,mCAGrB,eAUM,MAVN,EAUM,CATJ,eAQE,GAPCN,KAAM,WACNC,GAAI,WACJC,MAAO,EAAAA,MACPC,YAAa,SACbC,UAAU,EACV,QAAK,+BAAG,EAAAN,SAAQ,GAAS,EAAAI,MAAQ,EAAAG,Q,WACzB,EAAAE,S,qDAAA,EAAAA,SAAQ,K,iCAGrB,eAEM,MAFN,EAEM,CADJ,eAAmD,GAArCP,KAAM,UAAQ,C,wBAAE,iBAAO,C,cAEvC,G,oDAUS,GACbQ,KAAM,QACNC,KAFa,WAGX,MAAO,CACLH,SAAU,GACVC,SAAU,GACVT,SAAU,GACVI,OAAO,IAGXQ,MAVa,WAWX,eAAQ,CAAEC,MAAO,WAEnBC,QAAS,CACPf,MADO,WACC,WACAY,EAAO,CACXH,SAAUO,KAAKP,SACfC,SAAUM,KAAKN,UAEjBM,KAAKC,KACFC,KADH,UACWF,KAAKC,KAAKE,SAASC,IAD9B,WAC4CR,GACzCS,MAAK,SAACC,GAEL,IAAMC,EAAQD,EAAIV,KAAKW,MAEvB,EAAKN,KACFO,IADH,UACU,EAAKP,KAAKE,SAASC,IAD7B,YAC4C,CACxCK,QAAS,CACPC,cAAe,SAAF,OAAWH,MAG3BF,MAAK,SAACC,GACL,IAAMK,EAAOL,EAAIV,KACjBe,EAAKJ,MAAQA,EACb,EAAKK,OAAOC,SAAS,UAAWF,GAChCG,aAAaC,QAAQ,OAAQC,KAAKC,UAAUN,IAC5C,EAAKV,KAAKE,SAASM,QAAQC,cAA3B,gBAAoDC,EAAKJ,OACzD,IAAIZ,EAAO,EAAKuB,OAAOC,MAAQ,QAC/B,EAAKC,QAAQC,KAAK,CAAE1B,KAAMA,OAE3B2B,OAAM,SAACC,GACN,IAAIC,MAAMD,SAGfD,OAAM,SAACC,GACFA,EAAIE,SAAS7B,OACf,EAAKX,SAAW,4BAChB,EAAKI,OAAQ,GAEf,IAAImC,MAAMD,S,iCChGpB,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,uBCTfC,EAAOC,QAAU,IAA0B,6B,oCCA3C,W","file":"js/login.42e16d20.js","sourcesContent":["<template>\n  <section class=\"login\">\n    <div class=\"login-logo\">\n      <img\n        src=\"@/assets/images/logo-big.svg\"\n        alt=\"Logo\"\n        :width=\"$isMobile ? 170 : 198\"\n        :height=\"$isMobile ? 124 : 124\"\n      />\n    </div>\n    <form class=\"login-form\" @submit.prevent=\"login\">\n      <span v-if=\"errorMsg\" class=\"login-error\">\n        {{ errorMsg }}\n      </span>\n      <div\n        class=\"login-username\"\n        :style=\"{\n          marginTop: errorMsg ? '16px' : `${$isMobile ? '58px' : '50px'}`,\n        }\"\n      >\n        <base-input\n          :type=\"'text'\"\n          :id=\"'login'\"\n          :error=\"error\"\n          :placeholder=\"'Логин'\"\n          :required=\"true\"\n          @input=\"(errorMsg = ''), (error = fasle)\"\n          v-model=\"username\"\n        />\n      </div>\n      <div class=\"login-password\">\n        <base-input\n          :type=\"'password'\"\n          :id=\"'password'\"\n          :error=\"error\"\n          :placeholder=\"'Пароль'\"\n          :required=\"true\"\n          @input=\"(errorMsg = ''), (error = fasle)\"\n          v-model=\"password\"\n        />\n      </div>\n      <div class=\"login-signIn\">\n        <base-button :type=\"'filled'\"> Войти </base-button>\n      </div>\n      <span class=\"login-report\">\n        Если забыли пароль, обратитесь к администратору\n      </span>\n    </form>\n  </section>\n</template>\n\n<script>\nimport { useMeta } from \"vue-meta\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      errorMsg: \"\",\n      error: false,\n    };\n  },\n  setup() {\n    useMeta({ title: \"Войти\" });\n  },\n  methods: {\n    login() {\n      const data = {\n        username: this.username,\n        password: this.password,\n      };\n      this.$api\n        .post(`${this.$api.defaults.API}/login/`, data)\n        .then((res) => {\n          // get token from login request\n          const token = res.data.token;\n          // get user\n          this.$api\n            .get(`${this.$api.defaults.API}/user/me`, {\n              headers: {\n                Authorization: `Token ${token}`,\n              },\n            })\n            .then((res) => {\n              const user = res.data;\n              user.token = token;\n              this.$store.dispatch(\"setUser\", user);\n              localStorage.setItem(\"user\", JSON.stringify(user));\n              this.$api.defaults.headers.Authorization = `Token ${user.token}`;\n              let name = this.$route.next || \"index\";\n              this.$router.push({ name: name });\n            })\n            .catch((err) => {\n              new Error(err);\n            });\n        })\n        .catch((err) => {\n          if (err.response.data) {\n            this.errorMsg = \"Неверный Логин или Пароль\";\n            this.error = true;\n          }\n          new Error(err);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding-top: 60px;\n  &-error {\n    display: block;\n    color: red;\n    font-size: 12px;\n    margin-top: 20px;\n  }\n  &-form {\n    width: 345px;\n  }\n  &-username {\n    margin-top: 50px;\n  }\n  &-password {\n    margin: 22px 0;\n  }\n  &-report {\n    width: 227px;\n    display: block;\n    font-size: 16px;\n    line-height: 19px;\n    color: $placeholder;\n    text-align: center;\n    margin: 0 auto;\n    margin-top: 22px;\n  }\n}\n@media (max-width: 992px) {\n  .login {\n    &-logo {\n      width: 170px;\n      height: 106px;\n      img {\n        width: 100%;\n      }\n    }\n    &-error {\n      margin-top: 28px;\n    }\n    &-form {\n      width: calc(100% - 32px);\n      margin: 0 auto;\n    }\n    &-username {\n      margin-top: 58px;\n    }\n    &-password {\n      margin: 16px 0;\n    }\n  }\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=5e74c5db&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=5e74c5db&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/artur/Рабочий стол/Projects/sales_software/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5e74c5db\"]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/logo-big.ded0d097.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Login.vue?vue&type=style&index=0&id=5e74c5db&lang=scss&scoped=true\""],"sourceRoot":""}