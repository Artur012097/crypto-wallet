(window.webpackJsonp=window.webpackJsonp||[]).push([[40,29,89],{521:function(t,e,n){"use strict";n.r(e);n(30);var o=n(62),r=n(522),l={name:"SubscribesButton",components:{RcButton:o.default,RcPopover:r.default},props:{profileId:{type:Number,required:!0},text:{type:String,default:""}},computed:{buttonText:function(){return this.isSubscribed?"вы подписаны":"".concat(this.text?this.text:"подписаться")},isSubscribed:function(){return this.$isSubscribed(this.$store,this.profileId)},activePlan:function(){return this.$getActivePlan(this.$store,this.profileId)},activePlanTitle:function(){var t;return null===(t=this.activePlan)||void 0===t?void 0:t.title},isMyProfile:function(){var t,e,n;return(null!==(t=null===(e=this.$auth.user)||void 0===e?void 0:e.pid)&&void 0!==t?t:null===(n=this.$auth.user)||void 0===n?void 0:n.id)===this.profileId}},mounted:function(){var t=this;this.$nuxt.$once("subscribe",(function e(n){n===t._uid&&(console.log("Subscribe!",n),t.$emit("subscribe")),t.$nuxt.$once("subscribe",e)})),this.$nuxt.$once("unsubscribe",(function e(n){n===t._uid&&(console.log("Unsubscribe!",n),t.$emit("subscribe")),t.$nuxt.$once("unsubscribe",e)}))},methods:{subscribe:function(){this.isMyProfile||this.$openSubscribeModal(this.profileId,this._uid)}}},c=n(0),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("rc-popover",{attrs:{enabled:t.isSubscribed,"auto-hide":!1},scopedSlots:t._u([{key:"popover",fn:function(){return[t._v('\n    Вы подписаны на тариф "'+t._s(t.activePlanTitle)+'"\n  ')]},proxy:!0}])},[n("rc-button",{staticClass:"subscribes-button",class:{"subscribes-button--active":t.isSubscribed},attrs:{light:!0,small:!0,disabled:t.isMyProfile},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.subscribe.apply(null,arguments)}}},[t._v("\n    "+t._s(t.buttonText)+"\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports},522:function(t,e,n){"use strict";n.r(e);var o={name:"RcPopover",props:{enabled:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},autoHide:{type:Boolean,default:!0},show:{type:Boolean,default:void 0}},data:function(){return{loaded:!1}},computed:{enabledActual:function(){return!!this.loaded&&this.enabled}},mounted:function(){this.loaded=!0}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.enabledActual?"v-popover":"div",{tag:"component",attrs:{trigger:t.enabled?t.trigger:void 0,"auto-hide":t.enabled?t.autoHide:void 0,show:t.enabled?t.show:void 0},scopedSlots:t._u([t.enabled?{key:"popover",fn:function(){return[t._t("popover")]},proxy:!0}:null],null,!0)},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports}}]);