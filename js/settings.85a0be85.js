(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"07ac":function(e,t,n){var a=n("23e7"),s=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return s(e)}})},"4fadc":function(e,t,n){var a=n("23e7"),s=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return s(e)}})},"6c5c":function(e,t,n){"use strict";n("a0dd")},"6f53":function(e,t,n){var a=n("83ab"),s=n("e330"),c=n("df75"),i=n("fc6a"),o=n("d1e7").f,u=s(o),r=s([].push),l=function(e){return function(t){var n,s=i(t),o=c(s),l=o.length,d=0,b=[];while(l>d)n=o[d++],a&&!u(s,n)||r(b,e?[n,s[n]]:s[n]);return b}};e.exports={entries:l(!0),values:l(!1)}},a0dd:function(e,t,n){},b41f:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),s=n("c8de"),c=n.n(s),i=function(e){return Object(a["A"])("data-v-7c8b50bc"),e=e(),Object(a["y"])(),e},o={class:"settings"},u=i((function(){return Object(a["i"])("img",{src:c.a,alt:"Close"},null,-1)})),r=[u],l=i((function(){return Object(a["i"])("h1",{class:"settings__title page__title"},"Мои данные",-1)})),d={class:"settings-fields fields page-wrapper"},b={class:"settings-content-row fields-row"},f={class:"settings-content-row fields-row"},p={class:"settings-content-row"},h={class:"settings-buttons page-buttons _save"},j={class:"settings-buttons-save _save__button"},O=Object(a["j"])(" Сохранить ");function v(e,t,n,s,c,i){var u=Object(a["F"])("base-input"),v=Object(a["F"])("base-button"),g=Object(a["F"])("base-modal");return Object(a["x"])(),Object(a["h"])(a["b"],null,[Object(a["i"])("section",o,[Object(a["j"])(Object(a["J"])(e.$router.history)+" ",1),e.$isMobile?(Object(a["x"])(),Object(a["h"])("div",{key:0,class:"settings__close",onClick:t[0]||(t[0]=function(){return i.close&&i.close.apply(i,arguments)})},r)):Object(a["g"])("",!0),l,Object(a["i"])("div",d,[Object(a["i"])("div",b,[Object(a["k"])(u,{label:"Имя и фамилия",id:"settingsName",modelValue:c.data.fio,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.data.fio=e})},null,8,["modelValue"])]),Object(a["i"])("div",f,[Object(a["k"])(u,{label:"Телефон",type:"number",ref:"phone",placeholder:"+7 (___) __-__-___",maxLength:18,id:"settingsPhone",modelValue:c.data.phone_number,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.data.phone_number=e})},null,8,["placeholder","modelValue"])]),Object(a["i"])("div",p,[Object(a["k"])(u,{label:"Электронная почта",id:"settingsEmail",modelValue:c.data.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.data.email=e})},null,8,["modelValue"])])]),Object(a["i"])("div",h,[Object(a["i"])("div",j,[Object(a["k"])(v,{type:"filled",onClicked:i.save},{default:Object(a["P"])((function(){return[O]})),_:1},8,["onClicked"])])])]),Object(a["k"])(g,{open:c.openModal,text:"Сохранено",onClose:t[4]||(t[4]=function(e){return c.openModal=!1})},null,8,["open"])],64)}var g=n("3835"),m=n("5530"),_=(n("4fadc"),n("45fc"),n("d3b7"),n("07ac"),n("99af"),n("e9c4"),n("d9e2"),n("d401"),n("b0c0"),n("5502")),w=n("213a"),k={name:"Settings",beforeRouteEnter:function(e,t,n){n((function(e){e.prevRoute=t}))},computed:Object(m["a"])({},Object(_["b"])(["user"])),data:function(){return{data:{fio:"",phone_number:"",email:""},openModal:!1,prevRoute:null}},setup:function(){Object(w["b"])({title:"Мои Данные"})},mounted:function(){for(var e=0,t=Object.entries(this.data);e<t.length;e++){var n=Object(g["a"])(t[e],1),a=n[0];this.data[a]=this.user[a]||""}},methods:{save:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.$store.dispatch("loading",!0),this.$api.patch("".concat(this.$api.defaults.API,"/user/").concat(this.user.id),this.data).then((function(t){var n=t.data;n.id=e.user.id,n.token=e.user.token,localStorage.setItem("user",JSON.stringify(n)),e.$store.dispatch("setUser",n),e.$store.dispatch("loading",!1),e.openModal=!0}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)})))},close:function(){this.$router.push({name:this.prevRoute.name||"index"})}}},V=(n("6c5c"),n("d959")),$=n.n(V);const y=$()(k,[["render",v],["__scopeId","data-v-7c8b50bc"]]);t["default"]=y}}]);
//# sourceMappingURL=settings.85a0be85.js.map