(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{533:function(t,r,n){"use strict";n(350),n(48),n(8),n(26),n(54),n(34),n(32),n(10),n(53),n(55),n(37);function e(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(!t)return;if("string"==typeof t)return o(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,r)}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,d=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw d}}}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}r.a={data:function(){return{validationErrors:{},backendErrors:{}}},computed:{clientSideValidationEnabled:function(){return!0},validators:function(){return{}},backendFields:function(){var t={};for(var r in this.validators)t[r]=r;return t},hasValidationErrors:function(){for(var t in this.validationErrors)if(this.validationErrors[t])return!0;for(var r in this.backendFields){var n,e,o=this.backendFields[r];if(null!==(n=this.backendErrors)&&void 0!==n&&null!==(e=n[o])&&void 0!==e&&e[0])return!0}return!1}},methods:{setBackendErrors:function(t){var r={};for(var n in this.backendFields){var e=this.backendFields[n];r[e]=Object.values((null==t?void 0:t[e])||{})}this.backendErrors=r},validateField:function(t,r){var n,o,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=null===(n=this.backendFields)||void 0===n?void 0:n[t];if(this.backendErrors[l]=[],this.clientSideValidationEnabled){var c,f=null===(o=this.validators)||void 0===o?void 0:o[t];if(f instanceof Array){var v,w=e(f);try{for(w.s();!(v=w.n()).done;){var h=v.value;if(h instanceof Function&&(c=h(r,d)))break}}catch(t){w.e(t)}finally{w.f()}}else f instanceof Function&&(c=f(r,d));this.$set(this.validationErrors,t,c)}},getErrorMessage:function(t){var r,n,e=null===(r=this.backendFields)||void 0===r?void 0:r[t];if(e){var o,d,l=null===(o=this.backendErrors)||void 0===o||null===(d=o[e])||void 0===d?void 0:d[0];if(l)return l}return null===(n=this.validationErrors)||void 0===n?void 0:n[t]}}}},770:function(t,r,n){"use strict";n.r(r);var e=n(2),o=(n(22),n(350),n(226)),d=n(229),l=n(231),c=n(62),f=n(533),v={name:"SecuritySettingsPage",components:{RadioButton:l.default,SwitcherButton:d.default,TextInputBox:o.default,RcButton:c.default},mixins:[f.a],layout:"settings",data:function(){return{oldPassword:"",password:"",password2:"",twoFactorAuth:!1,twoFactorVariant:0,twoFactorList:["SMS-оповещение","оповещение на почту с кодом для входа"],additionalPassword:!1}},head:function(){return{title:"Настройки безопасности"}},computed:{passwordsContext:function(){return{passwordOne:this.password,passwordTwo:this.password2}},validators:function(){return{old_password:[this.$notEmptyValidator],password:[this.$notEmptyValidator,this.$passwordValidator],password2:[this.$notEmptyValidator,this.$passwordMatchValidator]}},disabledSubmit:function(){return this.hasValidationErrors||!this.oldPassword||!this.password||!this.password2}},methods:{changePassword:function(){var t=this;return Object(e.a)(regeneratorRuntime.mark((function r(){var n,e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n={old_password:t.oldPassword,password:t.password,password2:t.password2},t.hasValidationErrors){r.next=6;break}return r.next=4,t.$api.settings.changePassword(n);case 4:e=r.sent,0===Object.values(e).length?(t.$notify({title:"Пароль успешно изменён",type:"success"}),t.oldPassword="",t.password="",t.password2="",t.setBackendErrors([])):(t.setBackendErrors(e),t.$notify({title:"Что-то пошло не так",type:"error"}));case 6:case"end":return r.stop()}}),r)})))()}}},w=n(0),component=Object(w.a)(v,(function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",{staticClass:"settings-wrapper"},[n("h1",{staticClass:"settings-h1"},[t._v("Настройки безопасности")]),t._v(" "),n("text-input-box",{staticClass:"mt-8 xs:mt-3",attrs:{"input-id":"oldPassword",label:"старый пароль","input-type":"password","error-message":t.getErrorMessage("old_password")},on:{validate:function(r){return t.validateField("old_password",r)}},model:{value:t.oldPassword,callback:function(r){t.oldPassword=r},expression:"oldPassword"}}),t._v(" "),n("text-input-box",{staticClass:"mt-3",attrs:{"input-id":"newPassword",label:"новый пароль","input-type":"password","error-message":t.getErrorMessage("password")},on:{validate:function(r){return t.validateField("password",r,t.passwordsContext)}},model:{value:t.password,callback:function(r){t.password=r},expression:"password"}}),t._v(" "),n("text-input-box",{staticClass:"mt-3",attrs:{"input-id":"comfirmNewPassword",label:"подтвердите новый пароль","input-type":"password","error-message":t.getErrorMessage("password2")},on:{validate:function(r){return t.validateField("password2",r,t.passwordsContext)}},model:{value:t.password2,callback:function(r){t.password2=r},expression:"password2"}}),t._v(" "),n("button",{staticClass:"pl-1 mt-1 f-medium text-xs text-purple-80"},[t._v("\n    забыли пароль?\n  ")]),t._v(" "),n("rc-button",{staticClass:"h-[35px] my-4 after:clear-both xs:my-3",attrs:{disabled:t.disabledSubmit},on:{click:t.changePassword}},[t._v("\n    сменить пароль\n  ")]),t._v(" "),t._e()],2)}),[],!1,null,null,null);r.default=component.exports}}]);