(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["offerCreate"],{"09ca":function(e,t,r){"use strict";r("723b")},"0cb2":function(e,t,r){var n=r("e330"),o=r("7b0b"),a=Math.floor,c=n("".charAt),i=n("".replace),l=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,f){var b=r+e.length,p=n.length,h=s;return void 0!==d&&(d=o(d),h=u),i(f,h,(function(o,i){var u;switch(c(i,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,b);case"<":u=d[l(i,1,-1)];break;default:var s=+i;if(0===s)return o;if(s>p){var f=a(s/10);return 0===f?o:f<=p?void 0===n[f-1]?c(i,1):n[f-1]+c(i,1):o}u=n[s-1]}return void 0===u?"":u}))}},1148:function(e,t,r){"use strict";var n=r("da84"),o=r("5926"),a=r("577e"),c=r("1d80"),i=n.RangeError;e.exports=function(e){var t=a(c(this)),r="",n=o(e);if(n<0||n==1/0)throw i("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r}},"117a":function(e,t,r){},1276:function(e,t,r){"use strict";var n=r("2ba4"),o=r("c65b"),a=r("e330"),c=r("d784"),i=r("44e7"),l=r("825a"),u=r("1d80"),s=r("4840"),d=r("8aa5"),f=r("50c4"),b=r("577e"),p=r("dc4a"),h=r("4dae"),g=r("14c3"),m=r("9263"),O=r("9f7f"),j=r("d039"),v=O.UNSUPPORTED_Y,y=4294967295,_=Math.min,C=[].push,w=a(/./.exec),V=a(C),x=a("".slice),k=!j((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));c("split",(function(e,t,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var a=b(u(this)),c=void 0===r?y:r>>>0;if(0===c)return[];if(void 0===e)return[a];if(!i(e))return o(t,a,e,c);var l,s,d,f=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,O=new RegExp(e.source,p+"g");while(l=o(m,O,a)){if(s=O.lastIndex,s>g&&(V(f,x(a,g,l.index)),l.length>1&&l.index<a.length&&n(C,f,h(l,1)),d=l[0].length,g=s,f.length>=c))break;O.lastIndex===l.index&&O.lastIndex++}return g===a.length?!d&&w(O,"")||V(f,""):V(f,x(a,g)),f.length>c?h(f,0,c):f}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:o(t,this,e,r)}:t,[function(t,r){var n=u(this),c=void 0==t?void 0:p(t,e);return c?o(c,t,n,r):o(a,b(n),t,r)},function(e,n){var o=l(this),c=b(e),i=r(a,o,c,n,a!==t);if(i.done)return i.value;var u=s(o,RegExp),p=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"g":"y"),m=new u(v?"^(?:"+o.source+")":o,h),O=void 0===n?y:n>>>0;if(0===O)return[];if(0===c.length)return null===g(m,c)?[c]:[];var j=0,C=0,w=[];while(C<c.length){m.lastIndex=v?0:C;var k,$=g(m,v?x(c,C):c);if(null===$||(k=_(f(m.lastIndex+(v?C:0)),c.length))===j)C=d(c,C,p);else{if(V(w,x(c,j,C)),w.length===O)return w;for(var P=1;P<=$.length-1;P++)if(V(w,$[P]),w.length===O)return w;C=j=k}}return V(w,x(c,j)),w}]}),!k,v)},"13d5":function(e,t,r){"use strict";var n=r("23e7"),o=r("d58f").left,a=r("a640"),c=r("2d00"),i=r("605d"),l=a("reduce"),u=!i&&c>79&&c<83;n({target:"Array",proto:!0,forced:!l||u},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},"159b":function(e,t,r){var n=r("da84"),o=r("fdbc"),a=r("785a"),c=r("17c2"),i=r("9112"),l=function(e){if(e&&e.forEach!==c)try{i(e,"forEach",c)}catch(t){e.forEach=c}};for(var u in o)o[u]&&l(n[u]&&n[u].prototype);l(a)},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,o=r("a640"),a=o("forEach");e.exports=a?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"24b1":function(e,t,r){},"25f0":function(e,t,r){"use strict";var n=r("e330"),o=r("5e77").PROPER,a=r("6eeb"),c=r("825a"),i=r("3a9b"),l=r("577e"),u=r("d039"),s=r("ad6d"),d="toString",f=RegExp.prototype,b=f[d],p=n(s),h=u((function(){return"/a/b"!=b.call({source:"a",flags:"b"})})),g=o&&b.name!=d;(h||g)&&a(RegExp.prototype,d,(function(){var e=c(this),t=l(e.source),r=e.flags,n=l(void 0===r&&i(f,e)&&!("flags"in f)?p(e):r);return"/"+t+"/"+n}),{unsafe:!0})},"3ce6":function(e,t,r){"use strict";r("24b1")},4160:function(e,t,r){"use strict";var n=r("23e7"),o=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"417c":function(e,t,r){},"44e7":function(e,t,r){var n=r("861d"),o=r("c6b6"),a=r("b622"),c=a("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==o(e))}},5319:function(e,t,r){"use strict";var n=r("2ba4"),o=r("c65b"),a=r("e330"),c=r("d784"),i=r("d039"),l=r("825a"),u=r("1626"),s=r("5926"),d=r("50c4"),f=r("577e"),b=r("1d80"),p=r("8aa5"),h=r("dc4a"),g=r("0cb2"),m=r("14c3"),O=r("b622"),j=O("replace"),v=Math.max,y=Math.min,_=a([].concat),C=a([].push),w=a("".indexOf),V=a("".slice),x=function(e){return void 0===e?e:String(e)},k=function(){return"$0"==="a".replace(/./,"$0")}(),$=function(){return!!/./[j]&&""===/./[j]("a","$0")}(),P=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));c("replace",(function(e,t,r){var a=$?"$":"$0";return[function(e,r){var n=b(this),a=void 0==e?void 0:h(e,j);return a?o(a,e,n,r):o(t,f(n),e,r)},function(e,o){var c=l(this),i=f(e);if("string"==typeof o&&-1===w(o,a)&&-1===w(o,"$<")){var b=r(t,c,i,o);if(b.done)return b.value}var h=u(o);h||(o=f(o));var O=c.global;if(O){var j=c.unicode;c.lastIndex=0}var k=[];while(1){var $=m(c,i);if(null===$)break;if(C(k,$),!O)break;var P=f($[0]);""===P&&(c.lastIndex=p(i,d(c.lastIndex),j))}for(var S="",I=0,E=0;E<k.length;E++){$=k[E];for(var U=f($[0]),M=v(y(s($.index),i.length),0),T=[],B=1;B<$.length;B++)C(T,x($[B]));var R=$.groups;if(h){var F=_([U],T,M,i);void 0!==R&&C(F,R);var A=f(n(o,void 0,F))}else A=g(U,i,M,T,R,o);M>=I&&(S+=V(i,I,M)+A,I=M+U.length)}return S+V(i,I)}]}),!P||!k||$)},"6e51":function(e,t,r){"use strict";r("117a")},7197:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),o=function(e){return Object(n["w"])("data-v-10796050"),e=e(),Object(n["u"])(),e},a={class:"offer-create"},c={class:"offer-create__title page__title"},i=Object(n["h"])(" Коммерческое предложение "),l={key:0},u={key:1},s={class:"offer-create-wrapper page-wrapper"},d={class:"offer-create-fields fields"},f={class:"offer-create-fields-row fields-row"},b={class:"offer-create-fields-row fields-row"},p={class:"offer-create-fields-row fields-row _area"},h={class:"offer-create-fields-row fields-row"},g={class:"offer-create-fields-row fields-row"},m={class:"offer-create-fields-row fields-row"},O={class:"offer-create-fields-row fields-row _validy"},j={class:"offer-create-fields-row fields-row _area"},v={class:"offer-create-fields-row fields-row"},y={class:"offer-create-products"},_=o((function(){return Object(n["g"])("h5",{class:"offer-create-products__title"},"Продукция",-1)})),C={class:"offer-create-products-row article-row"},w={class:"offer-create-products-field article-row-field"},V={class:"offer-create-products-add article-row-button"},x=Object(n["h"])(" Добавить "),k=o((function(){return Object(n["g"])("h5",{class:"offer-create-company__title"},"Выбрать компанию",-1)})),$={class:"offer-create-company__select"},P={class:"offer-create-type"},S=o((function(){return Object(n["g"])("h5",{class:"offer-create-type__title"},"Сохранить",-1)})),I={class:"offer-create-types"},E={class:"base-check"},U=o((function(){return Object(n["g"])("label",{for:"offerCreatePdf",class:"upp"}," pdf ",-1)})),M={class:"base-check _excel"},T=o((function(){return Object(n["g"])("label",{for:"offerCreateExcel"}," Excel ",-1)})),B={class:"offer-create-type _get-ready"},R=o((function(){return Object(n["g"])("h5",{class:"offer-create-type__title _get-ready"},"Подготовить",-1)})),F={class:"offer-create-types _get-ready"},A={class:"base-check"},D=o((function(){return Object(n["g"])("label",{for:"offerReadyTz",class:"upp"}," тз ",-1)})),z={class:"base-check upp _ru"},N=o((function(){return Object(n["g"])("label",{for:"offerReadyRu",class:"upp"}," ру ",-1)})),q={key:0,class:"offer-create-tzType"},L=o((function(){return Object(n["g"])("h6",null,"Тип",-1)})),K={class:"base-check radio"},H=o((function(){return Object(n["g"])("label",{for:"offerCreateKtru",class:"upp"}," ктру ",-1)})),J={class:"base-check radio"},Y=o((function(){return Object(n["g"])("label",{for:"offerCreateTu",class:"upp"}," ту ",-1)})),W={class:"base-check radio"},G=o((function(){return Object(n["g"])("label",{for:"offerCreateKtrus"},[Object(n["g"])("span",{class:"upp"},"ктру"),Object(n["h"])(" сокр. ")],-1)})),Q={class:"offer-create-actions page-buttons"},X={class:"offer-create__send"},Z=Object(n["h"])(" Отправить "),ee={class:"offer-create__save"},te=Object(n["h"])(" Сохранить "),re={class:"offer-create__dl"},ne=Object(n["h"])(" Скачать ");function oe(e,t,r,o,oe,ae){var ce=Object(n["B"])("base-input"),ie=Object(n["B"])("base-textarea"),le=Object(n["B"])("base-button"),ue=Object(n["B"])("offer-create-table"),se=Object(n["B"])("base-select"),de=Object(n["B"])("base-modal");return Object(n["t"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("section",a,[Object(n["g"])("h1",c,[i,ae.edit&&oe.offer?(Object(n["t"])(),Object(n["f"])("span",l,"№"+Object(n["F"])(oe.offer.id),1)):Object(n["e"])("",!0),ae.edit&&oe.offer?(Object(n["t"])(),Object(n["f"])("h2",u,Object(n["F"])(ae.offerDate),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",s,[Object(n["g"])("div",d,[Object(n["g"])("div",f,[Object(n["i"])(ce,{label:"Контрагент",id:"offerCreatecounterparty",suggestions:oe.counterparties,search:!0,onSetSuggestion:ae.getCounterparty,onKeypressEnter:ae.getCounterparty,onInput:ae.getCounterparties,modelValue:oe.counterparty,"onUpdate:modelValue":t[0]||(t[0]=function(e){return oe.counterparty=e})},null,8,["suggestions","onSetSuggestion","onKeypressEnter","onInput","modelValue"])]),Object(n["g"])("div",b,[Object(n["i"])(ce,{label:"ИНН",id:"offerCreateInn",disbled:!0,disabled:oe.inn&&!0,readonly:oe.inn&&!0,modelValue:oe.inn,"onUpdate:modelValue":t[1]||(t[1]=function(e){return oe.inn=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",p,[Object(n["i"])(ie,{label:"Адрес",id:"offerCreateAddress",disabled:oe.address&&!0,readonly:oe.address&&!0,modelValue:oe.address,"onUpdate:modelValue":t[2]||(t[2]=function(e){return oe.address=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",h,[Object(n["i"])(ce,{label:"Телефон",id:"offerCreatePhone",disabled:oe.phone&&!0,readonly:oe.phone&&!0,modelValue:oe.phone,"onUpdate:modelValue":t[3]||(t[3]=function(e){return oe.phone=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",g,[Object(n["i"])(ce,{label:"Электронная почта",id:"offerCreateEmail",disabled:oe.email&&!0,readonly:oe.email&&!0,modelValue:oe.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return oe.email=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",m,[Object(n["i"])(ce,{label:"Контактное лицо",id:"offerCreateContact",disabled:oe.contactPerson&&!0,readonly:oe.contactPerson&&!0,modelValue:oe.contactPerson,"onUpdate:modelValue":t[5]||(t[5]=function(e){return oe.contactPerson=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",O,[Object(n["i"])(ce,{label:"Срок действия",short:!0,id:"offerCreateValidy",disabled:oe.validy&&!0,readonly:oe.validy&&!0,modelValue:oe.validy,"onUpdate:modelValue":t[6]||(t[6]=function(e){return oe.validy=e})},null,8,["disabled","readonly","modelValue"])]),Object(n["g"])("div",j,[Object(n["i"])(ce,{label:"Конечный заказчик",id:"offerCreateEndCustomer",suggestions:oe.customers,search:!0,onSetSuggestion:ae.setCustomer,onKeypressEnter:ae.setCustomer,onInput:ae.getEndCustomer,modelValue:oe.endCustomer,"onUpdate:modelValue":t[7]||(t[7]=function(e){return oe.endCustomer=e})},null,8,["suggestions","onSetSuggestion","onKeypressEnter","onInput","modelValue"])]),Object(n["g"])("div",v,[Object(n["i"])(ce,{label:"Регион",id:"offerCreateRegion",disabled:oe.region&&!0,readonly:oe.region&&!0,modelValue:oe.region,"onUpdate:modelValue":t[8]||(t[8]=function(e){return oe.region=e})},null,8,["disabled","readonly","modelValue"])])]),Object(n["g"])("div",y,[_,Object(n["g"])("div",C,[Object(n["g"])("div",w,[Object(n["i"])(ce,{id:"offerCreatecounterparty",placeholder:"Артикул или наименование",search:!0,suggestions:oe.productSuggestions,onSetSuggestion:ae.getProducts,onKeypressEnter:ae.getProducts,onInput:t[9]||(t[9]=function(e){return ae.getProducts("search")}),modelValue:oe.productsSearch,"onUpdate:modelValue":t[10]||(t[10]=function(e){return oe.productsSearch=e})},null,8,["suggestions","onSetSuggestion","onKeypressEnter","modelValue"])]),Object(n["g"])("div",V,[Object(n["i"])(le,{type:"outlined",onClicked:ae.addProduct},{default:Object(n["L"])((function(){return[x]})),_:1},8,["onClicked"])])]),Object(n["i"])(ue,{products:oe.products,onRemoveProduct:ae.removeProduct},null,8,["products","onRemoveProduct"])]),Object(n["g"])("div",{class:Object(n["o"])(["offer-create-company",{filled:oe.products.length}])},[k,Object(n["g"])("div",$,[Object(n["i"])(se,{options:oe.companies,modelValue:oe.company,"onUpdate:modelValue":t[11]||(t[11]=function(e){return oe.company=e}),borderOnly:!0},null,8,["options","modelValue"])])],2),Object(n["g"])("div",P,[S,Object(n["g"])("div",I,[Object(n["g"])("div",E,[Object(n["M"])(Object(n["g"])("input",{type:"radio",id:"offerCreatePdf",value:"pdf","onUpdate:modelValue":t[12]||(t[12]=function(e){return oe.tech_docs_format=e})},null,512),[[n["I"],oe.tech_docs_format]]),U]),Object(n["g"])("div",M,[Object(n["M"])(Object(n["g"])("input",{type:"radio",id:"offerCreateExcel",value:"excel","onUpdate:modelValue":t[13]||(t[13]=function(e){return oe.tech_docs_format=e})},null,512),[[n["I"],oe.tech_docs_format]]),T])])]),Object(n["g"])("div",B,[R,Object(n["g"])("div",F,[Object(n["g"])("div",A,[Object(n["M"])(Object(n["g"])("input",{type:"checkbox",id:"offerReadyTz","onUpdate:modelValue":t[14]||(t[14]=function(e){return oe.tz=e})},null,512),[[n["H"],oe.tz]]),D]),Object(n["g"])("div",z,[Object(n["M"])(Object(n["g"])("input",{type:"checkbox",id:"offerReadyRu","onUpdate:modelValue":t[15]||(t[15]=function(e){return oe.ru=e})},null,512),[[n["H"],oe.ru]]),N])]),oe.tz?(Object(n["t"])(),Object(n["f"])("div",q,[L,Object(n["g"])("div",null,[Object(n["g"])("div",K,[Object(n["M"])(Object(n["g"])("input",{type:"radio",id:"offerCreateKtru",value:"ktru","onUpdate:modelValue":t[16]||(t[16]=function(e){return oe.tzType=e})},null,512),[[n["I"],oe.tzType]]),H]),Object(n["g"])("div",J,[Object(n["M"])(Object(n["g"])("input",{type:"radio",id:"offerCreateTu",value:"tu","onUpdate:modelValue":t[17]||(t[17]=function(e){return oe.tzType=e})},null,512),[[n["I"],oe.tzType]]),Y]),Object(n["g"])("div",W,[Object(n["M"])(Object(n["g"])("input",{type:"radio",id:"offerCreateKtrus",value:"ktrus","onUpdate:modelValue":t[18]||(t[18]=function(e){return oe.tzType=e})},null,512),[[n["I"],oe.tzType]]),G])])])):Object(n["e"])("",!0)])]),Object(n["g"])("div",Q,[Object(n["g"])("div",X,[Object(n["i"])(le,{type:"filled",onClicked:ae.sendToEmail},{default:Object(n["L"])((function(){return[Z]})),_:1},8,["onClicked"])]),Object(n["g"])("div",ee,[Object(n["i"])(le,{type:"outlined",onClicked:ae.saveOffer},{default:Object(n["L"])((function(){return[te]})),_:1},8,["onClicked"])]),Object(n["g"])("div",re,[Object(n["i"])(le,{type:"outlined"},{default:Object(n["L"])((function(){return[ne]})),_:1})])])]),Object(n["i"])(de,{open:oe.openModal,text:oe.modalText,onClose:t[19]||(t[19]=function(e){return oe.openModal=!1})},null,8,["open","text"])],64)}var ae=r("ade3"),ce=r("b85c"),ie=(r("99af"),r("b0c0"),r("45fc"),r("d3b7"),r("c740"),r("a434"),r("2141")),le=["for"],ue=["id","name","required","disabled","readonly","placeholder","value","minLength","maxlength"],se={key:1,class:"based-textarea__msg"};function de(e,t,r,o,a,c){return Object(n["t"])(),Object(n["f"])("div",{class:Object(n["o"])(["based-textarea",{"based-textarea-error":r.message,"based-textarea-row":r.label}])},[r.label?(Object(n["t"])(),Object(n["f"])("label",{key:0,for:r.id},Object(n["F"])(r.label),9,le)):Object(n["e"])("",!0),Object(n["g"])("textarea",{ref:"textarea",class:Object(n["o"])({error:r.error}),id:r.id,name:r.id,required:r.required,disabled:r.disabled,readonly:r.readonly,placeholder:r.placeholder,value:r.modelValue,minLength:r.minLength?r.minLength:"",maxlength:r.maxLength?r.maxLength:"",onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value),e.$emit("input")}),onFocus:t[1]||(t[1]=function(t){return e.$emit("focus")}),onBlur:t[2]||(t[2]=function(t){return e.$emit("blur")}),onClick:t[3]||(t[3]=function(t){return e.$emit("click")}),onKeypress:[t[4]||(t[4]=Object(n["N"])((function(t){return e.$emit("keypressEnter")}),["enter"])),t[5]||(t[5]=function(t){return e.$emit("keypress")})]},null,42,ue),r.error?(Object(n["t"])(),Object(n["f"])("span",se,Object(n["F"])(r.message),1)):Object(n["e"])("",!0)],2)}r("a9e3");var fe={name:"BaseTextarea",props:{id:{type:String},label:{type:String,default:""},error:{type:Boolean,default:!1},required:{type:Boolean},message:{type:String,default:""},placeholder:{type:String,default:""},modelValue:{type:[String,Number],required:!0},minLength:{type:Number},maxLength:{type:Number},disabled:{type:Boolean},readonly:{type:Boolean}},methods:{},emits:["update:modelValue","clear","input","focus","blur","click","keypressEnter","keypress"]},be=(r("f26d"),r("6b0d")),pe=r.n(be);const he=pe()(fe,[["render",de],["__scopeId","data-v-10dfe7a2"]]);var ge=he,me=r("30a8"),Oe=r("be12"),je=r("c8de"),ve=r.n(je),ye=function(e){return Object(n["w"])("data-v-9f5a36a2"),e=e(),Object(n["u"])(),e},_e={key:0,class:"offer-create-table"},Ce=ye((function(){return Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"Артикул"),Object(n["g"])("th",null,"Наименование"),Object(n["g"])("th",null,"Цена"),Object(n["g"])("th",null,"Кол-во"),Object(n["g"])("th",null,"Скидка"),Object(n["g"])("th",null,"Стоимость"),Object(n["g"])("th")])],-1)})),we={key:0},Ve={class:"tooltip"},xe={class:"tooltip"},ke={class:"no-wrap"},$e={class:"no-wrap"},Pe={class:"no-wrap"},Se={class:"tooltip"},Ie={class:"no-wrap"},Ee=["onClick"],Ue=ye((function(){return Object(n["g"])("img",{src:ve.a,alt:"Remove"},null,-1)})),Me=[Ue],Te={key:1,class:"offer-create-table-mobile table-mobile",ref:"table"},Be=["onClick"],Re=ye((function(){return Object(n["g"])("img",{src:ve.a,alt:"Remove"},null,-1)})),Fe=[Re],Ae={class:"table-mobile-row"},De=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Артикул ",-1)})),ze={class:"table-mobile__value"},Ne={class:"table-mobile-row"},qe=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Наим-ие ",-1)})),Le={class:"table-mobile__value"},Ke={class:"table-mobile-row"},He=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Цена ",-1)})),Je={class:"table-mobile__value"},Ye={class:"table-mobile-row"},We=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Кол-во ",-1)})),Ge={class:"table-mobile__value"},Qe={class:"table-mobile-row"},Xe=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),Ze={class:"table-mobile__value"},et={class:"table-mobile-row"},tt=ye((function(){return Object(n["g"])("span",{class:"table-mobile__title"}," Стоимость ",-1)})),rt={class:"table-mobile__value"},nt={key:2,class:"offer-create-price"},ot={class:"offer-create-price__discount"},at=ye((function(){return Object(n["g"])("span",null," Скидка ",-1)})),ct={class:"offer-create-price__total"},it=ye((function(){return Object(n["g"])("span",null," Общая стоимость ",-1)}));function lt(e,t,r,o,a,c){var i=Object(n["B"])("base-input"),l=Object(n["C"])("tooltip");return Object(n["t"])(),Object(n["f"])(n["a"],null,[e.$isMobile?r.products.length&&e.$isMobile?(Object(n["t"])(),Object(n["f"])("div",Te,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(r.products,(function(t,r){return Object(n["t"])(),Object(n["f"])("div",{class:"table-mobile-column",key:r},[Object(n["g"])("span",{class:"_remove",onClick:function(){e.$emit("removeProduct",t.id)}},Fe,8,Be),Object(n["g"])("div",Ae,[De,Object(n["g"])("span",ze,Object(n["F"])(t.article),1)]),Object(n["g"])("div",Ne,[qe,Object(n["g"])("span",Le,Object(n["F"])(t.name),1)]),Object(n["g"])("div",Ke,[He,Object(n["g"])("span",Je,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"₽",modelValue:t.price,"onUpdate:modelValue":function(e){return t.price=e}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["g"])("div",Ye,[We,Object(n["g"])("span",Ge,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"шт",modelValue:t.count,"onUpdate:modelValue":function(e){return t.count=e}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["g"])("div",Qe,[Xe,Object(n["g"])("span",Ze,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"%",modelValue:t.discount,"onUpdate:modelValue":function(e){return t.discount=e}},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["g"])("div",et,[tt,Object(n["g"])("span",rt,Object(n["F"])(c.validateNumberString(c.price(t.price)*c.quantity(t.count)))+",00 ₽ ",1)])])})),128))],512)):Object(n["e"])("",!0):(Object(n["t"])(),Object(n["f"])("table",_e,[Ce,r.products.length?(Object(n["t"])(),Object(n["f"])("tbody",we,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(r.products,(function(t,r){return Object(n["t"])(),Object(n["f"])("tr",{key:r},[Object(n["g"])("td",null,[Object(n["g"])("span",null,Object(n["F"])(t.article),1),Object(n["M"])((Object(n["t"])(),Object(n["f"])("span",Ve,[Object(n["h"])(Object(n["F"])(t.article),1)])),[[l]])]),Object(n["g"])("td",null,[Object(n["g"])("span",null,Object(n["F"])(t.name),1),Object(n["M"])((Object(n["t"])(),Object(n["f"])("span",xe,[Object(n["h"])(Object(n["F"])(t.name),1)])),[[l]])]),Object(n["g"])("td",ke,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"₽",modelValue:t.price,"onUpdate:modelValue":function(e){return t.price=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["g"])("td",$e,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"шт",modelValue:t.count,"onUpdate:modelValue":function(e){return t.count=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["g"])("td",Pe,[Object(n["i"])(i,{type:"text",tableInput:!0,symbol:"%",modelValue:t.discount,"onUpdate:modelValue":function(e){return t.discount=e}},null,8,["modelValue","onUpdate:modelValue"])]),Object(n["g"])("td",null,[Object(n["g"])("span",null,Object(n["F"])(c.validateNumberString(c.price(t.price)*c.quantity(t.count)))+",00 ₽ ",1),Object(n["M"])((Object(n["t"])(),Object(n["f"])("span",Se,[Object(n["h"])(Object(n["F"])(c.validateNumberString(c.price(t.price)*c.quantity(t.count)))+",00 ₽ ",1)])),[[l]])]),Object(n["g"])("td",Ie,[Object(n["g"])("span",{class:"_remove",onClick:function(){e.$emit("removeProduct",t.id)}},Me,8,Ee)])])})),128))])):Object(n["e"])("",!0)])),r.products.length?(Object(n["t"])(),Object(n["f"])("div",nt,[Object(n["g"])("div",null,[Object(n["g"])("div",ot,[at,Object(n["g"])("span",null,Object(n["F"])(c.validateNumberString(c.totalDiscountedPrice))+",00 ₽ ",1)]),Object(n["g"])("div",ct,[it,Object(n["g"])("span",null,Object(n["F"])(c.validateNumberString(c.totalPrice-c.totalDiscountedPrice))+",00 ₽ ",1)])])])):Object(n["e"])("",!0)],64)}r("fb6a"),r("4160"),r("159b"),r("d401"),r("25f0"),r("ac1f"),r("5319"),r("13d5"),r("1276"),r("b680");var ut=function(e){return+e.toString().replace(/\D/g,"")},st=function(e){return e.toFixed(0).toString().split("").reduce((function(t,r,n){return t+r+(n!==e.length-1&&n%3===2?" ":"")}),"")},dt={name:"OfferCreateTable",props:{products:{type:Array}},components:{BaseInput:ie["a"]},methods:{validateNumberString:st},computed:{price:function(){return function(e){return ut(e.slice(0,-3))}},quantity:function(){return function(e){return ut(e)}},totalDiscountedPrice:function(){var e=0;return this.products.forEach((function(t){return e+=ut(t.price.slice(0,-3))*ut(t.count)*ut(t.discount)/100})),e},totalPrice:function(){var e=0;return this.products.forEach((function(t){return e+=ut(t.price.slice(0,-3))*ut(t.count)})),e.toString()}},emits:["removeProduct"]};r("6e51");const ft=pe()(dt,[["render",lt],["__scopeId","data-v-9f5a36a2"]]);var bt=ft,pt=r("4829"),ht={components:{BaseInput:ie["a"],BaseTextarea:ge,BaseButton:me["a"],BaseSelect:Oe["a"],OfferCreateTable:bt,BaseModal:pt["a"]},computed:{offerDate:function(){var e=new Date(this.offer.created_at),t=e.getDate()<10?"0"+e.getDate():e.getDate(),r=e.toLocaleString("ru",{month:"long"}),n=e.getFullYear();return"".concat(t," ").concat(r," ").concat(n)},edit:function(){return!!this.$route.query.id}},data:function(){return{offer:null,counterparty:"",inn:"",address:"",phone:"",email:"",contactPerson:"",validy:"",endCustomer:"",region:"",tech_docs_format:"",tz:!1,ru:!1,tzType:"",ready:"",openModal:!1,modalText:"Отправлено",products:[],productsSearch:"",companies:[{key:"Не Выбран",value:""}],company:"",counterparties:[],productSuggestions:[],currentCounterparty:{},customers:[],currentCustomer:{},currentProduct:""}},mounted:function(){this.edit&&this.getOffer(),this.getCompanies()},methods:{getCompanies:function(){var e=this;this.$api.get("".concat(this.$api.defaults.API,"/company")).then((function(t){var r,n=Object(ce["a"])(t.data.results);try{var o=function(){var t=r.value,n={key:t.name,value:t.id};!e.companies.some((function(e){return e.value==n.value}))&&n.key&&e.companies.push(n)};for(n.s();!(r=n.n()).done;)o()}catch(a){n.e(a)}finally{n.f()}}))},getOffer:function(){var e=this;this.$api.get("".concat(this.$api.defaults.API,"/offer/").concat(this.$route.query.id)).then((function(t){console.log(t.data),e.offer=t.data,e.currentCounterparty=e.offer.counterparty||"",e.setCounterparty(),e.contactPerson=e.currentCounterparty.contact_person||"",e.endCustomer=e.offer.end_customer&&e.offer.end_customer.name||"",e.region=e.offer.end_customer&&e.offer.end_customer.region||"",e.currentCustomer=e.offer.end_customer,e.products=e.offer.offer_products||"",e.company=t.data.company.id||"",e.tech_docs_format=e.offer.tech_docs_format}))},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=Object(ae["a"])({},this.productsSearch&&"search",this.productsSearch);this.$api.get("".concat(this.$api.defaults.API,"/product"),{params:r}).then((function(r){e.productSuggestions=[];var n,o=Object(ce["a"])(r.data.results);try{for(o.s();!(n=o.n()).done;){var a=n.value;"search"!==t&&e.getProduct(),"search"==t&&e.productsSearch&&e.productSuggestions.push({key:a.name,value:a.id})}}catch(c){o.e(c)}finally{o.f()}}))},getProduct:function(){var e=this;this.$api.get("".concat(this.$api.defaults.API,"/product/").concat(this.productsSearch)).then((function(t){console.log(t.data);var r={product:t.data.id,price:"".concat(t.data.price),discount:e.offer.counterparty.discount,count:1,cost:"".concat(t.data.price)};e.currentProduct=r}))},getCounterparties:function(){var e=this,t=Object(ae["a"])({},this.counterparty&&"search",this.counterparty);this.counterparties=[],this.$api.get("".concat(this.$api.defaults.API,"/counterparty"),{params:t}).then((function(t){console.log(t.data);var r,n=Object(ce["a"])(t.data.results);try{var o=function(){var t=r.value,n={key:t.name||"",value:t.id||""};!e.counterparties.some((function(e){return e.value===n.value}))&&n.key&&e.counterparties.push(n)};for(n.s();!(r=n.n()).done;)o()}catch(a){n.e(a)}finally{n.f()}}))},getCounterparty:function(){var e=this;this.$api.get("".concat(this.$api.defaults.API,"/counterparty/").concat(this.counterparty)).then((function(t){e.currentCounterparty=t.data,e.setCounterparty()}))},setCounterparty:function(){this.counterparty=this.currentCounterparty.name||"",this.inn=this.currentCounterparty.inn||"",this.address="".concat(this.currentCounterparty.address_street&&this.currentCounterparty.address_street+","," ").concat(this.currentCounterparty.address_city&&this.currentCounterparty.address_city+","," ").concat(this.currentCounterparty.address_country&&this.currentCounterparty.address_country+","," ").concat(this.currentCounterparty.address_index&&this.currentCounterparty.address_index),this.phone="+".concat(this.currentCounterparty.phone_number),this.email=this.currentCounterparty.email},getEndCustomer:function(){var e=this,t=Object(ae["a"])({},this.endCustomer&&"search",this.endCustomer);this.customers=[],this.$api.get("".concat(this.$api.defaults.API,"/end-customer"),{params:t}).then((function(t){console.log(t.data);var r,n=Object(ce["a"])(t.data.results);try{var o=function(){var t=r.value,n={key:t.name||"",value:t.id||""};!e.customers.some((function(e){return e.value===n.value}))&&n.key&&e.customers.push(n)};for(n.s();!(r=n.n()).done;)o()}catch(a){n.e(a)}finally{n.f()}}))},setCustomer:function(){var e=this;this.endCustomer&&this.$api.get("".concat(this.$api.defaults.API,"/end-customer/").concat(this.endCustomer)).then((function(t){e.currentCustomer=t.data,e.endCustomer=e.currentCustomer.name||"",e.region=e.currentCustomer.region||""}))},addProduct:function(){var e=this;console.log(this.currentProduct),this.$api.post("".concat(this.$api.defaults.API,"/offer/").concat(this.offer.id,"/product"),this.currentProduct).then((function(t){console.log(t.data),e.offer.offer_products.push(t.data)}))},removeProduct:function(e){console.log(e);var t=this.products.findIndex((function(t){return t.id==e}));this.products.splice(t,1)},sendToEmail:function(){var e=this,t={send_to:this.email,co_format:this.tzType,required_tech_docs:this.tz,tech_docs_format:this.tech_docs_format,required_ru:this.ru};this.$api.post("".concat(this.$api.defaults.API,"/offer/").concat(this.offer.id,"/send-to-email"),t).then((function(){e.modalText="Отправлено",e.openModal=!0}))},saveOffer:function(){var e=this,t=[];if(this.offer.offer_products.length){var r,n=Object(ce["a"])(this.offer.offer_products);try{for(n.s();!(r=n.n()).done;){var o=r.value;t.push({product:o.product,price:o.price,discount:o.discount,count:o.count,cost:o.cost})}}catch(c){n.e(c)}finally{n.f()}}var a={counterparty:this.currentCounterparty.id||null,end_customer:this.currentCustomer.id||null,company:this.company||null,offer_products:t||null,tech_docs_format:this.tech_docs_format};this.$api.put("".concat(this.$api.defaults.API,"/offer/").concat(this.offer.id),a).then((function(){e.modalText="Сохранено",e.openModal=!0}))}}};r("3ce6");const gt=pe()(ht,[["render",oe],["__scopeId","data-v-10796050"]]);t["default"]=gt},"723b":function(e,t,r){},"7db0":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").find,a=r("44d2"),c="find",i=!0;c in[]&&Array(1)[c]((function(){i=!1})),n({target:"Array",proto:!0,forced:i},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(c)},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},a434:function(e,t,r){"use strict";var n=r("23e7"),o=r("da84"),a=r("23cb"),c=r("5926"),i=r("07fa"),l=r("7b0b"),u=r("65f0"),s=r("8418"),d=r("1dde"),f=d("splice"),b=o.TypeError,p=Math.max,h=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,n,o,d,f,O,j=l(this),v=i(j),y=a(e,v),_=arguments.length;if(0===_?r=n=0:1===_?(r=0,n=v-y):(r=_-2,n=h(p(c(t),0),v-y)),v+r-n>g)throw b(m);for(o=u(j,n),d=0;d<n;d++)f=y+d,f in j&&s(o,d,j[f]);if(o.length=n,r<n){for(d=y;d<v-n;d++)f=d+n,O=d+r,f in j?j[O]=j[f]:delete j[O];for(d=v;d>v-n+r;d--)delete j[d-1]}else if(r>n)for(d=v-n;d>y;d--)f=d+n-1,O=d+r-1,f in j?j[O]=j[f]:delete j[O];for(d=0;d<r;d++)j[d+y]=arguments[d+2];return j.length=v-n+r,o}})},b680:function(e,t,r){"use strict";var n=r("23e7"),o=r("da84"),a=r("e330"),c=r("5926"),i=r("408a"),l=r("1148"),u=r("d039"),s=o.RangeError,d=o.String,f=Math.floor,b=a(l),p=a("".slice),h=a(1..toFixed),g=function(e,t,r){return 0===t?r:t%2===1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},O=function(e,t,r){var n=-1,o=r;while(++n<6)o+=t*e[n],e[n]=o%1e7,o=f(o/1e7)},j=function(e,t){var r=6,n=0;while(--r>=0)n+=e[r],e[r]=f(n/t),n=n%t*1e7},v=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var n=d(e[t]);r=""===r?n:r+b("0",7-n.length)+n}return r},y=u((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!u((function(){h({})}));n({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,r,n,o,a=i(this),l=c(e),u=[0,0,0,0,0,0],f="",h="0";if(l<0||l>20)throw s("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return d(a);if(a<0&&(f="-",a=-a),a>1e-21)if(t=m(a*g(2,69,1))-69,r=t<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,t=52-t,t>0){O(u,0,r),n=l;while(n>=7)O(u,1e7,0),n-=7;O(u,g(10,n,1),0),n=t-1;while(n>=23)j(u,1<<23),n-=23;j(u,1<<n),O(u,1,1),j(u,2),h=v(u)}else O(u,0,r),O(u,1<<-t,0),h=v(u)+b("0",l);return l>0?(o=h.length,h=f+(o<=l?"0."+b("0",l-o)+h:p(h,0,o-l)+"."+p(h,o-l))):h=f+h,h}})},be12:function(e,t,r){"use strict";r("99af");var n=r("7a23"),o={key:0},a={key:1,class:"selected ellipse"},c=["onClick"];function i(e,t,r,i,l,u){var s=Object(n["C"])("click-outside");return Object(n["M"])((Object(n["t"])(),Object(n["f"])("div",{class:Object(n["o"])(["base-select",{"base-select-border":r.borderOnly}]),ref:"select"},[Object(n["g"])("div",{class:Object(n["o"])(["base-select-selected",[{open:l.open,disabled:r.disabled},{"base-select-selected-border":r.borderOnly,active:r.modelValue&&""!==r.modelValue}]]),onClick:t[0]||(t[0]=function(){return u.openDropdown&&u.openDropdown.apply(u,arguments)})},[!r.modelValue||""==r.modelValue&&r.placeholder?(Object(n["t"])(),Object(n["f"])("span",o,Object(n["F"])(r.placeholder),1)):(Object(n["t"])(),Object(n["f"])("span",a,Object(n["F"])(u.selected&&u.selected.key),1))],2),!r.disabled&&l.open?(Object(n["t"])(),Object(n["f"])("div",{key:0,class:Object(n["o"])(["base-select-items",{"base-select-items-border":r.borderOnly}]),ref:"dropdown",style:Object(n["p"])(l.dropdownDirection)},[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(r.options,(function(t,o){return Object(n["t"])(),Object(n["f"])("div",{key:"".concat(t.value,"_").concat(o),class:Object(n["o"])({active:r.modelValue==t.value}),onClick:function(r){u.selected=t,l.open=!1,e.$emit("update:modelValue",t.value),e.$emit("change")}},Object(n["F"])(t.key),11,c)})),128))],6)):Object(n["e"])("",!0)],2)),[[s,u.closeDropdown]])}r("a9e3"),r("7db0"),r("d3b7");var l={props:{options:{type:Array,required:!0},label:{type:String,default:""},placeholder:{type:[Number,String],default:""},disabled:{type:Boolean},borderOnly:{type:Boolean},modelValue:{type:[String,Number]},yellowBg:{type:Boolean}},computed:{selected:function(){var e=this;return this.options.find((function(t){return t.value===e.modelValue}))||""}},data:function(){return{open:!1,dropdownDirection:null}},methods:{openDropdown:function(){var e=this;this.disabled||(this.open=!this.open),this.open&&setTimeout((function(){var t=e.$refs.select.getBoundingClientRect().top,r=e.$refs.dropdown.getBoundingClientRect().height;window.innerHeight-t<r+60?e.dropdownDirection="top: auto; bottom: ".concat(e.borderOnly?23:40,"px"):e.dropdownDirection="top: ".concat(e.borderOnly?23:40,"px")}))},closeDropdown:function(){this.open=!1}},emits:["update:modelValue","change"]},u=(r("09ca"),r("6b0d")),s=r.n(u);const d=s()(l,[["render",i],["__scopeId","data-v-6d419576"]]);t["a"]=d},d58f:function(e,t,r){var n=r("da84"),o=r("59ed"),a=r("7b0b"),c=r("44ad"),i=r("07fa"),l=n.TypeError,u=function(e){return function(t,r,n,u){o(r);var s=a(t),d=c(s),f=i(s),b=e?f-1:0,p=e?-1:1;if(n<2)while(1){if(b in d){u=d[b],b+=p;break}if(b+=p,e?b<0:f<=b)throw l("Reduce of empty array with no initial value")}for(;e?b>=0:f>b;b+=p)b in d&&(u=r(u,d[b],b,s));return u}};e.exports={left:u(!1),right:u(!0)}},f26d:function(e,t,r){"use strict";r("417c")}}]);
//# sourceMappingURL=offerCreate.621f4e7d.js.map