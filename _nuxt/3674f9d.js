(window.webpackJsonp=window.webpackJsonp||[]).push([[102,29,40,89],{521:function(e,t,n){"use strict";n.r(t);n(30);var r=n(62),o=n(522),l={name:"SubscribesButton",components:{RcButton:r.default,RcPopover:o.default},props:{profileId:{type:Number,required:!0},text:{type:String,default:""}},computed:{buttonText:function(){return this.isSubscribed?"вы подписаны":"".concat(this.text?this.text:"подписаться")},isSubscribed:function(){return this.$isSubscribed(this.$store,this.profileId)},activePlan:function(){return this.$getActivePlan(this.$store,this.profileId)},activePlanTitle:function(){var e;return null===(e=this.activePlan)||void 0===e?void 0:e.title},isMyProfile:function(){var e,t,n;return(null!==(e=null===(t=this.$auth.user)||void 0===t?void 0:t.pid)&&void 0!==e?e:null===(n=this.$auth.user)||void 0===n?void 0:n.id)===this.profileId}},mounted:function(){var e=this;this.$nuxt.$once("subscribe",(function t(n){n===e._uid&&(console.log("Subscribe!",n),e.$emit("subscribe")),e.$nuxt.$once("subscribe",t)})),this.$nuxt.$once("unsubscribe",(function t(n){n===e._uid&&(console.log("Unsubscribe!",n),e.$emit("subscribe")),e.$nuxt.$once("unsubscribe",t)}))},methods:{subscribe:function(){this.isMyProfile||this.$openSubscribeModal(this.profileId,this._uid)}}},c=n(0),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rc-popover",{attrs:{enabled:e.isSubscribed,"auto-hide":!1},scopedSlots:e._u([{key:"popover",fn:function(){return[e._v('\n    Вы подписаны на тариф "'+e._s(e.activePlanTitle)+'"\n  ')]},proxy:!0}])},[n("rc-button",{staticClass:"subscribes-button",class:{"subscribes-button--active":e.isSubscribed},attrs:{light:!0,small:!0,disabled:e.isMyProfile},nativeOn:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.subscribe.apply(null,arguments)}}},[e._v("\n    "+e._s(e.buttonText)+"\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports},522:function(e,t,n){"use strict";n.r(t);var r={name:"RcPopover",props:{enabled:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},autoHide:{type:Boolean,default:!0},show:{type:Boolean,default:void 0}},data:function(){return{loaded:!1}},computed:{enabledActual:function(){return!!this.loaded&&this.enabled}},mounted:function(){this.loaded=!0}},o=n(0),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.enabledActual?"v-popover":"div",{tag:"component",attrs:{trigger:e.enabled?e.trigger:void 0,"auto-hide":e.enabled?e.autoHide:void 0,show:e.enabled?e.show:void 0},scopedSlots:e._u([e.enabled?{key:"popover",fn:function(){return[e._t("popover")]},proxy:!0}:null],null,!0)},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},772:function(e,t,n){"use strict";n.r(t);var r=n(2),o=(n(22),n(534)),l=n(727),c={name:"FeedPage",meta:{preloader:!0,mobileTitle:"Публикация",mobilePrevPage:{name:"index"}},components:{FeedPost:o.default},mixins:[l.a],data:function(){return{post:null}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPost();case 2:return t.next=4,e.fetchComments();case 4:e.$finishPreloader();case 5:case"end":return t.stop()}}),t)})))()},head:function(){return{title:"Публикация"}},computed:{articleId:function(){var e;return null===(e=this.$route.params)||void 0===e?void 0:e.page_id},postId:function(){var e;return null===(e=this.$route.params)||void 0===e?void 0:e.post_id}},methods:{fetchPost:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var article;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.feed.getArticleDetail(e.articleId);case 3:if(article=t.sent){t.next=6;break}throw new Error("Post data is undefined");case 6:e.post={id:e.postId,viewed:!1,article:article},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.$router.push({name:"index"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},d=n(0),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.post?n("div",{staticClass:"\n    max-w-[630px]\n    xs:mx-0\n    ml-[150px]\n    xs:bg-white-80\n    pt-4\n    xs:pt-0 xs:w-full\n  "},[n("feed-post",{attrs:{post:e.post,"is-viewing":"","show-all-comments-initial":""}})],1):e._e()}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FeedPost:n(534).default})}}]);