(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["offers"],{"07ac":function(e,t,n){var o=n("23e7"),c=n("6f53").values;o({target:"Object",stat:!0},{values:function(e){return c(e)}})},"09ca":function(e,t,n){"use strict";n("723b")},"0e34":function(e,t,n){e.exports=n.p+"img/excel.847a47e8.svg"},1148:function(e,t,n){"use strict";var o=n("da84"),c=n("5926"),r=n("577e"),i=n("1d80"),a=o.RangeError;e.exports=function(e){var t=r(i(this)),n="",o=c(e);if(o<0||o==1/0)throw a("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"1aea":function(e,t,n){e.exports=n.p+"img/pdf.ad036780.svg"},"1d60":function(e,t,n){e.exports=n.p+"img/filters.393d9f5b.svg"},"209a":function(e,t,n){e.exports=n.p+"img/ru.9a99cccd.svg"},"6f53":function(e,t,n){var o=n("83ab"),c=n("e330"),r=n("df75"),i=n("fc6a"),a=n("d1e7").f,l=c(a),s=c([].push),u=function(e){return function(t){var n,c=i(t),a=r(c),u=a.length,f=0,d=[];while(u>f)n=a[f++],o&&!l(c,n)||s(d,e?[n,c[n]]:c[n]);return d}};e.exports={entries:u(!0),values:u(!1)}},"723b":function(e,t,n){},"7db0":function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").find,r=n("44d2"),i="find",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r(i)},"7de2":function(e,t,n){},"8dbe":function(e,t,n){e.exports=n.p+"img/tz.3a9a68e5.svg"},ad08:function(e,t,n){"use strict";n("b202")},b202:function(e,t,n){},b680:function(e,t,n){"use strict";var o=n("23e7"),c=n("da84"),r=n("e330"),i=n("5926"),a=n("408a"),l=n("1148"),s=n("d039"),u=c.RangeError,f=c.String,d=Math.floor,b=r(l),p=r("".slice),O=r(1..toFixed),j=function(e,t,n){return 0===t?n:t%2===1?j(e,t-1,n*e):j(e*e,t/2,n)},h=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},m=function(e,t,n){var o=-1,c=n;while(++o<6)c+=t*e[o],e[o]=c%1e7,c=d(c/1e7)},g=function(e,t){var n=6,o=0;while(--n>=0)o+=e[n],e[n]=d(o/t),o=o%t*1e7},y=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var o=f(e[t]);n=""===n?o:n+b("0",7-o.length)+o}return n},v=s((function(){return"0.000"!==O(8e-5,3)||"1"!==O(.9,0)||"1.25"!==O(1.255,2)||"1000000000000000128"!==O(0xde0b6b3a7640080,0)}))||!s((function(){O({})}));o({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,n,o,c,r=a(this),l=i(e),s=[0,0,0,0,0,0],d="",O="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return f(r);if(r<0&&(d="-",r=-r),r>1e-21)if(t=h(r*j(2,69,1))-69,n=t<0?r*j(2,-t,1):r/j(2,t,1),n*=4503599627370496,t=52-t,t>0){m(s,0,n),o=l;while(o>=7)m(s,1e7,0),o-=7;m(s,j(10,o,1),0),o=t-1;while(o>=23)g(s,1<<23),o-=23;g(s,1<<o),m(s,1,1),g(s,2),O=y(s)}else m(s,0,n),m(s,1<<-t,0),O=y(s)+b("0",l);return l>0?(c=O.length,O=d+(c<=l?"0."+b("0",l-c)+O:p(O,0,c-l)+"."+p(O,c-l))):O=d+O,O}})},be12:function(e,t,n){"use strict";n("99af");var o=n("7a23"),c={key:0},r={key:1,class:"selected ellipse"},i=["onClick"];function a(e,t,n,a,l,s){var u=Object(o["G"])("click-outside");return Object(o["Q"])((Object(o["x"])(),Object(o["h"])("div",{class:Object(o["s"])(["base-select",{"base-select-border":n.borderOnly}]),ref:"select"},[Object(o["i"])("div",{class:Object(o["s"])(["base-select-selected",[{open:l.open,disabled:n.disabled},{"base-select-selected-border":n.borderOnly,active:n.modelValue&&""!==n.modelValue}]]),onClick:t[0]||(t[0]=function(){return s.openDropdown&&s.openDropdown.apply(s,arguments)})},[!n.modelValue||""==n.modelValue&&n.placeholder?(Object(o["x"])(),Object(o["h"])("span",c,Object(o["J"])(n.placeholder),1)):(Object(o["x"])(),Object(o["h"])("span",r,Object(o["J"])(s.selected&&s.selected.key),1))],2),!n.disabled&&l.open?(Object(o["x"])(),Object(o["h"])("div",{key:0,class:Object(o["s"])(["base-select-items",{"base-select-items-border":n.borderOnly}]),ref:"dropdown",style:Object(o["t"])(l.dropdownDirection)},[(Object(o["x"])(!0),Object(o["h"])(o["b"],null,Object(o["D"])(n.options,(function(t,c){return Object(o["x"])(),Object(o["h"])("div",{key:"".concat(t.value,"_").concat(c),class:Object(o["s"])({active:n.modelValue==t.value}),onClick:function(n){s.selected=t,l.open=!1,e.$emit("update:modelValue",t.value),e.$emit("change")}},Object(o["J"])(t.key),11,i)})),128))],6)):Object(o["g"])("",!0)],2)),[[u,s.closeDropdown]])}n("a9e3"),n("7db0"),n("d3b7");var l={props:{options:{type:Array,required:!0},label:{type:String,default:""},placeholder:{type:[Number,String],default:""},disabled:{type:Boolean},borderOnly:{type:Boolean},modelValue:{type:[String,Number]},yellowBg:{type:Boolean}},computed:{selected:function(){var e=this;return this.options.find((function(t){return t.value===e.modelValue}))||""}},data:function(){return{open:!1,dropdownDirection:null}},methods:{openDropdown:function(){var e=this;this.disabled||(this.open=!this.open),this.open&&setTimeout((function(){var t=e.$refs.select.getBoundingClientRect().top,n=e.$refs.dropdown.getBoundingClientRect().height;window.innerHeight-t<n+60?e.dropdownDirection="top: auto; bottom: ".concat(e.borderOnly?23:40,"px"):e.dropdownDirection="top: ".concat(e.borderOnly?23:40,"px")}))},closeDropdown:function(){this.open=!1}},emits:["update:modelValue","change"]},s=(n("09ca"),n("6b0d")),u=n.n(s);const f=u()(l,[["render",a],["__scopeId","data-v-6d419576"]]);t["a"]=f},da3f:function(e,t,n){"use strict";n.r(t);n("45fc"),n("d3b7"),n("07ac"),n("4de4");var o=n("7a23"),c=n("1d60"),r=n.n(c),i=n("c8de"),a=n.n(i),l=function(e){return Object(o["A"])("data-v-0932940f"),e=e(),Object(o["y"])(),e},s={class:"offer"},u=l((function(){return Object(o["i"])("h1",{class:"offer__title page__title"},"Коммерческое предложение",-1)})),f={class:"offer-header__buttons"},d={class:"offer_create"},b=Object(o["j"])(" Создать "),p=l((function(){return Object(o["i"])("span",{class:"upp",style:{"margin-left":"2px"}}," кп",-1)})),O={class:"offer_copy"},j=Object(o["j"])(" Копировать "),h={class:"offer-search"},m={key:0,class:"offer-filters__button"},g={key:0,class:"offer-filters__count"},y=l((function(){return Object(o["i"])("img",{src:r.a,alt:"Filters"},null,-1)})),v={key:0,class:"offer-filters__close"},_={key:1,class:"offer-filters__title page__title"},k={class:"offer-filters_counterparty"},w={class:"offer-filters_region"},C={class:"offer-filters_customer"},x={class:"offer-filters_manager"},T={key:2,class:"offer-filters__apply page-buttons"},$={class:"offer-filters__apply-button"},V=Object(o["j"])(" Применить "),J={class:"offer-content page-wrapper"};function q(e,t,n,c,r,i){var l=Object(o["F"])("base-button"),q=Object(o["F"])("base-input"),S=Object(o["F"])("base-select"),D=Object(o["F"])("offers-table");return Object(o["x"])(),Object(o["h"])("section",s,[u,Object(o["i"])("div",{class:Object(o["s"])(["offer-header page-wrapper",{shadow:r.scrollStart}])},[Object(o["i"])("div",f,[Object(o["i"])("div",d,[Object(o["k"])(l,{type:"filled",onClicked:t[0]||(t[0]=function(t){return e.$router.push({name:"offerCreate"})})},{default:Object(o["P"])((function(){return[b,p]})),_:1})]),Object(o["i"])("div",O,[Object(o["k"])(l,{type:"outlined",onClicked:i.copy,disabled:!r.offerToCopy.length},{default:Object(o["P"])((function(){return[j]})),_:1},8,["onClicked","disabled"])])]),Object(o["i"])("div",h,[Object(o["k"])(q,{id:"offerSearch",placeholder:e.$isMobile?"Поиск":"Поиск по номеру КП, конечному заказчику, региону, контрагенту",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:r.suggestions,onSetSuggestion:i.getOffers,onKeypressEnter:i.getOffers,onClear:t[1]||(t[1]=function(e){return r.query="",i.getOffers()}),onInput:t[2]||(t[2]=function(e){return i.getOffers("search")}),modelValue:r.query,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])]),e.$isMobile?(Object(o["x"])(),Object(o["h"])("div",m,[Object.values(r.filters).some((function(e){return e}))?(Object(o["x"])(),Object(o["h"])("div",g,Object(o["J"])(Object.values(r.filters).filter((function(e){return""!==e})).length),1)):Object(o["g"])("",!0),Object(o["k"])(l,{type:"outlined",onClick:t[4]||(t[4]=function(t){return e.open=!0})},{default:Object(o["P"])((function(){return[y]})),_:1})])):Object(o["g"])("",!0)],2),!e.$isMobile||e.$isMobile&&e.open?(Object(o["x"])(),Object(o["h"])("div",{key:0,class:Object(o["s"])(["offer-filters page-wrapper",{open:e.showContent}])},[e.$isMobile?(Object(o["x"])(),Object(o["h"])("div",v,[Object(o["i"])("img",{src:a.a,alt:"Close",onClick:t[5]||(t[5]=function(){return e.closeDropdown&&e.closeDropdown.apply(e,arguments)})})])):Object(o["g"])("",!0),e.$isMobile?(Object(o["x"])(),Object(o["h"])("h4",_,"Фильтры")):Object(o["g"])("",!0),Object(o["i"])("div",k,[Object(o["k"])(q,{id:"offerSearchCounterparty",placeholder:"Контрагент",search:!0,suggestions:r.counterparties,onInput:t[6]||(t[6]=function(e){return i.getOffers("search")}),onKeypressEnter:i.getOffers,onSetSuggestion:t[7]||(t[7]=function(t){return i.getOffers(e.s)}),modelValue:r.filters.counterparty,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.filters.counterparty=e})},null,8,["suggestions","onKeypressEnter","modelValue"])]),Object(o["i"])("div",w,[Object(o["k"])(S,{options:r.regions,placeholder:"Регион",modelValue:r.filters.region,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.filters.region=e}),onChange:i.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["i"])("div",C,[Object(o["k"])(S,{options:r.customers,placeholder:"Конечный заказчик",modelValue:r.filters.customer,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.filters.customer=e}),onChange:i.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["i"])("div",x,[Object(o["k"])(S,{options:r.managers,placeholder:"Менеджер",modelValue:r.filters.manager,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.filters.manager=e}),onChange:i.getOffers},null,8,["options","modelValue","onChange"])]),e.$isMobile?(Object(o["x"])(),Object(o["h"])("div",T,[Object(o["i"])("div",$,[Object(o["k"])(l,{type:"filled",onClick:e.closeDropdown},{default:Object(o["P"])((function(){return[V]})),_:1},8,["onClick"])])])):Object(o["g"])("",!0)],2)):Object(o["g"])("",!0),Object(o["i"])("div",J,[Object(o["k"])(D,{offers:r.offers,onCopy:t[12]||(t[12]=function(e){r.offerToCopy=e}),onScroll:t[13]||(t[13]=function(e){r.scrollStart=e>0}),onScrolled:t[14]||(t[14]=function(){})},null,8,["offers"])])])}var S=n("ade3"),D=n("b85c"),M=(n("7db0"),n("b0c0"),n("be12")),Q=n("304d"),U=(n("caad"),n("2532"),n("1aea")),F=n.n(U),R=n("0e34"),I=n.n(R),A=n("209a"),E=n.n(A),P=n("8dbe"),B=n.n(P),z=function(e){return Object(o["A"])("data-v-02dbd972"),e=e(),Object(o["y"])(),e},N={key:0,class:"offer-table"},K=z((function(){return Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th"),Object(o["i"])("th",null,"Номер"),Object(o["i"])("th",null,"Дата создания"),Object(o["i"])("th",null,"Стоимость"),Object(o["i"])("th",null,"Контрагент"),Object(o["i"])("th",null,"Скидка"),Object(o["i"])("th",null,"Регион"),Object(o["i"])("th",null,"Файлы")])],-1)})),L={key:0,ref:"table"},G={class:"no-wrap"},H={class:"base-check"},W=["id","name","value","disabled"],X=["for"],Y=["onClick"],Z={class:"tooltip"},ee=["onClick"],te={class:"tooltip"},ne=["onClick"],oe={class:"tooltip"},ce=["onClick"],re={class:"tooltip"},ie=["onClick"],ae={class:"tooltip"},le=["onClick"],se={class:"tooltip"},ue={class:"no-wrap"},fe={class:"offer-actions"},de=["href"],be=z((function(){return Object(o["i"])("img",{src:F.a,alt:"PDF",width:"29",height:"27"},null,-1)})),pe=[be],Oe=["href"],je=z((function(){return Object(o["i"])("img",{src:I.a,alt:"Excel",width:"29",height:"27"},null,-1)})),he=[je],me=["href"],ge=z((function(){return Object(o["i"])("img",{src:E.a,alt:"Ru",width:"22",height:"27"},null,-1)})),ye=[ge],ve={class:"offer-action _tz"},_e=z((function(){return Object(o["i"])("img",{src:B.a,alt:"Tz",width:"22",height:"27"},null,-1)})),ke={class:"offer-action-dropdown"},we={class:"offer-action-dropdown-content"},Ce={class:"base-check radio"},xe=["id","value"],Te=["for"],$e={class:"base-check radio"},Ve=["id","value"],Je=["for"],qe={class:"base-check radio"},Se=["id","value"],De=["for"],Me=z((function(){return Object(o["i"])("span",{class:"upp"},"ктру",-1)})),Qe=Object(o["j"])(" сокр. "),Ue=[Me,Qe],Fe=["href"],Re={key:1,class:"offer-table-mobile table-mobile",ref:"table"},Ie={class:"offer-table-mobile-checkbox"},Ae={class:"base-check"},Ee=["id","name","value","disabled"],Pe=["for"],Be=["onClick"],ze=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Номер ",-1)})),Ne={class:"table-mobile__value"},Ke=["onClick"],Le=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Дата созд. ",-1)})),Ge={class:"table-mobile__value"},He=["onClick"],We=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Стоимость ",-1)})),Xe={class:"table-mobile__value"},Ye=["onClick"],Ze=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Контрагент ",-1)})),et={class:"table-mobile__value"},tt=["onClick"],nt=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),ot={class:"table-mobile__value"},ct=["onClick"],rt=z((function(){return Object(o["i"])("span",{class:"table-mobile__title"}," Регион ",-1)})),it={class:"table-mobile__value"},at={class:"offer-actions"},lt=["href"],st=z((function(){return Object(o["i"])("img",{src:F.a,alt:"PDF",width:"29",height:"27"},null,-1)})),ut=[st],ft=["href"],dt=z((function(){return Object(o["i"])("img",{src:I.a,alt:"Excel",width:"29",height:"27"},null,-1)})),bt=[dt],pt=["href"],Ot=z((function(){return Object(o["i"])("img",{src:E.a,alt:"Ru",width:"22",height:"27"},null,-1)})),jt=[Ot],ht={class:"offer-action _tz"},mt=z((function(){return Object(o["i"])("img",{src:B.a,alt:"Tz"},null,-1)})),gt={class:"offer-action-dropdown"},yt={class:"offer-action-dropdown-content"},vt={class:"base-check radio"},_t=["id","value"],kt=["for"],wt={class:"base-check radio"},Ct=["id","value"],xt=["for"],Tt={class:"base-check radio"},$t=["id","value"],Vt=["for"],Jt=z((function(){return Object(o["i"])("span",{class:"upp"},"ктру",-1)})),qt=Object(o["j"])(" сокр. "),St=[Jt,qt],Dt=["href"],Mt={key:2,class:"offer-content-notFound content-notFound"};function Qt(e,t,n,c,r,i){var a=Object(o["G"])("tooltip");return Object(o["x"])(),Object(o["h"])(o["b"],null,[e.$isMobile?n.offers.length&&e.$isMobile?(Object(o["x"])(),Object(o["h"])("div",Re,[(Object(o["x"])(!0),Object(o["h"])(o["b"],null,Object(o["D"])(n.offers,(function(n,c){return Object(o["x"])(),Object(o["h"])("div",{class:"table-mobile-column",key:c},[Object(o["i"])("div",Ie,[Object(o["i"])("div",Ae,[Object(o["Q"])(Object(o["i"])("input",{type:"checkbox",id:n.id,name:n.id,value:n.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(n.id),"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.offerToCopy=e})},null,8,Ee),[[o["L"],r.offerToCopy]]),Object(o["i"])("label",{for:n.id},null,8,Pe)])]),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[ze,Object(o["i"])("span",Ne,Object(o["J"])(n.id),1)],8,Be),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Le,Object(o["i"])("span",Ge,Object(o["J"])(n.created_at),1)],8,Ke),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[We,Object(o["i"])("span",Xe,Object(o["J"])(n.total_cost)+" ₽ ",1)],8,He),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Ze,Object(o["i"])("span",et,Object(o["J"])(n.counterparty.name),1)],8,Ye),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[nt,Object(o["i"])("span",ot,Object(o["J"])(n.counterparty.discount)+"% ",1)],8,tt),Object(o["i"])("div",{class:"table-mobile-row",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[rt,Object(o["i"])("span",it,Object(o["J"])(n.end_customer&&n.end_customer.region),1)],8,ct),Object(o["i"])("div",at,[Object(o["i"])("a",{href:n.kp_pdf_file,class:"offer-action _pdf"},ut,8,lt),Object(o["i"])("a",{href:n.kp_exel_file,class:"offer-action _excel"},bt,8,ft),Object(o["i"])("a",{href:n.ru_file,class:"offer-action _ru"},jt,8,pt),Object(o["i"])("div",ht,[mt,Object(o["i"])("div",gt,[Object(o["i"])("div",yt,[Object(o["i"])("div",vt,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"ktru".concat(n.id),value:n.krtu_file,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.downloadType=e})},null,8,_t),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"ktru".concat(n.id),class:"upp"}," ктру ",8,kt)]),Object(o["i"])("div",wt,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"tu".concat(n.id),value:n.krtu_avg_file,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.downloadType=e})},null,8,Ct),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"tu".concat(n.id),class:"upp"}," ту ",8,xt)]),Object(o["i"])("div",Tt,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"ktrus".concat(n.id),value:n.krtu_gost_file,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.downloadType=e})},null,8,$t),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"ktrus".concat(n.id)},St,8,Vt)]),Object(o["i"])("a",{href:r.downloadType,class:"offer-action__button"}," Скачать ",8,Dt)])])])])])})),128))],512)):Object(o["g"])("",!0):(Object(o["x"])(),Object(o["h"])("table",N,[K,n.offers.length?(Object(o["x"])(),Object(o["h"])("tbody",L,[(Object(o["x"])(!0),Object(o["h"])(o["b"],null,Object(o["D"])(n.offers,(function(n){return Object(o["x"])(),Object(o["h"])("tr",{key:n.id},[Object(o["i"])("td",G,[Object(o["i"])("div",H,[Object(o["Q"])(Object(o["i"])("input",{type:"checkbox",id:n.id,name:n.id,value:n.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(n.id),"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.offerToCopy=e})},null,8,W),[[o["L"],r.offerToCopy]]),Object(o["i"])("label",{for:n.id},null,8,X)])]),Object(o["i"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.id),1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",Z,[Object(o["j"])(Object(o["J"])(n.id),1)])),[[a]])],8,Y),Object(o["i"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.created_at),1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",te,[Object(o["j"])(Object(o["J"])(n.created_at),1)])),[[a]])],8,ee),Object(o["i"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.total_cost)+" ₽ ",1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",oe,[Object(o["j"])(Object(o["J"])(n.total_cost)+" ₽ ",1)])),[[a]])],8,ne),Object(o["i"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.counterparty.name),1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",re,[Object(o["j"])(Object(o["J"])(n.counterparty.name),1)])),[[a]])],8,ce),Object(o["i"])("td",{class:"no-wrap",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.counterparty.discount)+"% ",1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",ae,[Object(o["j"])(Object(o["J"])(n.counterparty.discount)+"% ",1)])),[[a]])],8,ie),Object(o["i"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["i"])("span",null,Object(o["J"])(n.end_customer&&n.end_customer.region),1),Object(o["Q"])((Object(o["x"])(),Object(o["h"])("span",se,[Object(o["j"])(Object(o["J"])(n.end_customer&&n.end_customer.region),1)])),[[a]])],8,le),Object(o["i"])("td",ue,[Object(o["i"])("div",fe,[Object(o["i"])("a",{href:n.kp_pdf_file,class:"offer-action _pdf"},pe,8,de),Object(o["i"])("a",{href:n.kp_exel_file,class:"offer-action _excel"},he,8,Oe),Object(o["i"])("a",{href:n.ru_file,class:"offer-action _ru"},ye,8,me),Object(o["i"])("div",ve,[_e,Object(o["i"])("div",ke,[Object(o["i"])("div",we,[Object(o["i"])("div",Ce,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"ktru".concat(n.id),value:n.krtu_file,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.downloadType=e})},null,8,xe),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"ktru".concat(n.id),class:"upp"}," ктру ",8,Te)]),Object(o["i"])("div",$e,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"tu".concat(n.id),value:n.krtu_avg_file,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.downloadType=e})},null,8,Ve),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"tu".concat(n.id),class:"upp"}," ту ",8,Je)]),Object(o["i"])("div",qe,[Object(o["Q"])(Object(o["i"])("input",{type:"radio",id:"ktrus".concat(n.id),value:n.krtu_gost_file,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.downloadType=e})},null,8,Se),[[o["M"],r.downloadType]]),Object(o["i"])("label",{for:"ktrus".concat(n.id)},Ue,8,De)]),Object(o["i"])("a",{href:r.downloadType,class:"offer-action__button"}," Скачать ",8,Fe)])])])])])])})),128))],512)):Object(o["g"])("",!0)])),n.offers.length?Object(o["g"])("",!0):(Object(o["x"])(),Object(o["h"])("span",Mt," Ничего не найдено "))],64)}var Ut=n("1da1"),Ft=(n("96cf"),n("b680"),{name:"OfferTable",props:{offers:{type:Array}},data:function(){return{offerToCopy:[],downloadType:"#"}},methods:{onScroll:function(e){var t=e.getBoundingClientRect().height,n=e.scrollHeight,o=e.scrollTop;this.$emit("scroll",o),Math.ceil(o+t)==n.toFixed(0)&&this.$emit("scrolled")}},mounted:function(){var e=this;return Object(Ut["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:setTimeout((function(){var t=e.$refs.table;t&&t.addEventListener("scroll",(function(){e.onScroll(t)}))}),300);case 1:case"end":return t.stop()}}),t)})))()},watch:{offerToCopy:function(){this.$emit("copy",this.offerToCopy)}},emits:["download","scroll","scrolled","copy"]}),Rt=(n("ad08"),n("6b0d")),It=n.n(Rt);const At=It()(Ft,[["render",Qt],["__scopeId","data-v-02dbd972"]]);var Et=At,Pt={components:{BaseSelect:M["a"],OffersTable:Et},data:function(){return{query:"",scrollStart:!1,filters:{counterparty:"",region:"",customer:"",manager:""},regions:[{key:"Не Выбран",value:""}],customers:[{key:"Не Выбран",value:""}],offerToCopy:[],offers:[],counterparties:[],suggestions:[],managers:[]}},mounted:function(){this.getOffers(),this.getRegions()},methods:{copy:function(){var e=this,t=this.offers.find((function(t){return t.id==e.offerToCopy[0]})),n=[];if(t.offer_products.length){var o,c=Object(D["a"])(t.offer_products);try{for(c.s();!(o=c.n()).done;){var r=o.value;n.push({product:r.product,price:r.price,discount:r.discount,count:r.count,cost:r.cost})}}catch(a){c.e(a)}finally{c.f()}}var i={counterparty:t.counterparty&&t.counterparty.id||null,end_customer:t.end_customer&&t.end_customer.id||null,company:t.company&&t.company.id||null,offer_products:n||null,tech_docs_format:t.tech_docs_format};this.$api.post("".concat(this.$api.defaults.API,"/offer"),i).then((function(t){e.$router.push({name:"offerCreate",query:{id:t.data.id}})}))},getOffers:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=(e={},Object(S["a"])(e,this.query&&"search",this.query),Object(S["a"])(e,this.filters.counterparty&&"counterparty",this.filters.counterparty),Object(S["a"])(e,this.filters.customer&&"end_customer",this.filters.customer),Object(S["a"])(e,this.filters.region&&"end_customer__region",this.filters.region),e);this.counterparties=[],this.suggestions=[],this.customers=[{key:"Не Выбран",value:""}],this.$api.get("".concat(this.$api.defaults.API,"/offer"),{params:o}).then((function(e){console.log(e.data.results),"search"!==n&&(t.offers=[]);var o,c=Object(D["a"])(e.data.results);try{var r=function(){var e=o.value;"search"!==n&&t.offers.push(e),"search"==n&&t.query&&t.suggestions.push({key:e.id,value:e.id});var c={key:e.end_customer?e.end_customer.name:"",value:e.end_customer?e.end_customer.id:""};if(!t.customers.find((function(e){return e.value===c.value}))&&c.key&&t.customers.push(c),"search"==n){var r={key:e.counterparty.name,value:e.counterparty.id};!t.counterparties.find((function(e){return e.value===r.value}))&&r.key&&t.filters.counterparty&&t.counterparties.push(r)}};for(c.s();!(o=c.n()).done;)r()}catch(i){c.e(i)}finally{c.f()}})).catch((function(e){return console.log(e)}))},getRegions:function(){var e=this;this.$api.get("".concat(this.$api.defaults.API,"/regions")).then((function(t){var n,o=Object(D["a"])(t.data);try{var c=function(){var t=n.value,o={key:t.region,value:t.region};!e.regions.some((function(e){return e.key==o.key}))&&e.regions.push(o)};for(o.s();!(n=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}))}},mixins:[Q["a"]]};n("ecaa");const Bt=It()(Pt,[["render",q],["__scopeId","data-v-0932940f"]]);t["default"]=Bt},ecaa:function(e,t,n){"use strict";n("7de2")}}]);
//# sourceMappingURL=offers.70c6dfb7.js.map