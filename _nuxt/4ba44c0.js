(window.webpackJsonp=window.webpackJsonp||[]).push([[42,23,43,45,46],{543:function(t,e,n){"use strict";n.r(e);n(30);var o={name:"LikeButton",components:{CustomIcon:n(7).default},props:{count:{type:[Number,String],required:!0},liked:Boolean,mini:Boolean},computed:{styleLike:function(){return this.liked?"fill-red-100 stroke-red-100":"stroke-black-100 fill-transparent"}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"flex items-center",on:{click:function(e){return e.stopPropagation(),t.$emit("like")}}},[t.mini?[n("custom-icon",{attrs:{width:20,height:20,"icon-id":"#i-post-comment-like",classes:t.styleLike}}),t._v(" "),t.count>0?n("span",{staticClass:"text-black-60 f-medium text-[14px]",class:{"like-count--liked":t.isLiked}},[t._v(t._s(t.count))]):t._e()]:[n("custom-icon",{staticClass:"xs:hidden",attrs:{"icon-id":"#i-post-like",classes:t.styleLike}}),t._v(" "),n("custom-icon",{staticClass:"hidden xs:block",attrs:{"icon-id":"#i-post-sm-like",height:24,width:25,classes:t.styleLike}}),t._v(" "),t.count>0?n("span",{staticClass:"like-count",class:{"like-count--liked":t.liked}},[t._v("\n      "+t._s(t.count)+"\n    ")]):t._e()]],2)}),[],!1,null,null,null);e.default=component.exports},701:function(t,e,n){"use strict";n.r(e);n(30);var o={name:"PostCommentOptions",components:{CustomIcon:n(7).default},props:{answersCount:{type:Number,required:!0},canReply:Boolean}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center justify-between xs:mt-2"},[n("div",[t.canReply?n("button",{staticClass:"post-comment--button text-purple-80 mr-2",on:{click:function(e){return t.$emit("reply")}}},[n("span",{staticClass:"xs:hidden"},[t._v("ответить")]),t._v(" "),n("custom-icon",{staticClass:"xs:inline hidden",attrs:{"icon-id":"#i-post-sm-comment",width:24,height:24}}),t._v(" "),n("span",{staticClass:"xs:inline hidden f-bold text-black-40 text-xs"},[t._v(t._s(t.answersCount))])],1):t._e(),t._v(" "),t.canReply?n("button",{staticClass:"post-comment--button text-black-20",on:{click:function(e){return t.$emit("repost")}}},[n("span",{staticClass:"xs:hidden"},[t._v("поделиться")]),t._v(" "),n("custom-icon",{staticClass:"xs:inline hidden",attrs:{"icon-id":"#i-post-sm-share",width:24,height:24,classes:"stroke-black-60"}})],1):t._e()])])}),[],!1,null,null,null);e.default=component.exports},702:function(t,e,n){"use strict";n.r(e);n(30);var o={name:"PostCommentResponse",components:{CustomIcon:n(7).default},props:{answersCount:{type:Number,required:!0},answersShow:Boolean},computed:{toggleButtonIcon:function(){return this.answersShow?"#i-arrow-up":"#i-arrow-down"}},methods:{toggleAnswers:function(){this.$emit("toggle-answers",!this.answersShow)}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.answersCount?n("div",{staticClass:"xs:mt-[3.5px]"},[n("button",{staticClass:"text-sm f-medium text-black-60 leading-[30px] mb-2",on:{click:t.toggleAnswers}},[n("span",{staticClass:"xs:hidden"},[t._v("\n      показать\n      "+t._s(t.answersCount)+"\n      "+t._s(t.$quantDecline(t.answersCount,["ответ","ответа","ответов"]))+"\n    ")]),t._v(" "),n("span",{staticClass:"xs:inline hidden text-purple-80"},[t._v("\n      ответы ("+t._s(t.answersCount)+")\n    ")]),t._v(" "),n("custom-icon",{staticClass:"inline",attrs:{"icon-id":t.toggleButtonIcon,classes:"xs:stroke-purple-80 stroke-black-60 fill-white-100"}})],1),t._v(" "),t.answersShow?[t._t("default")]:t._e()],2):t._e()}),[],!1,null,null,null);e.default=component.exports},703:function(t,e,n){"use strict";n.r(e);var o=n(2),r=(n(22),{name:"PostCommentContent",props:{commentContent:{type:String,required:!0},commentMedia:{type:Array,required:!0}},computed:{media:function(){return this.commentMedia||null}},methods:{openPreviewHandler:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$openImagePreviewModal(t,e.media);case 2:case"end":return n.stop()}}),n)})))()}}}),l=n(0),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-comment--content"},[n("p",{staticClass:"post-comment--content-text"},[t._v("\n    "+t._s(t.commentContent)+"\n  ")]),t._v(" "),t.media?n("div",{staticClass:"post-comment--content-media"},[t._l(t.media,(function(e,o){return[n("div",{key:e.id,staticClass:"post-comment--content-image",on:{click:function(e){return t.openPreviewHandler(o)}}},[n("img",{staticClass:"w-full h-full object-cover",attrs:{src:t.$formatUrl(e.url),alt:e.id}})])]}))],2):t._e()])}),[],!1,null,null,null);e.default=component.exports},738:function(t,e,n){"use strict";n.r(e);var o=n(2),r=(n(22),n(30),n(36)),l=n(701),c=n(702),m=n(703),d=n(543),v={name:"PostComment",components:{PostCommentContent:m.default,PostCommentResponse:c.default,PostCommentOptions:l.default,LikeButton:d.default,AvatarImage:r.default},props:{comment:{type:Object,required:!0},level:{type:Number,default:1},parent:{type:Object,default:null},parentRef:{type:Object,default:null}},data:function(){return{showingAnswers:!1,fetchedAnswers:!1,answers:[],isLikedTmp:void 0,countLikesTmp:void 0}},computed:{currentThis:function(){return this},commentUserProfile:function(){var t;return null===(t=this.comment)||void 0===t?void 0:t.creator},eventPayload:function(){return{comment:this.comment,level:this.level,parent:this.parent,parentRef:this.parentRef,ref:this}},commentDate:function(){var t,e,n,o,r;return null!==(t=null===(e=this.comment)||void 0===e||null===(n=e.article)||void 0===n?void 0:n.published_at)&&void 0!==t?t:null===(o=this.comment)||void 0===o||null===(r=o.article)||void 0===r?void 0:r.created_at},content:function(){var t,e,n;return null!==(t=null===(e=this.comment)||void 0===e||null===(n=e.article)||void 0===n?void 0:n.content)&&void 0!==t?t:""},media:function(){var t,e;return null!==(t=null===(e=this.comment)||void 0===e?void 0:e.media)&&void 0!==t?t:null},authorName:function(){return this.$userDisplayingName(this.commentUserProfile)},authorProfileId:function(){var t,e;return null===(t=this.comment)||void 0===t||null===(e=t.article)||void 0===e?void 0:e.profile},isLiked:{get:function(){var t,e;return void 0!==this.isLikedTmp?this.isLikedTmp:Boolean(null===(t=this.comment)||void 0===t||null===(e=t.article)||void 0===e?void 0:e.is_ilike)},set:function(t){this.isLikedTmp=t}},answersCount:function(){var t,e,n,o;return(null===(t=this.comment)||void 0===t||null===(e=t.article)||void 0===e||null===(n=e.counters)||void 0===n?void 0:n.comments)||(null===(o=this.answers)||void 0===o?void 0:o.length)||0},countLikes:{get:function(){var t,e;return void 0!==this.countLikesTmp?this.countLikesTmp:(null===(t=this.comment)||void 0===t||null===(e=t.counters)||void 0===e?void 0:e.marks)||0},set:function(t){this.countLikesTmp=t}},canReply:function(){var t,e;return this.authorProfileId!==(null===(t=this.$auth)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id)},routeToProfile:function(){var t,e;return this.$routeToProfile(null===(t=this.comment)||void 0===t||null===(e=t.article)||void 0===e?void 0:e.creator)}},methods:{toggleAnswers:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}if(e.fetchedAnswers){n.next=7;break}return n.next=4,e.$api.feed.getComments(null===(o=e.comment)||void 0===o?void 0:o.id);case 4:r=n.sent,e.answers=(null==r?void 0:r.results)||[],e.fetchedAnswers=!0;case 7:e.showingAnswers=!0,n.next=11;break;case 10:e.showingAnswers=!1;case 11:case"end":return n.stop()}}),n)})))()},switchLike:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLiked){e.next=6;break}return e.next=3,t.$api.feed.unlike(null===(o=t.comment)||void 0===o?void 0:o.id);case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,t.$api.feed.like(null===(r=t.comment)||void 0===r?void 0:r.id);case 8:n=e.sent;case 9:isNaN(parseInt(n))||(t.isLiked?t.isLiked=!1:t.isLiked=!0,t.countLikes=n);case 10:case"end":return e.stop()}}),e)})))()}}},f=n(0),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-comment"},[n("nuxt-link",{staticClass:"comment-author flex",attrs:{to:t.routeToProfile}},[n("avatar-image",{attrs:{"img-class":"comment-author--logo",src:t.$userAvatar(t.commentUserProfile)}}),t._v(" "),n("div",{staticClass:"comment-author--name profile-user-name profile-user-name--for-feed-post-comment"},[t._v("\n      "+t._s(t.authorName)+"\n    ")]),t._v(" "),n("div",{staticClass:"comment-author-date"},[t._v(t._s(t.$postDateFormat(t.commentDate)))])],1),t._v(" "),n("div",{staticClass:"xs:ml-[39px] ml-[42px]"},[n("div",{staticClass:"relative"},[n("post-comment-content",{attrs:{"comment-media":t.media,"comment-content":t.content}}),t._v(" "),n("div",{staticClass:"flex items-center absolute bottom-0 right-0"},[n("like-button",{attrs:{count:t.countLikes,liked:t.isLiked,mini:""},on:{like:t.switchLike}})],1),t._v(" "),n("post-comment-options",{attrs:{"can-reply":t.canReply,"answers-count":t.answersCount},on:{reply:function(e){return t.$emit("reply",t.eventPayload)},repost:function(e){return t.$emit("repost",t.eventPayload)}}})],1),t._v(" "),t.parent?t._e():n("post-comment-response",{attrs:{"answers-count":t.answersCount,"answers-show":t.showingAnswers},on:{"toggle-answers":t.toggleAnswers}},[t._l(t.answers,(function(e){return[n("post-comment",{key:e.id,attrs:{comment:e,level:t.level+1,parent:t.comment,"parent-ref":t.currentThis},on:{reply:function(e){return t.$emit("reply",e)},repost:function(e){return t.$emit("repost",e)}}})]}))],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);