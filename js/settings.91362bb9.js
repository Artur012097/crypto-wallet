(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"0406":function(e,t,n){},"07ac":function(e,t,n){var a=n("23e7"),s=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return s(e)}})},"4fadc":function(e,t,n){var a=n("23e7"),s=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return s(e)}})},"6f53":function(e,t,n){var a=n("83ab"),s=n("e330"),o=n("df75"),i=n("fc6a"),c=n("d1e7").f,r=s(c),u=s([].push),l=function(e){return function(t){var n,s=i(t),c=o(s),l=c.length,d=0,b=[];while(l>d)n=c[d++],a&&!r(s,n)||u(b,e?[n,s[n]]:s[n]);return b}};e.exports={entries:l(!0),values:l(!1)}},b41f:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),s=n("c8de"),o=n.n(s),i=function(e){return Object(a["A"])("data-v-3a95225c"),e=e(),Object(a["y"])(),e},c={class:"settings"},r=i((function(){return Object(a["i"])("img",{src:o.a,alt:"Close"},null,-1)})),u=[r],l=i((function(){return Object(a["i"])("h1",{class:"settings__title page__title"},"Мои данные",-1)})),d={class:"settings-fields fields page-wrapper"},b={class:"settings-content-row fields-row"},f={class:"settings-content-row fields-row"},p={class:"settings-content-row"},h={class:"settings-buttons page-buttons _save"},j={class:"settings-buttons-save _save__button"},O=Object(a["j"])(" Сохранить ");function v(e,t,n,s,o,i){var r=Object(a["F"])("base-input"),v=Object(a["F"])("base-button"),g=Object(a["F"])("base-modal");return Object(a["x"])(),Object(a["h"])(a["b"],null,[Object(a["i"])("section",c,[Object(a["j"])(Object(a["J"])(e.$router.history)+" ",1),e.$isMobile?(Object(a["x"])(),Object(a["h"])("div",{key:0,class:"settings__close",onClick:t[0]||(t[0]=function(){return i.close&&i.close.apply(i,arguments)})},u)):Object(a["g"])("",!0),l,Object(a["i"])("div",d,[Object(a["i"])("div",b,[Object(a["k"])(r,{label:"Имя и фамилия",id:"settingsName",modelValue:o.data.fio,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.data.fio=e})},null,8,["modelValue"])]),Object(a["i"])("div",f,[Object(a["k"])(r,{label:"Телефон",type:"tel",ref:"phone",placeholder:"+7 (___) __-__-___",maxLength:18,id:"settingsPhone",modelValue:o.data.phone_number,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.data.phone_number=e})},null,8,["placeholder","modelValue"])]),Object(a["i"])("div",p,[Object(a["k"])(r,{label:"Электронная почта",id:"settingsEmail",modelValue:o.data.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.data.email=e})},null,8,["modelValue"])])]),Object(a["i"])("div",h,[Object(a["i"])("div",j,[Object(a["k"])(v,{type:"filled",onClicked:i.save},{default:Object(a["P"])((function(){return[O]})),_:1},8,["onClicked"])])])]),Object(a["k"])(g,{open:o.openModal,text:"Сохранено",onClose:t[4]||(t[4]=function(e){return o.openModal=!1})},null,8,["open"])],64)}var g=n("3835"),m=(n("4fadc"),n("45fc"),n("d3b7"),n("07ac"),n("99af"),n("e9c4"),n("d9e2"),n("d401"),n("b0c0"),n("213a")),_={name:"Settings",beforeRouteEnter:function(e,t,n){n((function(e){e.prevRoute=t}))},computed:{user:function(){return this.$store.getters.user}},data:function(){return{data:{fio:"",phone_number:"",email:""},openModal:!1,prevRoute:null}},setup:function(){Object(m["b"])({title:"Мои Данные"})},mounted:function(){for(var e=0,t=Object.entries(this.data);e<t.length;e++){var n=Object(g["a"])(t[e],1),a=n[0];this.data[a]=this.user[a]||""}},methods:{save:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.$store.dispatch("loading",!0),this.$api.patch("".concat(this.$api.defaults.API,"/user/").concat(this.user.id),this.data).then((function(t){console.log(t.data);var n=t.data;n.id=e.user.id,n.token=e.user.token,localStorage.setItem("user",JSON.stringify(n)),e.$store.dispatch("setUser",n),e.$store.dispatch("loading",!1),e.openModal=!0})).catch((function(t){new Error(t),e.$store.dispatch("loading",!1)})))},close:function(){this.$router.push({name:this.prevRoute.name||"index"})}}},w=(n("d313"),n("d959")),k=n.n(w);const $=k()(_,[["render",v],["__scopeId","data-v-3a95225c"]]);t["default"]=$},d313:function(e,t,n){"use strict";n("0406")}}]);
//# sourceMappingURL=settings.91362bb9.js.map