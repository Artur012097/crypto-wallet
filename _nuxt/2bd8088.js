(window.webpackJsonp=window.webpackJsonp||[]).push([[81,20,29,40,89],{521:function(e,t,n){"use strict";n.r(t);n(30);var r=n(62),o=n(522),l={name:"SubscribesButton",components:{RcButton:r.default,RcPopover:o.default},props:{profileId:{type:Number,required:!0},text:{type:String,default:""}},computed:{buttonText:function(){return this.isSubscribed?"вы подписаны":"".concat(this.text?this.text:"подписаться")},isSubscribed:function(){return this.$isSubscribed(this.$store,this.profileId)},activePlan:function(){return this.$getActivePlan(this.$store,this.profileId)},activePlanTitle:function(){var e;return null===(e=this.activePlan)||void 0===e?void 0:e.title},isMyProfile:function(){var e,t,n;return(null!==(e=null===(t=this.$auth.user)||void 0===t?void 0:t.pid)&&void 0!==e?e:null===(n=this.$auth.user)||void 0===n?void 0:n.id)===this.profileId}},mounted:function(){var e=this;this.$nuxt.$once("subscribe",(function t(n){n===e._uid&&(console.log("Subscribe!",n),e.$emit("subscribe")),e.$nuxt.$once("subscribe",t)})),this.$nuxt.$once("unsubscribe",(function t(n){n===e._uid&&(console.log("Unsubscribe!",n),e.$emit("subscribe")),e.$nuxt.$once("unsubscribe",t)}))},methods:{subscribe:function(){this.isMyProfile||this.$openSubscribeModal(this.profileId,this._uid)}}},c=n(0),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rc-popover",{attrs:{enabled:e.isSubscribed,"auto-hide":!1},scopedSlots:e._u([{key:"popover",fn:function(){return[e._v('\n    Вы подписаны на тариф "'+e._s(e.activePlanTitle)+'"\n  ')]},proxy:!0}])},[n("rc-button",{staticClass:"subscribes-button",class:{"subscribes-button--active":e.isSubscribed},attrs:{light:!0,small:!0,disabled:e.isMyProfile},nativeOn:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.subscribe.apply(null,arguments)}}},[e._v("\n    "+e._s(e.buttonText)+"\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports},522:function(e,t,n){"use strict";n.r(t);var r={name:"RcPopover",props:{enabled:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},autoHide:{type:Boolean,default:!0},show:{type:Boolean,default:void 0}},data:function(){return{loaded:!1}},computed:{enabledActual:function(){return!!this.loaded&&this.enabled}},mounted:function(){this.loaded=!0}},o=n(0),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.enabledActual?"v-popover":"div",{tag:"component",attrs:{trigger:e.enabled?e.trigger:void 0,"auto-hide":e.enabled?e.autoHide:void 0,show:e.enabled?e.show:void 0},scopedSlots:e._u([e.enabled?{key:"popover",fn:function(){return[e._t("popover")]},proxy:!0}:null],null,!0)},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},539:function(e,t,n){"use strict";n.r(t);var r={components:{RcButton:n(62).default},methods:{clickHandle:function(){this.$emit("click")}}},o=n(0),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rc-button",{attrs:{outlined:!0,"transparent-bg":!0,classes:"max-w-[360px] h-[50px] w-full text-purple-80 xs:h-8 xs:max-w-full"},on:{click:e.clickHandle}},[n("span",{staticClass:"text-xl mr-2 f-regular"},[e._v("+")]),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},715:function(e,t,n){"use strict";n.r(t);n(13),n(10),n(12),n(8),n(15),n(11),n(16);var r=n(2),o=n(4),l=(n(22),n(6)),c=n(521);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={name:"ProfilePanelFooter",components:{CreateBigButton:n(539).default,SubscribesButton:c.default},data:function(){return{subscribed:!1}},computed:f(f({},Object(l.e)("profile",["profile","plans"])),{},{activePlan:function(){var e;return this.$getActivePlan(this.$store,null===(e=this.profile)||void 0===e?void 0:e.id)},activePlanTitle:function(){var e;return null===(e=this.activePlan)||void 0===e?void 0:e.title}}),methods:f(f(f(f({},Object(l.d)("feed",["showModal"])),Object(l.b)("feed",["recommendsAction"])),Object(l.b)("feed",["profilePostAction"])),{},{handleSubscribe:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=null!==(n=null==e||null===(r=e.$route)||void 0===r||null===(o=r.params)||void 0===o?void 0:o.profile_identifier)&&void 0!==n?n:null==e||null===(l=e.$route)||void 0===l||null===(c=l.params)||void 0===c?void 0:c.profile_id,t.next=3,e.profilePostAction({profileId:d});case 3:case"end":return t.stop()}}),t)})))()}})},h=n(0),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-panel-footer"},[e.$selfProfile(e.profile)?n("div",{staticClass:"profile-panel-footer__create-post"},[n("create-big-button",{on:{click:e.showModal}},[e._v("создать пост")])],1):n("div",{staticClass:"profile-panel-footer__subscribe-buttons"},[n("subscribes-button",{staticClass:"profile-panel-footer__subscribe-buttons--subscribe-button",attrs:{"profile-id":e.profile.id},on:{subscribe:e.handleSubscribe}}),e._v(" "),!e.$selfProfile(e.profile)&&e.$isSubscribed(e.$store,e.profile.id)?n("div",{staticClass:"profile-panel-footer__subscribe-buttons--tariff-plan-name"},[e._v("\n      "+e._s(e.activePlanTitle)+"\n    ")]):e._e()],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SubscribesButton:n(521).default})}}]);