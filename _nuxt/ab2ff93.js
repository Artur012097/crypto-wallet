(window.webpackJsonp=window.webpackJsonp||[]).push([[2,24,41,47,48,49,55,56],{534:function(t,e,n){"use strict";n.r(e);n(13),n(10),n(15),n(11),n(16);var o=n(2),r=n(4),l=(n(22),n(8),n(34),n(37),n(30),n(12),n(48),n(56),n(63),n(26),n(6)),c=n(7),d=n(33),m=n(717),f=n(718),v=n(719),h=n(749),x=n(720),w=n(721),C=n(540),O=n(560),P=n(740),_=n(727),k=n(230);function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I={name:"FeedPost",components:{FeedPostNoSubscribe:w.default,FeedPostHeader:x.default,PostCommentList:h.default,CustomIcon:c.default,FeedPostInfo:m.default,NuxtLinkConditional:C.default,PostImage:O.default,PostCarousel:P.default,FeedPostVote:f.default,FeedPostContent:v.default,OptionsButton:k.default,OptionsPopover:function(){return n.e(8).then(n.bind(null,538))}},mixins:[_.a],props:{post:{type:Object,required:!0},showAllCommentsInitial:Boolean,isViewing:Boolean},data:function(){return{showAllCommentsTmp:void 0,firstCommentTmp:void 0,commentsLengthTmp:void 0,showCommentTmp:void 0,showOptions:!1}},computed:{showAllComments:Object(d.b)("showAllCommentsInitial","showAllCommentsTmp"),firstComment:Object(d.b)("postFirstComment","firstCommentTmp"),commentsLength:Object(d.b)("postCommentsCount","commentsLengthTmp"),postRoute:function(){return this.$routeToPost(this.post)},canView:function(){var t,e;return Boolean(!(null!==(t=this.article)&&void 0!==t&&t.recommend)||0!==Number(null===(e=this.post)||void 0===e?void 0:e.permission_level))},isViewingModeEnabled:function(){return this.isViewing},showComment:{get:function(){return void 0!==this.showCommentTmp?this.showCommentTmp:this.isViewing},set:function(t){this.showCommentTmp=t}},postFirstComment:function(){var t,e,n=(null===(t=this.post)||void 0===t?void 0:t.comment)||(null===(e=this.comments)||void 0===e?void 0:e[0]);return null!=n&&n.id?n:null},postCommentsCount:function(){var t,e;return null!==(t=null===(e=this.articleCounters)||void 0===e?void 0:e.comments)&&void 0!==t?t:0},userProfile:function(){var t,e,n;return null!==(t=null===(e=this.post)||void 0===e?void 0:e.creator)&&void 0!==t?t:null===(n=this.article)||void 0===n?void 0:n.creator},userBalanceInfo:function(){return this.$userBalanceInfo(this.userProfile)},article:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.article},createdAt:function(){var t,e,n;return null!==(t=null===(e=this.article)||void 0===e?void 0:e.published_at)&&void 0!==t?t:null===(n=this.article)||void 0===n?void 0:n.created_at},firstImage:function(){var t;return null===(t=this.postImages)||void 0===t?void 0:t[0]},postImages:function(){var t,e,n,o,r=this;return null!==(t=null===(e=this.article)||void 0===e||null===(n=e.media)||void 0===n||null===(o=n.filter)||void 0===o?void 0:o.call(n,(function(t){return r.$isImage(null==t?void 0:t.url)})))&&void 0!==t?t:[]},postId:function(){return this.post.id},articleId:function(){var t;return null===(t=this.article)||void 0===t?void 0:t.id},articleCounters:function(){var t,e;return null!==(t=null===(e=this.article)||void 0===e?void 0:e.counters)&&void 0!==t?t:{}},articleContent:function(){var t;return null===(t=this.article)||void 0===t?void 0:t.content},articleAuthor:function(){var t;return null===(t=this.article)||void 0===t?void 0:t.author},postVote:function(){var t,e;return null===(t=this.article)||void 0===t||null===(e=t.extra)||void 0===e?void 0:e.vote},postTitle:function(){var t,e,n;return(null===(t=this.post)||void 0===t||null===(e=t.article)||void 0===e||null===(n=e.content)||void 0===n?void 0:n.slice(0,100))||""},postContent:function(){var t,e;return(null===(t=this.post)||void 0===t||null===(e=t.article)||void 0===e?void 0:e.content)||""},isSelfPost:function(){var t,e,n,o,r;return(null===(t=this.$auth)||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id)===(null!==(n=null===(o=this.article)||void 0===o?void 0:o.pid)&&void 0!==n?n:null===(r=this.article)||void 0===r?void 0:r.profile)},options:function(){return this.isSelfPost?[{icon:"i-edit-pen",text:"редактировать"},{icon:"i-trash",text:"удалить пост",textColor:"text-red-60"}]:[{icon:"i-post-spam",text:"пожаловаться"}]}},mounted:function(){document.addEventListener("scroll",this.viewed)},beforeDestroy:function(){document.removeEventListener("scroll",this.viewed)},methods:y(y({},Object(l.d)("feed",["addViewedPostId"])),{},{refreshPostComments:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1===t){n.next=3;break}return n.next=3,e.fetchComments();case 3:void 0!==t&&(e.showAllComments=t),t||(e.firstComment=null===(o=e.comments)||void 0===o?void 0:o[0]);case 5:case"end":return n.stop()}}),n)})))()},nextPostComments:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchComments(!0);case 2:case"end":return e.stop()}}),e)})))()},goToPost:function(){return!1},viewed:function(){var t,e;this.$refs.feedPost.getBoundingClientRect().top<-100&&(null===(t=this.post)||void 0===t||!t.viewed)&&this.addViewedPostId(null===(e=this.post)||void 0===e?void 0:e.id)},showMobileComments:function(){this.showComment=!this.showComment},actionHandler:function(t){return 0===t?this.isSelfPost?this.postEditHandler():this.feedbackHandler():this.deletePostHandler(),null},postEditHandler:function(){console.log("edit")},feedbackHandler:function(){console.log("feedbackHandler")},deletePostHandler:function(){var t=this.$route.name.includes("profile")||null,e={id:this.articleId||null,profile:t};this.$openComfirmModal(e)},openPreviewHandler:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$openImagePreviewModal(0,[t.firstImage]);case 2:case"end":return e.stop()}}),e)})))()}})},$=n(0),component=Object($.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"feedPost",staticClass:"feed-post xs:mb-1 mb-3 bg-white-100"},[n("div",{staticClass:"block",on:{click:t.goToPost}},[n("div",{staticClass:"flex justify-between mb-2 xs:min-h-[75px] xs:mx-1 xs:mb-0 relative"},[n("div",{staticClass:"xs:hidden"},[n("feed-post-header",{attrs:{"profile-id":t.article.profile,"post-route":t.isViewing?null:t.postRoute,"created-at":t.createdAt,profile:t.userProfile}})],1),t._v(" "),n("div",{staticClass:"hidden xs:block xs:absolute xs:top-0 xs:left-0"},[n("feed-post-header",{attrs:{"profile-id":t.article.profile,"post-route":t.isViewing?null:t.postRoute,"created-at":t.createdAt,profile:t.userProfile}}),t._v(" "),t.createdAt?n("nuxt-link-conditional",{staticClass:"post-date hidden xs:block mt-1",attrs:{to:t.postRoute,condition:Boolean(t.postRoute)},nativeOn:{click:function(t){t.stopPropagation()}}},[n("span",{staticClass:"text-black-40"},[t._v(t._s(t.$postDateFormat(t.createdAt)))])]):t._e()],1),t._v(" "),n("div",{staticClass:"absolute top-0 right-0 h-full flex items-center xs:flex-col"},[t._e(),t._v(" "),n("options-button",{attrs:{color:"bg-white-40",classes:"rotate-90",count:2},model:{value:t.showOptions,callback:function(e){t.showOptions=e},expression:"showOptions"}}),t._v(" "),n("options-popover",{attrs:{options:t.options,classes:"w-[185px] top-[32px] right-[-12px] xs:top-[22px] xs:right-[-13px]"},on:{actionHandler:t.actionHandler},model:{value:t.showOptions,callback:function(e){t.showOptions=e},expression:"showOptions"}})],1)]),t._v(" "),t.canView?[t.postVote?[n("feed-post-vote",{attrs:{post:t.post,vote:t.postVote}})]:[n("feed-post-content",{attrs:{content:t.articleContent,"route-to-post":t.postRoute,"is-viewing":t.isViewing}}),t._v(" "),n("div",{staticClass:"post-content"},[t.postImages.length>1?[n("post-carousel",{attrs:{"post-media":t.postImages}})]:t.firstImage?[n("post-image",{attrs:{image:t.firstImage},on:{openPreviewHandler:t.openPreviewHandler}})]:t._e()],2)],t._v(" "),n("feed-post-info",{attrs:{counters:t.articleCounters,"share-title":t.postTitle,"share-content":t.postContent,"liked-initial":t.article.is_ilike,"is-favorite-initial":t.article.is_favorite,"post-id":t.postId,"comments-count":t.commentsLength},on:{showMobileComments:t.showMobileComments}})]:t._e()],2),t._v(" "),t.canView?n("post-comment-list",{attrs:{"show-all":t.showAllComments,"first-comment":t.firstComment,"comments-length":t.commentsLength,comments:t.comments,"content-id":t.articleId,"has-next":t.hasNext,"hidden-on-mobile":!t.showComment},on:{"refresh-post-comments":t.refreshPostComments,"next-post-comments":t.nextPostComments}}):n("feed-post-no-subscribe",{attrs:{"author-profile-id":t.article.profile,post:t.post}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FeedPostHeader:n(720).default,FeedPostVote:n(718).default,FeedPostContent:n(719).default,FeedPostInfo:n(717).default,FeedPostNoSubscribe:n(721).default})},540:function(t,e,n){"use strict";n.r(e);var o={name:"NuxtLinkConditional",props:{condition:Boolean,to:{type:[Object,String],default:null}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.condition&&t.to?n("nuxt-link",{attrs:{to:t.to}},[t._t("default")],2):n("div",[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},548:function(t,e,n){"use strict";n.r(e);n(30);var o={name:"FeedPostVoteItem",components:{CustomIcon:n(7).default},props:{option:{type:Object,required:!0},percentsVoted:{type:Number,default:0},selected:Boolean},computed:{value:function(){var t;return null===(t=this.option)||void 0===t?void 0:t.value}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feed-post-vote-item",class:{"feed-post-vote-item__selected":t.selected},on:{click:function(e){return t.$emit("click",e)}}},[n("div",{staticClass:"feed-post-vote-item__text"},[t.selected?n("custom-icon",{staticClass:"feed-post-vote-item__text--icon",attrs:{"icon-id":"#i-main-success",width:20,height:20}}):t._e(),t._v("\n    "+t._s(t.value)+"\n  ")],1),t._v(" "),n("div",{staticClass:"feed-post-vote-item__percents-voted"},[t._v(t._s(t.percentsVoted)+"%")])])}),[],!1,null,null,null);e.default=component.exports},560:function(t,e,n){"use strict";n.r(e);var o={name:"PostImage",components:{ImgWithPlaceholder:n(117).default},props:{image:{type:Object,required:!0}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full h-[307px] relative rounded-sm overflow-hidden",on:{click:function(e){return t.$emit("openPreviewHandler")}}},[n("img-with-placeholder",{staticClass:"post-image !object-contain",attrs:{src:t.$formatUrl(t.image.url),alt:"Post Image"}}),t._v(" "),n("img-with-placeholder",{staticClass:"post-image post-image--placeholder !object-fill",attrs:{src:t.$formatUrl(t.image.url),alt:"Post Image"}})],1)}),[],!1,null,null,null);e.default=component.exports},717:function(t,e,n){"use strict";n.r(e);n(13),n(10),n(12),n(8),n(15),n(11),n(16);var o=n(2),r=n(4),l=(n(22),n(30),n(6)),c=n(7),d=n(33),m=n(543);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"FeedPostInfo",components:{CustomIcon:c.default,LikeButton:m.default},props:{postId:{type:Number,required:!0},counters:{type:Object,required:!0},likedInitial:{type:Boolean,default:!1},isFavoriteInitial:{type:Boolean,default:!1},commentsCount:{type:Number,default:0},shareTitle:{type:String,default:""},shareContent:{type:String,default:""}},data:function(){return{likedTemp:void 0,isFavoriteTemp:void 0,countLikesTemp:void 0}},computed:{viewedCount:function(){var t,e;return null!==(t=null===(e=this.counters)||void 0===e?void 0:e.viewed)&&void 0!==t?t:0},countLikesInitial:function(){var t,e;return null!==(t=null===(e=this.counters)||void 0===e?void 0:e.marks)&&void 0!==t?t:0},isFavorite:Object(d.b)("isFavoriteInitial","isFavoriteTemp"),liked:Object(d.b)("likedInitial","likedTemp"),countLikes:Object(d.b)("countLikesInitial","countLikesTemp")},methods:v(v({},Object(l.b)("feed",["likeAction","unlikeAction"])),{},{like:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.liked){e.next=7;break}return e.next=3,t.$api.feed.unlike(t.postId);case 3:r=e.sent,t.liked=!1,e.next=11;break;case 7:return e.next=9,t.$api.feed.like(t.postId);case 9:r=e.sent,t.liked=!0;case 11:t.countLikes=null===(n=r)||void 0===n||null===(o=n.results)||void 0===o?void 0:o.count;case 12:case"end":return e.stop()}}),e)})))()},toFavorites:function(){this.isFavorite=!this.isFavorite},showComments:function(){this.$emit("showMobileComments",this._uid)},share:function(){var title=this.shareTitle,text=this.shareContent,t="https://frontend-dev.easydev.group/feed/".concat(this.postId);this.$share(title,text,t)}})},x=n(0),component=Object(x.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-info"},[n("div",{staticClass:"flex items-center"},[n("like-button",{attrs:{count:t.countLikes,liked:t.liked},on:{like:t.like}}),t._v(" "),n("button",{staticClass:"hidden xs:flex ml-1 items-center",on:{click:function(e){return e.stopPropagation(),t.showComments.apply(null,arguments)}}},[n("custom-icon",{staticClass:"xs:block hidden mr-[2px]",attrs:{"icon-id":"#i-post-sm-comment",width:24,height:24,classes:"fill-black-100"}}),t._v(" "),n("span",{staticClass:"f-bold text-md text-black-60"},[t._v(t._s(t.commentsCount))])],1),t._v(" "),n("button",{staticClass:"ml-[12px]",on:{click:function(e){return e.stopPropagation(),t.share.apply(null,arguments)}}},[n("custom-icon",{attrs:{"icon-id":"#i-post-share",classes:"stroke-black-60"}})],1),t._v(" "),t._e()],1),t._v(" "),n("div",{staticClass:"flex items-center"},[n("custom-icon",{staticClass:"xs:hidden",attrs:{"icon-id":"#i-main-visibility",classes:"stroke-black-100"}}),t._v(" "),n("custom-icon",{staticClass:"hidden xs:block",attrs:{"icon-id":"#i-main-sm-visibility",width:20,height:21}}),t._v(" "),n("span",{staticClass:"view-count"},[t._v(t._s(t.$numberLength(t.viewedCount||0)))])],1)])}),[],!1,null,null,null);e.default=component.exports},718:function(t,e,n){"use strict";n.r(e);n(351),n(170);var o={name:"FeedPostVote",components:{FeedPostVoteItem:n(548).default},props:{post:{type:Object,required:!0},vote:{type:Object,required:!0}},data:function(){return{selectedOptionIds:[]}},computed:{content:function(){var t,e;return null===(t=this.post)||void 0===t||null===(e=t.article)||void 0===e?void 0:e.content},countVotedUsers:function(){return 0},voteOptions:function(){var t;return(null===(t=this.vote)||void 0===t?void 0:t.options)||[]}},methods:{selectOption:function(option){var t=this.selectedOptionIds.findIndex((function(t){return t===(null==option?void 0:option.id)}));-1!==t?this.selectedOptionIds.splice(t,1):this.selectedOptionIds.push(null==option?void 0:option.id)},isSelectedOption:function(option){return-1!==this.selectedOptionIds.findIndex((function(t){return t===(null==option?void 0:option.id)}))}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feed-post-vote"},[n("div",{staticClass:"feed-post-vote__content"},[t._v("\n    "+t._s(t.content)+"\n    "),n("div",{staticClass:"feed-post-vote__content--subtitle"},[t._v("анонимное голосование")])]),t._v(" "),t._l(t.voteOptions,(function(option,e){return[n("feed-post-vote-item",{key:e,attrs:{option:option,selected:t.isSelectedOption(option)},on:{click:function(e){return e.stopPropagation(),t.selectOption(option)}}})]})),t._v(" "),n("div",{staticClass:"feed-post-vote__content"},[n("div",{staticClass:"feed-post-vote__content--subtitle"},[t._v("\n      проголосовало "+t._s(t.countVotedUsers)+"\n      "+t._s(t.$quantDecline(t.countVotedUsers,["человек","человека","человек"]))+"\n    ")])])],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FeedPostVoteItem:n(548).default})},719:function(t,e,n){"use strict";n.r(e);n(30),n(352);var o={name:"FeedPostContent",components:{NuxtLinkConditional:n(540).default},props:{content:{type:[String,Number],default:""},routeToPost:{type:[Object,String],default:null},isViewing:Boolean},data:function(){return{showingAll:!1}},computed:{maxLength:function(){return this.$feedPostMaxLength()},trimContent:function(){var t,e;return null===(t=this.content)||void 0===t||null===(e=t.trim)||void 0===e?void 0:e.call(t)},showingContent:function(){return this.showingAll?this.trimContent:this.$truncateString(this.trimContent,this.maxLength)},showMoreDetailsButton:function(){var t;return(null===(t=this.content)||void 0===t?void 0:t.length)>this.maxLength}},methods:{showMore:function(){this.showingAll=!0}}},r=n(0),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nuxt-link-conditional",{staticClass:"post-text",attrs:{condition:!t.isViewing,to:t.routeToPost}},[t._v(t._s(t.showingContent))]),t._v(" "),t.showMoreDetailsButton&&!t.showingAll?n("div",[n("button",{staticClass:"text-purple-80",on:{click:function(e){return e.stopPropagation(),t.showMore.apply(null,arguments)}}},[t._v("подробнее")])]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},720:function(t,e,n){"use strict";n.r(e);n(30);var o=n(540),r=n(36),l=n(64),c={name:"FeedPostHeader",components:{NuxtLinkConditional:o.default,AvatarImage:r.default,IsVerifiedMark:l.default},props:{authorAvatar:{type:String,default:""},profileId:{type:Number,required:!0},postRoute:{type:Object,default:null},createdAt:{type:[Date,String],default:void 0},profile:{type:Object,default:null}},computed:{routeToProfile:function(){return this.$routeToProfile(this.profile)}}},d=n(0),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"author"},[n("nuxt-link",{attrs:{to:t.routeToProfile},nativeOn:{click:function(t){t.stopPropagation()}}},[n("avatar-image",{attrs:{src:t.$userAvatar(t.profile)}})],1),t._v(" "),n("div",[n("nuxt-link",{staticClass:"flex items-center h-4 xs:row-span-2",attrs:{to:t.routeToProfile},nativeOn:{click:function(t){t.stopPropagation()}}},[n("h4",{staticClass:"author-name profile-user-name profile-user-name--for-feed-post"},[t._v("\n        "+t._s(t.$userDisplayingName(t.profile))+"\n      ")]),t._v(" "),n("is-verified-mark",{attrs:{verified:t.$isUserVerified(t.profile),small:""}})],1),t._v(" "),t.createdAt?n("nuxt-link-conditional",{staticClass:"post-date xs:hidden",attrs:{to:t.postRoute,condition:Boolean(t.postRoute)},nativeOn:{click:function(t){t.stopPropagation()}}},[n("span",[t._v(t._s(t.$postDateFormat(t.createdAt)))])]):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports},721:function(t,e,n){"use strict";n.r(e);n(13),n(10),n(12),n(8),n(15),n(11),n(16);var o=n(2),r=n(4),l=(n(22),n(30),n(56),n(63),n(26),n(6));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={name:"FeedPostNoSubscribe",components:{SubscribesButton:n(521).default},props:{authorProfileId:{type:Number,required:!0},post:{type:Object,required:!0}},computed:{planName:function(){var t,e,n,o;return null!==(t=null===(e=this.post)||void 0===e||null===(n=e.article)||void 0===n||null===(o=n.plan_details)||void 0===o?void 0:o.title)&&void 0!==t?t:"Unknown"},planCost:function(){var t,e,n,o;return null!==(t=null===(e=this.post)||void 0===e||null===(n=e.article)||void 0===n||null===(o=n.plan_details)||void 0===o?void 0:o.cost)&&void 0!==t?t:0},routeToSubscribes:function(){return this.$routeToSubscribes(this.authorProfileId)},postCreator:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.creator)||null}},methods:d(d({},Object(l.b)("feed",["postAction","profilePostAction","tagsAction","recommendsAction"])),{},{handleSubscribe:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$route.name.includes("profile")){e.next=4;break}return d=null!==(n=null==t||null===(o=t.$route)||void 0===o||null===(r=o.params)||void 0===r?void 0:r.profile_identifier)&&void 0!==n?n:null==t||null===(l=t.$route)||void 0===l||null===(c=l.params)||void 0===c?void 0:c.profile_id,t.profilePostAction({profileId:d}),e.abrupt("return");case 4:return e.next=6,t.postAction();case 6:return e.next=8,t.tagsAction();case 8:case"end":return e.stop()}}),e)})))()}})},f=n(0),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"limited-post"},[t._m(0),t._v(" "),n("div",{staticClass:"flex justify-between mt-[14px] xs:items-center items-center xs:justify-center"},[n("nuxt-link",{staticClass:"xs:hidden f-medium xs:text-sm text-md text-purple-100 py-[9px] px-1",attrs:{to:t.$routeToProfile(t.postCreator)}},[t._v("\n      о подписках автора >\n    ")]),t._v(" "),n("subscribes-button",{staticClass:"xs:f-medium f-bold text-md rounded-lg xs:pt-[7.5px] xs:pb-[8.5px] py-[10.5px] px-1",attrs:{"profile-id":t.authorProfileId,text:t.planName+" "+t.planCost+"$"},on:{subscribe:t.handleSubscribe}})],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xs:mx-0 mx-3 not-subscribe flex justify-center pt-[19px] flex-col"},[n("p",{staticClass:"post-no-subscribe mb-[13.5px]"},[t._v("\n      Только для premium подписчиков\n    ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{SubscribesButton:n(521).default})},727:function(t,e,n){"use strict";n(13),n(10),n(12),n(8),n(15),n(11),n(16);var o=n(23),r=n(2),l=n(4),c=(n(22),n(46),n(6));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f=function(t,e){return{get:function(){return this.isViewingModeEnabled?this[e]:this[t]},set:function(n){this.isViewingModeEnabled?this.setFeedPostProp([e,n]):this[t]=n}}};e.a={data:function(){return{commentsLocal:[],commentsPageLocal:1,hasNextLocal:!0,endCommentIdLocal:0}},computed:m(m({},Object(c.e)("feed-post",["postComments","postCommentsPage","hasNextPostComments","endPostCommentId"])),{},{isViewingModeEnabled:function(){return!0},postId:function(){return null},comments:f("commentsLocal","postComments"),commentsPage:f("commentsPageLocal","postCommentsPage"),hasNext:f("hasNextLocal","hasNextPostComments"),endCommentId:f("endCommentIdLocal","endPostCommentId")}),methods:m(m({},Object(c.d)("feed-post",["setFeedPostProp"])),{},{fetchComments:function(){var t=arguments,e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,c,d,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(c=t.length>0&&void 0!==t[0]&&t[0])||!e.lastPageReached){n.next=3;break}return n.abrupt("return");case 3:return c&&e.commentsPage++,n.next=6,e.$api.feed.getComments(e.postId,c?e.commentsPage:null,e.endCommentId);case 6:d=n.sent,e.commentsLength=null==d?void 0:d.count,null!=d&&d.next||(e.hasNext=!1),e.comments=c?[].concat(Object(o.a)(e.comments),Object(o.a)((null==d?void 0:d.results)||[])):(null==d?void 0:d.results)||[],!e.endCommentId&&null!==(r=e.comments)&&void 0!==r&&null!==(l=r[0])&&void 0!==l&&l.id&&(e.endCommentId=null===(m=e.comments)||void 0===m||null===(f=m[0])||void 0===f?void 0:f.id);case 11:case"end":return n.stop()}}),n)})))()}})}},740:function(t,e,n){"use strict";n.r(e);var o=n(2),r=(n(22),n(710)),l=n.n(r),c=(n(711),n(7)),d=n(560),m={name:"PostCarousel",components:{VueSlickCarousel:l.a,CustomIcon:c.default,PostImage:d.default},props:{postMedia:{type:Array,required:!0}},data:function(){return{currentIndex:0,width:0}},computed:{settings:function(){return{infinite:this.width>1024,swipe:this.width<1024}}},watch:{width:function(t){this.swipe=t}},mounted:function(){this.width=window.innerWidth,window.addEventListener("resize",this.updateWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.updateWidth)},methods:{clickDot:function(t){this.$refs.carousel.goTo(t),this.currentIndex=t},changeCarouselIndex:function(t){this.currentIndex=t},updateWidth:function(){this.width=window.innerWidth},openPreviewHandler:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$openImagePreviewModal(t.currentIndex,t.postMedia);case 2:case"end":return e.stop()}}),e)})))()}}},f=n(0),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-[307px] relative"},[n("div",{staticClass:"text-center absolute top-[10px] right-[10px] z-1 bg-black-100 bg-opacity-50 rounded-[16px] text-white-100 min-w-[46px] h-[27px] px-2 py-1 f-medium text-sm"},[t._v("\n    "+t._s(t.currentIndex+1)+"/"+t._s(t.postMedia.length)+"\n  ")]),t._v(" "),n("VueSlickCarousel",t._b({ref:"carousel",attrs:{arrows:!0,dots:!1},on:{afterChange:t.changeCarouselIndex},scopedSlots:t._u([{key:"prevArrow",fn:function(){return[n("button",{staticClass:"xs:hidden left-2 post-carousel-arrow-button"},[n("custom-icon",{attrs:{"icon-id":"#i-arrow-left",classes:"stroke-black-100"}})],1)]},proxy:!0},{key:"nextArrow",fn:function(){return[n("button",{staticClass:"xs:hidden right-2 post-carousel-arrow-button"},[n("custom-icon",{attrs:{"icon-id":"#i-arrow-right",classes:"stroke-black-100"}})],1)]},proxy:!0}])},"VueSlickCarousel",t.settings,!1),[t._l(t.postMedia,(function(image){return[n("post-image",{key:image.id,attrs:{image:image},on:{openPreviewHandler:t.openPreviewHandler}})]}))],2),t._v(" "),n("div",{staticClass:"xs:hidden post-carousel-dots"},[t._l(t.postMedia,(function(image,e){return[n("button",{key:image.url,staticClass:"post-carousel-dots--dot mr-[8px]",class:{"w-[8px] h-[8px] !bg-purple-80":t.currentIndex===e},attrs:{"data-id":e},on:{click:function(n){return t.clickDot(e)}}})]}))],2)],1)}),[],!1,null,null,null);e.default=component.exports}}]);