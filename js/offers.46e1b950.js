(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["offers"],{"09ca":function(e,t,n){"use strict";n("723b")},"0e34":function(e,t,n){e.exports=n.p+"img/excel.847a47e8.svg"},1148:function(e,t,n){"use strict";var o=n("da84"),c=n("5926"),r=n("577e"),a=n("1d80"),i=o.RangeError;e.exports=function(e){var t=r(a(this)),n="",o=c(e);if(o<0||o==1/0)throw i("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,n){var o=n("da84"),c=n("c65b"),r=n("825a"),a=n("1626"),i=n("c6b6"),u=n("9263"),l=o.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var o=c(n,e,t);return null!==o&&r(o),o}if("RegExp"===i(e))return c(u,e,t);throw l("RegExp#exec called on incompatible receiver")}},"1aea":function(e,t,n){e.exports=n.p+"img/pdf.ad036780.svg"},"1d60":function(e,t,n){e.exports=n.p+"img/filters.393d9f5b.svg"},"209a":function(e,t,n){e.exports=n.p+"img/ru.9a99cccd.svg"},2141:function(e,t,n){"use strict";n("ac1f"),n("841c");var o=n("7a23"),c=n("7669"),r=n.n(c),a=n("c8de"),i=n.n(a),u=["for"],l={class:"input"},s=["type","id","name","required","disabled","readonly","placeholder","value","minLength","maxlength"],d=["onClick"],f={key:1,class:"base-input-icon"},b={key:0,src:r.a,width:"29",height:"26",alt:"Search"},p={key:2,class:"base-input__msg"};function g(e,t,n,c,r,a){var g=Object(o["D"])("click-outside");return Object(o["N"])((Object(o["u"])(),Object(o["f"])("div",{class:Object(o["p"])(["base-input",{"base-input-error":n.message,"base-input-tableInput":n.tableInput,"base-input-row":n.label}]),ref:"inputWrapper"},[n.label?(Object(o["u"])(),Object(o["f"])("label",{key:0,for:n.id,style:Object(o["q"])(n.labelStyle)},Object(o["G"])(n.label),13,u)):Object(o["e"])("",!0),Object(o["g"])("div",l,[Object(o["g"])("input",{ref:"input",class:Object(o["p"])({error:n.error,search:n.search,searchIcon:n.searchIcon,filled:n.modelValue,short:n.short,addProduct:n.addProduct}),type:n.type,id:n.id,name:n.id,required:n.required,disabled:n.disabled,readonly:n.readonly,placeholder:n.placeholder,value:n.modelValue,minLength:n.minLength?n.minLength:"",maxlength:n.maxLength?n.maxLength:"",onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value),e.$emit("input")}),onFocus:t[1]||(t[1]=function(t){return e.$emit("focus")}),onBlur:t[2]||(t[2]=function(t){return e.$emit("blur")}),onClick:t[3]||(t[3]=function(t){return e.$emit("click")}),onKeypress:[t[4]||(t[4]=Object(o["O"])((function(t){return e.$emit("keypressEnter"),r.suggestion=!1}),["enter"])),t[5]||(t[5]=function(t){return e.$emit("keypress"),a.openSuggestion()})]},null,42,s),n.search&&n.suggestions.length&&n.suggestions&&r.suggestion?(Object(o["u"])(),Object(o["f"])("div",{key:0,class:"search-suggestion",style:Object(o["q"])([r.suggestionDirection,{width:"".concat(n.suggestionWidth,"px")}]),ref:"suggestion"},[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.suggestions,(function(t,n){return Object(o["u"])(),Object(o["f"])("span",{key:n,onClick:function(n){return e.$emit("update:modelValue",t.value),e.$emit("setSuggestion",t.value),r.suggestion=!1}},Object(o["G"])(t.key),9,d)})),128))],4)):Object(o["e"])("",!0)]),n.searchIcon?(Object(o["u"])(),Object(o["f"])("div",f,[n.modelValue?(Object(o["u"])(),Object(o["f"])("img",{key:1,class:"clear-input",src:i.a,alt:"Clear",width:"23",height:"23",onClick:t[6]||(t[6]=function(t){return e.$emit("clear")})})):(Object(o["u"])(),Object(o["f"])("img",b))])):Object(o["e"])("",!0),n.error?(Object(o["u"])(),Object(o["f"])("span",p,Object(o["G"])(n.message),1)):Object(o["e"])("",!0)],2)),[[g,function(){r.suggestion=!1}]])}n("a9e3");var O={name:"BaseInput",props:{type:{type:String,default:"text"},id:{type:String},label:{type:String,default:""},error:{type:Boolean,default:!1},required:{type:Boolean},message:{type:String,default:""},tableInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},modelValue:{type:[String,Number],required:!0},minLength:{type:Number},maxLength:{type:Number},disabled:{type:Boolean},readonly:{type:Boolean},search:{type:Boolean,default:!1},searchIcon:{type:Boolean,default:!1},suggestions:{type:Array},suggestionWidth:{type:Number},short:{type:Boolean},labelStyle:{type:[Object,String]},addProduct:{type:Boolean}},data:function(){return{suggestion:!1,suggestionDirection:null}},methods:{openSuggestion:function(){var e=this;this.suggestions&&(this.suggestion=!0),this.suggestion&&setTimeout((function(){var t=e.$refs.inputWrapper.getBoundingClientRect().top;window.innerHeight-t<260?e.suggestionDirection="top: auto; bottom: ".concat(40,"px"):e.suggestionDirection="top: ".concat(40,"px")}))}},emits:["update:modelValue","clear","input","focus","blur","click","keypressEnter","keypress","setSuggestion"]},j=(n("6646"),n("6b0d")),h=n.n(j);const y=h()(O,[["render",g],["__scopeId","data-v-8e02895e"]]);t["a"]=y},2532:function(e,t,n){"use strict";var o=n("23e7"),c=n("e330"),r=n("5a34"),a=n("1d80"),i=n("577e"),u=n("ab13"),l=c("".indexOf);o({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~l(i(a(this)),i(r(e)),arguments.length>1?arguments[1]:void 0)}})},"30a8":function(e,t,n){"use strict";var o=n("7a23"),c=["disabled"];function r(e,t,n,r,a,i){return Object(o["u"])(),Object(o["f"])("button",{class:Object(o["p"])(["base-button",[{"base-button-filled":"filled"===n.type,"base-button-outlined":"outlined"===n.type,"base-button-link-button":"link-button"===n.type,"base-button-logout":"logout"===n.type,active:n.active}]]),disabled:n.disabled,onClick:t[0]||(t[0]=function(t){return e.$emit("clicked")})},[Object(o["B"])(e.$slots,"default",{},void 0,!0)],10,c)}var a={name:"BaseButton",props:{type:{type:String,required:!0,default:"filled"},disabled:{type:Boolean,default:!1},active:{type:Boolean},logout:{type:Boolean}},emits:["clicked"]},i=(n("c478"),n("6b0d")),u=n.n(i);const l=u()(a,[["render",r],["__scopeId","data-v-1261d932"]]);t["a"]=l},"44e7":function(e,t,n){var o=n("861d"),c=n("c6b6"),r=n("b622"),a=r("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==c(e))}},"59c3":function(e,t,n){},"5a34":function(e,t,n){var o=n("da84"),c=n("44e7"),r=o.TypeError;e.exports=function(e){if(c(e))throw r("The method doesn't accept regular expressions");return e}},"5cdd":function(e,t,n){"use strict";n("cd0b")},6646:function(e,t,n){"use strict";n("59c3")},"723b":function(e,t,n){},7280:function(e,t,n){"use strict";n("9b95")},7669:function(e,t,n){e.exports=n.p+"img/search-icon.9bfa9a59.svg"},"7db0":function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").find,r=n("44d2"),a="find",i=!0;a in[]&&Array(1)[a]((function(){i=!1})),o({target:"Array",proto:!0,forced:i},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r(a)},"841c":function(e,t,n){"use strict";var o=n("c65b"),c=n("d784"),r=n("825a"),a=n("1d80"),i=n("129f"),u=n("577e"),l=n("dc4a"),s=n("14c3");c("search",(function(e,t,n){return[function(t){var n=a(this),c=void 0==t?void 0:l(t,e);return c?o(c,t,n):new RegExp(t)[e](u(n))},function(e){var o=r(this),c=u(e),a=n(t,o,c);if(a.done)return a.value;var l=o.lastIndex;i(l,0)||(o.lastIndex=0);var d=s(o,c);return i(o.lastIndex,l)||(o.lastIndex=l),null===d?-1:d.index}]}))},"8dbe":function(e,t,n){e.exports=n.p+"img/tz.3a9a68e5.svg"},"9b95":function(e,t,n){},ab13:function(e,t,n){var o=n("b622"),c=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[c]=!1,"/./"[e](t)}catch(o){}}return!1}},ade3:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}))},b680:function(e,t,n){"use strict";var o=n("23e7"),c=n("da84"),r=n("e330"),a=n("5926"),i=n("408a"),u=n("1148"),l=n("d039"),s=c.RangeError,d=c.String,f=Math.floor,b=r(u),p=r("".slice),g=r(1..toFixed),O=function(e,t,n){return 0===t?n:t%2===1?O(e,t-1,n*e):O(e*e,t/2,n)},j=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},h=function(e,t,n){var o=-1,c=n;while(++o<6)c+=t*e[o],e[o]=c%1e7,c=f(c/1e7)},y=function(e,t){var n=6,o=0;while(--n>=0)o+=e[n],e[n]=f(o/t),o=o%t*1e7},m=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var o=d(e[t]);n=""===n?o:n+b("0",7-o.length)+o}return n},v=l((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!l((function(){g({})}));o({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,n,o,c,r=i(this),u=a(e),l=[0,0,0,0,0,0],f="",g="0";if(u<0||u>20)throw s("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return d(r);if(r<0&&(f="-",r=-r),r>1e-21)if(t=j(r*O(2,69,1))-69,n=t<0?r*O(2,-t,1):r/O(2,t,1),n*=4503599627370496,t=52-t,t>0){h(l,0,n),o=u;while(o>=7)h(l,1e7,0),o-=7;h(l,O(10,o,1),0),o=t-1;while(o>=23)y(l,1<<23),o-=23;y(l,1<<o),h(l,1,1),y(l,2),g=m(l)}else h(l,0,n),h(l,1<<-t,0),g=m(l)+b("0",u);return u>0?(c=g.length,g=f+(c<=u?"0."+b("0",u-c)+g:p(g,0,c-u)+"."+p(g,c-u))):g=f+g,g}})},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2"),n("d401");var o=n("06c5");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(o["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(u)throw a}}}}},be12:function(e,t,n){"use strict";n("99af");var o=n("7a23"),c={key:0},r={key:1,class:"selected ellipse"},a=["onClick"];function i(e,t,n,i,u,l){var s=Object(o["D"])("click-outside");return Object(o["N"])((Object(o["u"])(),Object(o["f"])("div",{class:Object(o["p"])(["base-select",{"base-select-border":n.borderOnly}]),ref:"select"},[Object(o["g"])("div",{class:Object(o["p"])(["base-select-selected",[{open:u.open,disabled:n.disabled},{"base-select-selected-border":n.borderOnly,active:n.modelValue&&""!==n.modelValue}]]),onClick:t[0]||(t[0]=function(){return l.openDropdown&&l.openDropdown.apply(l,arguments)})},[!n.modelValue||""==n.modelValue&&n.placeholder?(Object(o["u"])(),Object(o["f"])("span",c,Object(o["G"])(n.placeholder),1)):(Object(o["u"])(),Object(o["f"])("span",r,Object(o["G"])(l.selected&&l.selected.key),1))],2),!n.disabled&&u.open?(Object(o["u"])(),Object(o["f"])("div",{key:0,class:Object(o["p"])(["base-select-items",{"base-select-items-border":n.borderOnly}]),ref:"dropdown",style:Object(o["q"])(u.dropdownDirection)},[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.options,(function(t,c){return Object(o["u"])(),Object(o["f"])("div",{key:"".concat(t.value,"_").concat(c),class:Object(o["p"])({active:n.modelValue==t.value}),onClick:function(n){l.selected=t,u.open=!1,e.$emit("update:modelValue",t.value),e.$emit("change")}},Object(o["G"])(t.key),11,a)})),128))],6)):Object(o["e"])("",!0)],2)),[[s,l.closeDropdown]])}n("a9e3"),n("7db0"),n("d3b7");var u={props:{options:{type:Array,required:!0},label:{type:String,default:""},placeholder:{type:[Number,String],default:""},disabled:{type:Boolean},borderOnly:{type:Boolean},modelValue:{type:[String,Number]},yellowBg:{type:Boolean}},computed:{selected:function(){var e=this;return this.options.find((function(t){return t.value===e.modelValue}))||""}},data:function(){return{open:!1,dropdownDirection:null}},methods:{openDropdown:function(){var e=this;this.disabled||(this.open=!this.open),this.open&&setTimeout((function(){var t=e.$refs.select.getBoundingClientRect().top,n=e.$refs.dropdown.getBoundingClientRect().height;window.innerHeight-t<n+60?e.dropdownDirection="top: auto; bottom: ".concat(e.borderOnly?23:40,"px"):e.dropdownDirection="top: ".concat(e.borderOnly?23:40,"px")}))},closeDropdown:function(){this.open=!1}},emits:["update:modelValue","change"]},l=(n("09ca"),n("6b0d")),s=n.n(l);const d=s()(u,[["render",i],["__scopeId","data-v-6d419576"]]);t["a"]=d},c478:function(e,t,n){"use strict";n("f878")},caad:function(e,t,n){"use strict";var o=n("23e7"),c=n("4d64").includes,r=n("44d2");o({target:"Array",proto:!0},{includes:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},cd0b:function(e,t,n){},d784:function(e,t,n){"use strict";n("ac1f");var o=n("e330"),c=n("6eeb"),r=n("9263"),a=n("d039"),i=n("b622"),u=n("9112"),l=i("species"),s=RegExp.prototype;e.exports=function(e,t,n,d){var f=i(e),b=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=b&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!b||!p||n){var g=o(/./[f]),O=t(f,""[e],(function(e,t,n,c,a){var i=o(e),u=t.exec;return u===r||u===s.exec?b&&!a?{done:!0,value:g(t,n,c)}:{done:!0,value:i(n,t,c)}:{done:!1}}));c(String.prototype,e,O[0]),c(s,f,O[1])}d&&u(s[f],"sham",!0)}},da3f:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=n("1d60"),r=n.n(c),a=n("c8de"),i=n.n(a),u=function(e){return Object(o["x"])("data-v-012f0f8e"),e=e(),Object(o["v"])(),e},l={class:"offer"},s=u((function(){return Object(o["g"])("h1",{class:"offer__title page__title"},"Коммерческое предложение",-1)})),d={class:"offer-header__buttons"},f={class:"offer_create"},b=Object(o["i"])(" Создать "),p=u((function(){return Object(o["g"])("span",{class:"upp",style:{"margin-left":"2px"}}," кп",-1)})),g={class:"offer_copy"},O=Object(o["i"])(" Копировать "),j={class:"offer-search"},h={key:0,class:"offer-filters__button"},y={key:0,class:"offer-filters__count"},m=u((function(){return Object(o["g"])("img",{src:r.a,alt:"Filters"},null,-1)})),v={key:0,class:"offer-filters__close"},_={key:1,class:"offer-filters__title page__title"},k={class:"offer-filters_counterparty"},w={class:"offer-filters_region"},C={class:"offer-filters_customer"},x={class:"offer-filters_manager"},$={key:2,class:"offer-filters__apply page-buttons"},S={class:"offer-filters__apply-button"},T=Object(o["i"])(" Применить "),V={class:"offer-content page-wrapper"};function B(e,t,n,c,r,a){var u=Object(o["C"])("base-button"),B=Object(o["C"])("base-input"),I=Object(o["C"])("base-select"),N=Object(o["C"])("offers-table");return Object(o["u"])(),Object(o["f"])("section",l,[s,Object(o["g"])("div",{class:Object(o["p"])(["offer-header page-wrapper",{shadow:r.scrollStart}])},[Object(o["g"])("div",d,[Object(o["g"])("div",f,[Object(o["j"])(u,{type:"filled",onClicked:t[0]||(t[0]=function(t){return e.$router.push({name:"offerCreate"})})},{default:Object(o["M"])((function(){return[b,p]})),_:1})]),Object(o["g"])("div",g,[Object(o["j"])(u,{type:"outlined",onClicked:a.copy,disabled:!r.offerToCopy.length},{default:Object(o["M"])((function(){return[O]})),_:1},8,["onClicked","disabled"])])]),Object(o["g"])("div",j,[Object(o["j"])(B,{id:"offerSearch",placeholder:e.$isMobile?"Поиск":"Поиск по номеру КП, конечному заказчику, региону, контрагенту",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:r.suggestions,onSetSuggestion:a.getOffers,onKeypressEnter:a.getOffers,onClear:t[1]||(t[1]=function(e){return r.query="",a.getOffers()}),onInput:t[2]||(t[2]=function(e){return a.getOffers("search")}),modelValue:r.query,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])]),e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",h,[r.counterparty||r.region||r.customer||r.manager?(Object(o["u"])(),Object(o["f"])("div",y," 3 ")):Object(o["e"])("",!0),Object(o["j"])(u,{type:"outlined",onClick:t[4]||(t[4]=function(t){return e.open=!0})},{default:Object(o["M"])((function(){return[m]})),_:1})])):Object(o["e"])("",!0)],2),!e.$isMobile||e.$isMobile&&e.open?(Object(o["u"])(),Object(o["f"])("div",{key:0,class:Object(o["p"])(["offer-filters page-wrapper",{open:e.showContent}])},[e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",v,[Object(o["g"])("img",{src:i.a,alt:"Close",onClick:t[5]||(t[5]=function(){return e.closeDropdown&&e.closeDropdown.apply(e,arguments)})})])):Object(o["e"])("",!0),e.$isMobile?(Object(o["u"])(),Object(o["f"])("h4",_,"Фильтры")):Object(o["e"])("",!0),Object(o["g"])("div",k,[Object(o["j"])(B,{id:"offerSearch",placeholder:"Контрагент",search:!0,suggestions:r.conterparties,onInput:t[6]||(t[6]=function(e){return a.getOffers("search")}),onKeypressEnter:a.getOffers,onSetSuggestion:t[7]||(t[7]=function(t){return a.getOffers(e.s)}),modelValue:r.counterparty,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.counterparty=e})},null,8,["suggestions","onKeypressEnter","modelValue"])]),Object(o["g"])("div",w,[Object(o["j"])(I,{options:r.regions,placeholder:"Регион",modelValue:r.region,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.region=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["g"])("div",C,[Object(o["j"])(I,{options:r.customers,placeholder:"Конечный заказчик",modelValue:r.customer,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.customer=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["g"])("div",x,[Object(o["j"])(I,{options:r.managers,placeholder:"Менеджер",modelValue:r.manager,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.manager=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",$,[Object(o["g"])("div",S,[Object(o["j"])(u,{type:"filled",onClick:e.closeDropdown},{default:Object(o["M"])((function(){return[T]})),_:1},8,["onClick"])])])):Object(o["e"])("",!0)],2)):Object(o["e"])("",!0),Object(o["g"])("div",V,[Object(o["j"])(N,{offers:r.offers,onCopy:t[12]||(t[12]=function(e){r.offerToCopy=e}),onScroll:t[13]||(t[13]=function(e){r.scrollStart=e>0}),onScrolled:t[14]||(t[14]=function(){})},null,8,["offers"])])])}var I=n("ade3"),N=n("b85c"),q=(n("7db0"),n("d3b7"),n("b0c0"),n("45fc"),n("30a8")),G=n("2141"),D=n("be12"),E=n("304d"),M=(n("caad"),n("2532"),n("1aea")),R=n.n(M),U=n("0e34"),A=n.n(U),F=n("209a"),L=n.n(F),J=n("8dbe"),P=n.n(J),W=function(e){return Object(o["x"])("data-v-0ac99120"),e=e(),Object(o["v"])(),e},z={key:0,class:"offer-table"},K=W((function(){return Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th"),Object(o["g"])("th",null,"Номер"),Object(o["g"])("th",null,"Дата создания"),Object(o["g"])("th",null,"Стоимость"),Object(o["g"])("th",null,"Контрагент"),Object(o["g"])("th",null,"Скидка"),Object(o["g"])("th",null,"Регион"),Object(o["g"])("th",null,"Файлы")])],-1)})),H={key:0,ref:"table"},Q={class:"no-wrap"},X={class:"base-check"},Y=["id","name","value","disabled"],Z=["for"],ee=["onClick"],te={class:"tooltip"},ne=["onClick"],oe={class:"tooltip"},ce=["onClick"],re={class:"tooltip"},ae=["onClick"],ie={class:"tooltip"},ue=["onClick"],le={class:"tooltip"},se=["onClick"],de={class:"tooltip"},fe={class:"no-wrap"},be={class:"offer-actions"},pe=["href"],ge=W((function(){return Object(o["g"])("img",{src:R.a,alt:"PDF",width:"29",height:"27"},null,-1)})),Oe=[ge],je=["href"],he=W((function(){return Object(o["g"])("img",{src:A.a,alt:"Excel",width:"29",height:"27"},null,-1)})),ye=[he],me=["href"],ve=W((function(){return Object(o["g"])("img",{src:L.a,alt:"Ru",width:"22",height:"27"},null,-1)})),_e=[ve],ke={class:"offer-action _tz"},we=W((function(){return Object(o["g"])("img",{src:P.a,alt:"Tz",width:"22",height:"27"},null,-1)})),Ce={class:"offer-action-dropdown"},xe={class:"offer-action-dropdown-content"},$e={class:"base-check radio"},Se=["value"],Te=W((function(){return Object(o["g"])("label",{for:"ktru",class:"upp"}," ктру ",-1)})),Ve={class:"base-check radio"},Be=["value"],Ie=W((function(){return Object(o["g"])("label",{for:"tu",class:"upp"}," ту ",-1)})),Ne={class:"base-check radio"},qe=["value"],Ge=W((function(){return Object(o["g"])("label",{for:"ktrus"},[Object(o["g"])("span",{class:"upp"},"ктру"),Object(o["i"])(" сокр. ")],-1)})),De=["href"],Ee={key:1,class:"offer-table-mobile table-mobile",ref:"table"},Me={class:"offer-table-mobile-checkbox"},Re={class:"base-check"},Ue=["id","name","value","disabled"],Ae=["for"],Fe={class:"table-mobile-row"},Le=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Номер ",-1)})),Je={class:"table-mobile__value"},Pe={class:"table-mobile-row"},We=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Дата созд. ",-1)})),ze={class:"table-mobile__value"},Ke={class:"table-mobile-row"},He=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Стоимость ",-1)})),Qe={class:"table-mobile__value"},Xe={class:"table-mobile-row"},Ye=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Контрагент ",-1)})),Ze={class:"table-mobile__value"},et={class:"table-mobile-row"},tt=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),nt={class:"table-mobile__value"},ot={class:"table-mobile-row"},ct=W((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Регион ",-1)})),rt={class:"table-mobile__value"},at={class:"offer-actions"},it=Object(o["h"])('<a class="offer-action _pdf" data-v-0ac99120><img src="'+R.a+'" alt="PDF" data-v-0ac99120></a><a class="offer-action _excel" data-v-0ac99120><img src="'+A.a+'" alt="Excel" data-v-0ac99120></a><a class="offer-action _ru" data-v-0ac99120><img src="'+L.a+'" alt="Ru" data-v-0ac99120></a>',3),ut={class:"offer-action _tz"},lt=W((function(){return Object(o["g"])("img",{src:P.a,alt:"Tz"},null,-1)})),st={class:"offer-action-dropdown"},dt={class:"offer-action-dropdown-content"},ft={class:"base-check radio"},bt=["value"],pt=W((function(){return Object(o["g"])("label",{for:"ktru",class:"upp"}," ктру ",-1)})),gt={class:"base-check radio"},Ot=["value"],jt=W((function(){return Object(o["g"])("label",{for:"tu",class:"upp"}," ту ",-1)})),ht={class:"base-check radio"},yt=["value"],mt=W((function(){return Object(o["g"])("label",{for:"ktrus"},[Object(o["g"])("span",{class:"upp"},"ктру"),Object(o["i"])(" сокр. ")],-1)})),vt=W((function(){return Object(o["g"])("a",{href:"#",class:"offer-action__button"}," Скачать ",-1)})),_t={key:2,class:"offer-content-notFound content-notFound"};function kt(e,t,n,c,r,a){var i=Object(o["D"])("tooltip");return Object(o["u"])(),Object(o["f"])(o["a"],null,[e.$isMobile?n.offers.length&&e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",Ee,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.offers,(function(e,n){return Object(o["u"])(),Object(o["f"])("div",{class:"table-mobile-column",key:n},[Object(o["g"])("div",Me,[Object(o["g"])("div",Re,[Object(o["N"])(Object(o["g"])("input",{type:"checkbox",id:e.id,name:e.id,value:e.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(e.id),"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.offerToCopy=e})},null,8,Ue),[[o["I"],r.offerToCopy]]),Object(o["g"])("label",{for:e.id},null,8,Ae)])]),Object(o["g"])("div",Fe,[Le,Object(o["g"])("span",Je,Object(o["G"])(e.id),1)]),Object(o["g"])("div",Pe,[We,Object(o["g"])("span",ze,Object(o["G"])(e.created_at),1)]),Object(o["g"])("div",Ke,[He,Object(o["g"])("span",Qe,Object(o["G"])(e.total_cost)+" ₽ ",1)]),Object(o["g"])("div",Xe,[Ye,Object(o["g"])("span",Ze,Object(o["G"])(e.counterparty.name),1)]),Object(o["g"])("div",et,[tt,Object(o["g"])("span",nt,Object(o["G"])(e.counterparty.discount)+"% ",1)]),Object(o["g"])("div",ot,[ct,Object(o["g"])("span",rt,Object(o["G"])(e.end_customer&&e.end_customer.region),1)]),Object(o["g"])("div",at,[it,Object(o["g"])("div",ut,[lt,Object(o["g"])("div",st,[Object(o["g"])("div",dt,[Object(o["g"])("div",ft,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"ktru",value:e.krtu_file,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.downloadType=e})},null,8,bt),[[o["J"],r.downloadType]]),pt]),Object(o["g"])("div",gt,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"tu",value:e.krtu_avg_file,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.downloadType=e})},null,8,Ot),[[o["J"],r.downloadType]]),jt]),Object(o["g"])("div",ht,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"ktrus",value:e.krtu_gost_file,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.downloadType=e})},null,8,yt),[[o["J"],r.downloadType]]),mt]),vt])])])])])})),128))],512)):Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("table",z,[K,n.offers.length?(Object(o["u"])(),Object(o["f"])("tbody",H,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.offers,(function(n){return Object(o["u"])(),Object(o["f"])("tr",{key:n.id},[Object(o["g"])("td",Q,[Object(o["g"])("div",X,[Object(o["N"])(Object(o["g"])("input",{type:"checkbox",id:n.id,name:n.id,value:n.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(n.id),"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.offerToCopy=e})},null,8,Y),[[o["I"],r.offerToCopy]]),Object(o["g"])("label",{for:n.id},null,8,Z)])]),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.id),1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",te,[Object(o["i"])(Object(o["G"])(n.id),1)])),[[i]])],8,ee),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.created_at),1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",oe,[Object(o["i"])(Object(o["G"])(n.created_at),1)])),[[i]])],8,ne),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.total_cost)+" ₽ ",1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",re,[Object(o["i"])(Object(o["G"])(n.total_cost)+" ₽ ",1)])),[[i]])],8,ce),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.counterparty.name),1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",ie,[Object(o["i"])(Object(o["G"])(n.counterparty.name),1)])),[[i]])],8,ae),Object(o["g"])("td",{class:"no-wrap",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.counterparty.discount)+"% ",1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",le,[Object(o["i"])(Object(o["G"])(n.counterparty.discount)+"% ",1)])),[[i]])],8,ue),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["G"])(n.end_customer&&n.end_customer.region),1),Object(o["N"])((Object(o["u"])(),Object(o["f"])("span",de,[Object(o["i"])(Object(o["G"])(n.end_customer&&n.end_customer.region),1)])),[[i]])],8,se),Object(o["g"])("td",fe,[Object(o["g"])("div",be,[Object(o["g"])("a",{href:n.kp_pdf_file,class:"offer-action _pdf"},Oe,8,pe),Object(o["g"])("a",{href:n.kp_exel_file,class:"offer-action _excel"},ye,8,je),Object(o["g"])("a",{href:n.ru_file,class:"offer-action _ru"},_e,8,me),Object(o["g"])("div",ke,[we,Object(o["g"])("div",Ce,[Object(o["g"])("div",xe,[Object(o["g"])("div",$e,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"ktru",value:n.krtu_file,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.downloadType=e})},null,8,Se),[[o["J"],r.downloadType]]),Te]),Object(o["g"])("div",Ve,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"tu",value:n.krtu_avg_file,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.downloadType=e})},null,8,Be),[[o["J"],r.downloadType]]),Ie]),Object(o["g"])("div",Ne,[Object(o["N"])(Object(o["g"])("input",{type:"radio",id:"ktrus",value:n.krtu_gost_file,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.downloadType=e})},null,8,qe),[[o["J"],r.downloadType]]),Ge]),Object(o["g"])("a",{href:r.downloadType,class:"offer-action__button"}," Скачать ",8,De)])])])])])])})),128))],512)):Object(o["e"])("",!0)])),n.offers.length?Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("span",_t," Ничего не найдено "))],64)}n("b680");var wt={name:"OfferTable",props:{offers:{type:Array}},data:function(){return{offerToCopy:[],downloadType:""}},methods:{onScroll:function(e){var t=e.getBoundingClientRect().height,n=e.scrollHeight,o=e.scrollTop;this.$emit("scroll",o),Math.ceil(o+t)==n.toFixed(0)&&this.$emit("scrolled")}},mounted:function(){var e=this,t=this.$refs.table;t&&t.addEventListener("scroll",(function(){e.onScroll(t)}))},watch:{offerToCopy:function(){this.$emit("copy",this.offerToCopy)}},emits:["download","scroll","scrolled","copy"]},Ct=(n("5cdd"),n("6b0d")),xt=n.n(Ct);const $t=xt()(wt,[["render",kt],["__scopeId","data-v-0ac99120"]]);var St=$t,Tt={components:{BaseButton:q["a"],BaseInput:G["a"],BaseSelect:D["a"],OffersTable:St},data:function(){return{query:"",counterparty:"",region:"",customer:"",manager:"",scrollStart:!1,offerToCopy:[],regions:[{key:"Не Выбран",value:""}],offers:[],conterparties:[],suggestions:[],customers:[{key:"Не Выбран",value:""}],managers:[]}},mounted:function(){this.getOffers(),this.getRegions()},methods:{copy:function(){var e=this,t=this.offers.find((function(t){return t.id==e.offerToCopy[0]})),n=[];if(t.offer_products.length){var o,c=Object(N["a"])(t.offer_products);try{for(c.s();!(o=c.n()).done;){var r=o.value;n.push({product:r.product,price:r.price,discount:r.discount,count:r.count,cost:r.cost})}}catch(i){c.e(i)}finally{c.f()}}var a={counterparty:t.counterparty&&t.counterparty.id||null,end_customer:t.end_customer&&t.end_customer.id||null,company:t.company&&t.company.id||null,offer_products:n||null,tech_docs_format:t.tech_docs_format};this.$api.post("".concat("https://51.250.6.131/api/v1","/offer"),a).then((function(t){e.$router.push({name:"offerCreate",query:{id:t.data.id}})}))},getOffers:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(e={},Object(I["a"])(e,this.query&&"search",this.query),Object(I["a"])(e,this.counterparty&&"counterparty",this.counterparty),Object(I["a"])(e,this.customer&&"end_customer",this.customer),Object(I["a"])(e,this.region&&"end_customer__region",this.region),e);this.conterparties=[],this.suggestions=[],this.customers=[{key:"Не Выбран",value:""}],this.$api.get("".concat("https://51.250.6.131/api/v1","/offer"),{params:o}).then((function(e){console.log(e.data.results),"search"!==n&&(t.offers=[]);var o,c=Object(N["a"])(e.data.results);try{var r=function(){var e=o.value;"search"!==n&&t.offers.push(e),"search"==n&&t.query&&t.suggestions.push({key:e.id,value:e.id});var c={key:e.end_customer?e.end_customer.name:"",value:e.end_customer?e.end_customer.id:""};!t.customers.some((function(e){return e.value===c.value}))&&c.key&&t.customers.push(c);var r={key:e.counterparty.name,value:e.counterparty.id};!t.conterparties.some((function(e){return e.value===r.value}))&&r.key&&t.counterparty&&t.conterparties.push(r)};for(c.s();!(o=c.n()).done;)r()}catch(a){c.e(a)}finally{c.f()}})).catch((function(e){return console.log(e)}))},getRegions:function(){var e=this;this.$api.get("".concat("https://51.250.6.131/api/v1","/regions")).then((function(t){var n,o=Object(N["a"])(t.data);try{var c=function(){var t=n.value,o={key:t.region,value:t.region};!e.regions.some((function(e){return e.key==o.key}))&&e.regions.push(o)};for(o.s();!(n=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}))}},mixins:[E["a"]]};n("7280");const Vt=xt()(Tt,[["render",B],["__scopeId","data-v-012f0f8e"]]);t["default"]=Vt},f878:function(e,t,n){}}]);
//# sourceMappingURL=offers.46e1b950.js.map