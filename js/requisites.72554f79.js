(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["requisites"],{"07ac":function(e,t,a){var n=a("23e7"),s=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return s(e)}})},1298:function(e,t,a){e.exports=a.p+"img/image-remove-icon.d1078b4c.svg"},1434:function(e,t,a){},"1c1c":function(e,t,a){},"26ad":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("d3b7");var n=a("7a23"),s=a("1298"),i=a.n(s),c=function(e){return Object(n["A"])("data-v-d9a54652"),e=e(),Object(n["y"])(),e},r={class:"requisites"},o=c((function(){return Object(n["i"])("h1",{class:"requisites__title page__title"},"Реквизиты компании",-1)})),l={key:0,class:"requisites-content page-wrapper"},u={class:"requisites-fields"},d={class:"requisites-fields-row fields-row"},b={class:"requisites-fields-row fields-row _inn"},j={class:"requisites-fields-row fields-row"},O={class:"requisites-fields-row fields-row"},p={class:"requisites-fields-row fields-row"},m={class:"requisites-fields-row fields-row _index"},f={class:"requisites-fields-row fields-row"},h={class:"requisites-fields-row fields-row _email"},_={class:"requisites-fields-row fields-row"},g={class:"requisites-fields-row fields-row _position"},y={class:"requisites-file _logo"},v=c((function(){return Object(n["i"])("span",{class:"requisites-file__title"},"Логотип",-1)})),k={for:"requisitesLogo"},q={key:1,class:"requisites-file-loaded"},w=c((function(){return Object(n["i"])("img",{src:i.a,alt:"Remove"},null,-1)})),x=[w],C=["src"],V={class:"requisites-file"},J=c((function(){return Object(n["i"])("span",{class:"requisites-file__title"},"Оттиск печати",-1)})),$={for:"requisitesBlankPhoto"},I={key:1,class:"requisites-file-loaded"},E=c((function(){return Object(n["i"])("img",{src:i.a,alt:"Remove"},null,-1)})),M=[E],U=["src"],A={key:1,class:"requisites-buttons page-buttons _save"},P={class:"requisites__send _save__button"},Q=Object(n["j"])(" Сохранить "),F={class:"requisites-search page-wrapper"},S={class:"requisites-search-field"},D={key:2,class:"page-wrapper"};function L(e,t,a,s,i,c){var w=Object(n["F"])("base-input"),E=Object(n["F"])("base-button"),L=Object(n["F"])("company-requisites-table"),T=Object(n["F"])("base-modal");return Object(n["x"])(),Object(n["h"])(n["b"],null,[Object(n["i"])("section",r,[o,c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group?(Object(n["x"])(),Object(n["h"])("div",l,[Object(n["i"])("div",u,[Object(n["i"])("div",d,[Object(n["k"])(w,{id:"requisitesCompany",label:"Компания",required:!0,modelValue:i.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.data.name=e})},null,8,["modelValue"])]),Object(n["i"])("div",b,[Object(n["k"])(w,{id:"requisitesInn",label:"ИНН",type:"number",message:i.message,onInput:t[1]||(t[1]=function(e){return i.message=""}),required:!0,modelValue:i.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.data.inn=e})},null,8,["message","modelValue"])]),Object(n["i"])("div",j,[Object(n["k"])(w,{id:"requisitesAddress",label:"Адрес",required:!0,modelValue:i.data.address_street,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.data.address_street=e})},null,8,["modelValue"])]),Object(n["i"])("div",O,[Object(n["k"])(w,{id:"requisitesCity",label:"Город",modelValue:i.data.address_city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.data.address_city=e})},null,8,["modelValue"])]),Object(n["i"])("div",p,[Object(n["k"])(w,{id:"requisitesCountry",label:"Страна",required:!0,modelValue:i.data.address_country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.data.address_country=e})},null,8,["modelValue"])]),Object(n["i"])("div",m,[Object(n["k"])(w,{id:"requisitesIndex",label:"Индекс",type:"number",short:!0,required:!0,modelValue:i.data.address_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.data.address_index=e})},null,8,["modelValue"])]),Object(n["i"])("div",f,[Object(n["k"])(w,{label:"Телефон",type:"number",id:"settingsPhone",maxLength:18,required:!0,modelValue:i.data.phone_number,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.data.phone_number=e})},null,8,["modelValue"])]),Object(n["i"])("div",h,[Object(n["k"])(w,{id:"requisitesEmail",type:"email",label:"Электронная почта",required:!0,modelValue:i.data.email,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.data.email=e})},null,8,["modelValue"])]),Object(n["i"])("div",_,[Object(n["k"])(w,{id:"requisitesBio",label:"ФИО",modelValue:i.data.director_full_name,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.data.director_full_name=e})},null,8,["modelValue"])]),Object(n["i"])("div",g,[Object(n["k"])(w,{id:"requisitesPosition",label:"Должность",required:!0,modelValue:i.data.director_position,"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.data.director_position=e})},null,8,["modelValue"])]),Object(n["i"])("div",y,[v,i.data.logo?(Object(n["x"])(),Object(n["h"])("div",q,[Object(n["i"])("div",{class:"requisites-file-loaded__close",onClick:t[14]||(t[14]=function(e){return i.data.logo=null})},x),Object(n["i"])("img",{src:i.data.logo,alt:"Logo"},null,8,C)])):(Object(n["x"])(),Object(n["h"])("div",{key:0,class:"requisites-file-field",onDragover:t[12]||(t[12]=Object(n["S"])((function(){}),["prevent"])),onDrop:t[13]||(t[13]=function(e){return c.drop("logo","requisitesLogo")})},[Object(n["i"])("label",k,[Object(n["j"])(Object(n["J"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(n["i"])("span",null,Object(n["J"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(n["j"])(" "+Object(n["J"])(e.$isMobile?"":"файл")+" ",1),Object(n["i"])("input",{type:"file",id:"requisitesLogo",ref:"requisitesLogo",multiple:"",onChange:t[11]||(t[11]=function(e){return c.uploadImage("logo","requisitesLogo")}),accept:".jpg,.jpeg,.png"},null,544)])],32))]),Object(n["i"])("div",V,[J,i.data.blank_photo?(Object(n["x"])(),Object(n["h"])("div",I,[Object(n["i"])("div",{class:"requisites-file-loaded__close",onClick:t[18]||(t[18]=function(e){return i.data.blank_photo=null})},M),Object(n["i"])("img",{src:i.data.blank_photo,alt:"BlankPhoto"},null,8,U)])):(Object(n["x"])(),Object(n["h"])("div",{key:0,class:"requisites-file-field",onDragover:t[16]||(t[16]=Object(n["S"])((function(){}),["prevent"])),onDrop:t[17]||(t[17]=Object(n["S"])((function(e){return c.drop("blank_photo","requisitesBlankPhoto")}),["prevent"]))},[Object(n["i"])("label",$,[Object(n["j"])(Object(n["J"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(n["i"])("span",null,Object(n["J"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(n["j"])(" "+Object(n["J"])(e.$isMobile?"":"файл")+" ",1),Object(n["i"])("input",{type:"file",id:"requisitesBlankPhoto",ref:"requisitesBlankPhoto",multiple:"",onChange:t[15]||(t[15]=function(e){return c.uploadImage("blank_photo","requisitesBlankPhoto")}),accept:".pdf,.jpg,.jpeg,.png"},null,544)])],32))])])])):Object(n["g"])("",!0),c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group?(Object(n["x"])(),Object(n["h"])("div",A,[Object(n["i"])("div",P,[Object(n["k"])(E,{type:"filled",onClick:c.addCompany},{default:Object(n["P"])((function(){return[Q]})),_:1},8,["onClick"])])])):Object(n["g"])("",!0),Object(n["i"])("div",F,[Object(n["i"])("div",S,[Object(n["k"])(w,{id:"requisitesSearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:i.suggestions,onSetSuggestion:t[19]||(t[19]=function(e){return c.getCompanies("",e)}),onKeypressEnter:t[20]||(t[20]=function(e){return c.getCompanies("")}),onClear:t[21]||(t[21]=function(e){return i.query="",i.suggestions=[],c.getCompanies()}),onInput:t[22]||(t[22]=function(e){return c.getCompanies("search")}),modelValue:i.query,"onUpdate:modelValue":t[23]||(t[23]=function(e){return i.query=e})},null,8,["placeholder","suggestions","modelValue"])])]),i.edit?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("div",D,[Object(n["k"])(L,{companies:i.companies,onEdit:c.editCompany},null,8,["companies","onEdit"])]))]),Object(n["k"])(T,{open:i.openModal,text:"Отправлено",onClose:t[24]||(t[24]=function(e){return i.openModal=!1})},null,8,["open"])],64)}var T=a("3835"),B=a("b85c"),R=a("ade3"),W=(a("d9e2"),a("d401"),a("99af"),a("c740"),a("4fadc"),a("caad"),a("2532"),a("7db0"),a("213a")),K=function(e){return Object(n["A"])("data-v-0f55c47c"),e=e(),Object(n["y"])(),e},G={key:0,class:"requisites-table"},Y=K((function(){return Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"Компания"),Object(n["i"])("th",{class:"upp"},"Инн"),Object(n["i"])("th",null,"Адрес"),Object(n["i"])("th",null,"Телефон"),Object(n["i"])("th",null,"Эл. почта")])],-1)})),Z={key:0},z=["onClick"],H={class:"tooltip"},N={class:"tooltip"},X={class:"tooltip"},ee={class:"tooltip"},te={class:"tooltip"},ae={key:1,class:"requisites-table-mobile table-mobile",ref:"table"},ne=["onClick"],se={class:"table-mobile-row"},ie=K((function(){return Object(n["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Компания ",-1)})),ce={class:"table-mobile__value"},re={class:"table-mobile-row"},oe=K((function(){return Object(n["i"])("span",{class:"table-mobile__title requisites-table-mobile__title upp"}," Инн ",-1)})),le={class:"table-mobile__value"},ue={class:"table-mobile-row"},de=K((function(){return Object(n["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Адрес ",-1)})),be={class:"table-mobile__value"},je={class:"table-mobile-row"},Oe=K((function(){return Object(n["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Телефон ",-1)})),pe={class:"table-mobile__value"},me={class:"table-mobile-row"},fe=K((function(){return Object(n["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Эл. почта ",-1)})),he={class:"table-mobile__value"};function _e(e,t,a,s,i,c){var r=Object(n["G"])("tooltip");return e.$isMobile?a.companies.length&&e.$isMobile?(Object(n["x"])(),Object(n["h"])("div",ae,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.companies,(function(t){return Object(n["x"])(),Object(n["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(a){return c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[Object(n["i"])("div",se,[ie,Object(n["i"])("span",ce,Object(n["J"])(t.name),1)]),Object(n["i"])("div",re,[oe,Object(n["i"])("span",le,Object(n["J"])(t.inn),1)]),Object(n["i"])("div",ue,[de,Object(n["i"])("span",be,Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1)]),Object(n["i"])("div",je,[Oe,Object(n["i"])("span",pe,Object(n["J"])(t.phone_number),1)]),Object(n["i"])("div",me,[fe,Object(n["i"])("span",he,Object(n["J"])(t.email),1)])],8,ne)})),128))],512)):Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("table",G,[Y,a.companies.length?(Object(n["x"])(),Object(n["h"])("tbody",Z,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.companies,(function(t){return Object(n["x"])(),Object(n["h"])("tr",{key:t.id,onClick:function(a){return c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.name),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",H,[Object(n["j"])(Object(n["J"])(t.name),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.inn),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",N,[Object(n["j"])(Object(n["J"])(t.inn),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",X,[Object(n["j"])(Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null," +"+Object(n["J"])(t.phone_number),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",ee,[Object(n["j"])(" +"+Object(n["J"])(t.phone_number),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.email),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",te,[Object(n["j"])(Object(n["J"])(t.email),1)])),[[r]])])],8,z)})),128))])):Object(n["g"])("",!0)]))}var ge={name:"CompanyRequisitesTable",props:{companies:{type:Array}},computed:{user:function(){return this.$store.getters.user}}},ye=(a("78db"),a("d959")),ve=a.n(ye);const ke=ve()(ge,[["render",_e],["__scopeId","data-v-0f55c47c"]]);var qe=ke,we={name:"CompanyRequisites",components:{CompanyRequisitesTable:qe},computed:{user:function(){return this.$store.getters.user}},data:function(){return{data:{name:"",inn:null,address_street:"",address_city:"",address_country:"",address_index:null,phone_number:null,email:"",director_full_name:"",director_position:"",logo:null,blank_photo:null},message:"",query:"",openModal:!1,edit:!1,id:"",companies:[],suggestions:[]}},setup:function(){Object(W["b"])({title:"Реквизиты компании"})},mounted:function(){this.getCompanies()},methods:{getCompanies:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!t&&this.$store.dispatch("loading",!0);var n=Object(R["a"])({},this.query&&"search","search"===t?this.query:a);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/company"),{params:n}).then((function(a){"search"!==t&&(e.companies=[]);var n,s=Object(B["a"])(a.data.results);try{for(s.s();!(n=s.n()).done;){var i=n.value;"search"!==t&&e.companies.push(i),"search"==t&&e.query&&e.suggestions.push({key:i.name,value:i.id})}}catch(c){s.e(c)}finally{s.f()}e.$store.dispatch("loading",!1)}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)}))},addCompany:function(){var e=this;this.$store.dispatch("loading",!0);var t={"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW"};this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/company/").concat(this.id),this.data,{headers:t}).then((function(t){var a=e.companies.findIndex((function(e){return e.id==t.data.id}));e.companies[a]=t.data;for(var n=0,s=Object.entries(e.data);n<s.length;n++){var i=Object(T["a"])(s[n],1),c=i[0];e.data[c]=""}e.$store.dispatch("loading",!1),e.edit=!1,e.openModal=!0,e.message=""}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)})):(console.log(this.data),this.$api.post("".concat(this.$api.defaults.API,"/company"),this.data,{headers:t}).then((function(t){e.companies.push(t.data);for(var a=0,n=Object.entries(e.data);a<n.length;a++){var s=Object(T["a"])(n[a],1),i=s[0];e.data[i]=""}e.$store.dispatch("loading",!1),e.openModal=!0,e.message=""}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1),t.response.data.inn&&t.response.data.inn.includes("already exists")&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},uploadImage:function(e,t){var a=this,n=this.$refs[t].files[0],s=new FileReader;s.readAsDataURL(n),s.onload=function(){a.data[e]=s.result}},drop:function(e,t){var a=window.event;a.preventDefault(),this.$refs[t].files=a.dataTransfer.files,this.uploadImage(e,t)},editCompany:function(e){var t=this.companies.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var a=0,n=Object.entries(t);a<n.length;a++){var s=Object(T["a"])(n[a],1),i=s[0];this.data[i]=t[i]}}}};a("ca73");const xe=ve()(we,[["render",L],["__scopeId","data-v-d9a54652"]]);t["default"]=xe},"2cea":function(e,t,a){"use strict";a("1434")},4032:function(e,t,a){},"47d6":function(e,t,a){"use strict";a("894d")},"4fadc":function(e,t,a){var n=a("23e7"),s=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return s(e)}})},"6f13":function(e,t,a){},"6f53":function(e,t,a){var n=a("83ab"),s=a("e330"),i=a("df75"),c=a("fc6a"),r=a("d1e7").f,o=s(r),l=s([].push),u=function(e){return function(t){var a,s=c(t),r=i(s),u=r.length,d=0,b=[];while(u>d)a=r[d++],n&&!o(s,a)||l(b,e?[a,s[a]]:s[a]);return b}};e.exports={entries:u(!0),values:u(!1)}},"78db":function(e,t,a){"use strict";a("1c1c")},"7db0":function(e,t,a){"use strict";var n=a("23e7"),s=a("b727").find,i=a("44d2"),c="find",r=!0;c in[]&&Array(1)[c]((function(){r=!1})),n({target:"Array",proto:!0,forced:r},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},"894d":function(e,t,a){},ae34:function(e,t,a){"use strict";a("f80f")},ca73:function(e,t,a){"use strict";a("6f13")},ed05:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),s=function(e){return Object(n["A"])("data-v-32a10ad6"),e=e(),Object(n["y"])(),e},i={class:"end-customer"},c=s((function(){return Object(n["i"])("h1",{class:"end-customer__title page__title"},"Конечный заказчик",-1)})),r={key:0,class:"end-customer-content page-wrapper"},o={class:"end-customer-fields"},l={class:"end-customer-fields-row fields-row"},u={class:"end-customer-fields-row fields-row _inn"},d={class:"end-customer-fields-row fields-row"},b={class:"end-customer-fields-row fields-row _city"},j={class:"end-customer-fields-row fields-row _bio"},O={key:1,class:"end-customer-buttons page-buttons _save"},p={class:"end-customer-buttons__send _save__button"},m=Object(n["j"])("Сохранить"),f={class:"end-customer-search page-wrapper"},h={class:"end-customer-search-field"},_={key:2,class:"page-wrapper"},g=Object(n["j"])(" > ");function y(e,t,a,s,y,v){var k=Object(n["F"])("base-input"),q=Object(n["F"])("base-button"),w=Object(n["F"])("end-customer-table"),x=Object(n["F"])("base-modal");return Object(n["x"])(),Object(n["h"])(n["b"],null,[Object(n["i"])("section",i,[c,v.user&&"manager"!==v.user.access_group&&"director"!==v.user.access_group?(Object(n["x"])(),Object(n["h"])("div",r,[Object(n["i"])("div",o,[Object(n["i"])("div",l,[Object(n["k"])(k,{id:"end-customer-customer",label:"Конечный заказчик",required:!0,modelValue:y.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return y.data.name=e})},null,8,["modelValue"])]),Object(n["i"])("div",u,[Object(n["k"])(k,{label:"ИНН",id:"end-customer-inn",type:"number",message:y.message,onInput:t[1]||(t[1]=function(e){return y.message=""}),required:!0,modelValue:y.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return y.data.inn=e})},null,8,["message","modelValue"])]),Object(n["i"])("div",d,[Object(n["k"])(k,{label:"Регион",id:"end-customer-region",required:!0,modelValue:y.data.region,"onUpdate:modelValue":t[3]||(t[3]=function(e){return y.data.region=e})},null,8,["modelValue"])]),Object(n["i"])("div",b,[Object(n["k"])(k,{label:"Город",id:"end-customer-city",required:!0,modelValue:y.data.city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return y.data.city=e})},null,8,["modelValue"])]),Object(n["i"])("div",j,[Object(n["k"])(k,{label:"ФИО заведующего эндоскопии",id:"end-customer",placeholder:"Если есть",labelStyle:{transform:"translateY(10px)"},required:!0,modelValue:y.data.head_of_endoscopy_full_name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return y.data.head_of_endoscopy_full_name=e})},null,8,["labelStyle","modelValue"])])])])):Object(n["g"])("",!0),v.user&&"manager"!==v.user.access_group&&"director"!==v.user.access_group?(Object(n["x"])(),Object(n["h"])("div",O,[Object(n["i"])("div",p,[Object(n["k"])(q,{type:"filled",onClicked:v.addEndCustomer},{default:Object(n["P"])((function(){return[m]})),_:1},8,["onClicked"])])])):Object(n["g"])("",!0),Object(n["i"])("div",f,[Object(n["i"])("div",h,[Object(n["k"])(k,{id:"endCustomerSearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:y.suggestions,onSetSuggestion:t[6]||(t[6]=function(e){return v.getEndCustomers("",e)}),onKeypressEnter:t[7]||(t[7]=function(e){return v.getEndCustomers("")}),onClear:t[8]||(t[8]=function(e){return y.query="",y.suggestions=[],v.getEndCustomers()}),onInput:t[9]||(t[9]=function(e){return v.getEndCustomers("search")}),modelValue:y.query,"onUpdate:modelValue":t[10]||(t[10]=function(e){return y.query=e})},null,8,["placeholder","suggestions","modelValue"])])]),y.edit?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("div",_,[g,Object(n["k"])(w,{endCustomers:y.endCustomers,onEdit:v.editEndCustomer},null,8,["endCustomers","onEdit"])]))]),Object(n["k"])(x,{open:y.openModal,text:"Отправлено",onClose:t[11]||(t[11]=function(e){return y.openModal=!1})},null,8,["open"])],64)}var v=a("3835"),k=a("b85c"),q=a("ade3"),w=(a("d9e2"),a("d401"),a("45fc"),a("d3b7"),a("07ac"),a("99af"),a("c740"),a("4fadc"),a("7db0"),a("213a")),x=function(e){return Object(n["A"])("data-v-0df7b915"),e=e(),Object(n["y"])(),e},C={key:0,class:"end-customer-table"},V=x((function(){return Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"Конечный заказчик"),Object(n["i"])("th",{class:"upp"},"Инн"),Object(n["i"])("th",null,"Регион"),Object(n["i"])("th",null,"Город"),Object(n["i"])("th",null,"ФИО заведующего эндоскопии")])],-1)})),J={key:0},$=["onClick"],I={class:"tooltip"},E={class:"tooltip"},M={class:"tooltip"},U={class:"tooltip"},A={class:"tooltip"},P={key:1,class:"end-customer-table-mobile table-mobile",ref:"table"},Q=["onClick"],F={key:0,class:"table-mobile-row"},S=x((function(){return Object(n["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Кон. заказчик ",-1)})),D={class:"table-mobile__value"},L={key:1,class:"table-mobile-row"},T=x((function(){return Object(n["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title upp"}," ИНН ",-1)})),B={class:"table-mobile__value"},R={key:2,class:"table-mobile-row"},W=x((function(){return Object(n["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Регион ",-1)})),K={class:"table-mobile__value"},G={key:3,class:"table-mobile-row"},Y=x((function(){return Object(n["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Город ",-1)})),Z={class:"table-mobile__value"},z={key:4,class:"table-mobile-row"},H=x((function(){return Object(n["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"},[Object(n["i"])("span",{class:"upp"},"фио"),Object(n["j"])(" зав. ")],-1)})),N={class:"table-mobile__value"};function X(e,t,a,s,i,c){var r=Object(n["G"])("tooltip");return e.$isMobile?a.endCustomers.length&&e.$isMobile?(Object(n["x"])(),Object(n["h"])("div",P,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.endCustomers,(function(t){return Object(n["x"])(),Object(n["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(a){return"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[t.name?(Object(n["x"])(),Object(n["h"])("div",F,[S,Object(n["i"])("span",D,Object(n["J"])(t.name),1)])):Object(n["g"])("",!0),t.inn?(Object(n["x"])(),Object(n["h"])("div",L,[T,Object(n["i"])("span",B,Object(n["J"])(t.inn),1)])):Object(n["g"])("",!0),t.region?(Object(n["x"])(),Object(n["h"])("div",R,[W,Object(n["i"])("span",K,Object(n["J"])(t.region),1)])):Object(n["g"])("",!0),t.city?(Object(n["x"])(),Object(n["h"])("div",G,[Y,Object(n["i"])("span",Z,Object(n["J"])(t.city),1)])):Object(n["g"])("",!0),t.head_of_endoscopy_full_name?(Object(n["x"])(),Object(n["h"])("div",z,[H,Object(n["i"])("span",N,Object(n["J"])(t.head_of_endoscopy_full_name),1)])):Object(n["g"])("",!0)],8,Q)})),128))],512)):Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("table",C,[V,a.endCustomers.length?(Object(n["x"])(),Object(n["h"])("tbody",J,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.endCustomers,(function(t){return Object(n["x"])(),Object(n["h"])("tr",{key:t.id,onClick:function(a){return"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.name),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",I,[Object(n["j"])(Object(n["J"])(t.name),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.inn),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",E,[Object(n["j"])(Object(n["J"])(t.inn),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.region),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",M,[Object(n["j"])(Object(n["J"])(t.region),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.city),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",U,[Object(n["j"])(Object(n["J"])(t.city),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.head_of_endoscopy_full_name),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",A,[Object(n["j"])(Object(n["J"])(t.head_of_endoscopy_full_name),1)])),[[r]])])],8,$)})),128))])):Object(n["g"])("",!0)]))}var ee={name:"EndCustomersTable",props:{endCustomers:{type:Array}},computed:{user:function(){return this.$store.getters.user}}},te=(a("47d6"),a("d959")),ae=a.n(te);const ne=ae()(ee,[["render",X],["__scopeId","data-v-0df7b915"]]);var se=ne,ie={name:"EndCustomer",components:{EndCustomerTable:se},computed:{user:function(){return this.$store.getters.user}},data:function(){return{data:{name:"",inn:"",region:"",city:"",head_of_endoscopy_full_name:""},message:"",query:"",openModal:!1,edit:!1,id:"",endCustomers:[],suggestions:[]}},setup:function(){Object(w["b"])({title:"Конечный заказчик"})},mounted:function(){this.getEndCustomers()},methods:{getEndCustomers:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!t&&this.$store.dispatch("loading",!0);var n=Object(q["a"])({},this.query&&"search","search"===t?this.query:a);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/end-customer"),{params:n}).then((function(a){"search"!==t&&(e.endCustomers=[]);var n,s=Object(k["a"])(a.data.results);try{for(s.s();!(n=s.n()).done;){var i=n.value;"search"!==t&&e.endCustomers.push(i),"search"==t&&e.query&&e.suggestions.push({key:i.name,value:i.id})}}catch(c){s.e(c)}finally{s.f()}e.$store.dispatch("loading",!1)}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)}))},addEndCustomer:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.$store.dispatch("loading",!0),this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/end-customer/").concat(this.id),this.data).then((function(t){var a=e.endCustomers.findIndex((function(e){return e.id==t.data.id}));e.endCustomers[a]=t.data;for(var n=0,s=Object.entries(e.data);n<s.length;n++){var i=Object(v["a"])(s[n],1),c=i[0];e.data[c]=""}e.$store.dispatch("loading",!1),e.edit=!1,e.openModal=!0}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)})):this.$api.post("".concat(this.$api.defaults.API,"/end-customer"),this.data).then((function(t){e.endCustomers.push(t.data);for(var a=0,n=Object.entries(e.data);a<n.length;a++){var s=Object(v["a"])(n[a],1),i=s[0];e.data[i]=""}e.$store.dispatch("loading",!1),e.openModal=!0}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1),t.response.data.inn&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},editEndCustomer:function(e){var t=this.endCustomers.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var a=0,n=Object.entries(t);a<n.length;a++){var s=Object(v["a"])(n[a],1),i=s[0];this.data[i]=t[i]}}}};a("fd53");const ce=ae()(ie,[["render",y],["__scopeId","data-v-32a10ad6"]]);t["default"]=ce},f546:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("45fc"),a("d3b7"),a("07ac");var n=a("7a23"),s=function(e){return Object(n["A"])("data-v-18b75037"),e=e(),Object(n["y"])(),e},i={class:"counterparty"},c=s((function(){return Object(n["i"])("h1",{class:"counterparty__title page__title"},"Контрагент",-1)})),r={key:0,class:"counterparty-content page-wrapper"},o={class:"counterparty-fields"},l={class:"counterparty-fields-row fields-row"},u={class:"counterparty-fields-row fields-row _inn"},d={class:"counterparty-fields-row fields-row _address"},b={class:"counterparty-fields-row fields-row"},j={class:"counterparty-fields-row fields-row"},O={class:"counterparty-fields-row fields-row _index"},p={class:"counterparty-fields-row fields-row"},m={class:"counterparty-fields-row fields-row"},f={class:"counterparty-fields-row fields-row _contact-person"},h={class:"counterparty-fields-row fields-row"},_={key:1,class:"counterparty-buttons page-buttons _save"},g={class:"counterparty__send _save__button"},y=Object(n["j"])(" Сохранить "),v={class:"counterparty-search page-wrapper"},k={class:"counterparty-search-field"},q={key:2,class:"page-wrapper"},w=Object(n["j"])(" > ");function x(e,t,a,s,x,C){var V=Object(n["F"])("base-input"),J=Object(n["F"])("base-button"),$=Object(n["F"])("counterparty-table"),I=Object(n["F"])("base-modal");return Object(n["x"])(),Object(n["h"])(n["b"],null,[Object(n["i"])("section",i,[c,C.user&&"manager"!==C.user.access_group&&"director"!==C.user.access_group?(Object(n["x"])(),Object(n["h"])("div",r,[Object(n["i"])("div",o,[Object(n["i"])("div",l,[Object(n["k"])(V,{label:"Контрагент",id:"counterparty",required:!0,modelValue:x.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.data.name=e})},null,8,["modelValue"])]),Object(n["i"])("div",u,[Object(n["k"])(V,{label:"ИНН",type:"number",id:"counterpartyInn",message:x.message,onInput:t[1]||(t[1]=function(e){return x.message=""}),required:!0,modelValue:x.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return x.data.inn=e})},null,8,["message","modelValue"])]),Object(n["i"])("div",d,[Object(n["k"])(V,{label:"Адрес",id:"counterpartyAddress",required:!0,modelValue:x.data.address_street,"onUpdate:modelValue":t[3]||(t[3]=function(e){return x.data.address_street=e})},null,8,["modelValue"])]),Object(n["i"])("div",b,[Object(n["k"])(V,{label:"Город",id:"counterpartyCity",required:!0,modelValue:x.data.address_city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return x.data.address_city=e})},null,8,["modelValue"])]),Object(n["i"])("div",j,[Object(n["k"])(V,{label:"Страна",id:"counterpartyCountry",required:!0,modelValue:x.data.address_country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return x.data.address_country=e})},null,8,["modelValue"])]),Object(n["i"])("div",O,[Object(n["k"])(V,{label:"Индекс",type:"number",short:!0,id:"counterpartyIndex",required:!0,modelValue:x.data.address_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return x.data.address_index=e})},null,8,["modelValue"])]),Object(n["i"])("div",p,[Object(n["k"])(V,{label:"Телефон",type:"number",maxLength:18,id:"counterpartyPhone",required:!0,modelValue:x.data.phone_number,"onUpdate:modelValue":t[7]||(t[7]=function(e){return x.data.phone_number=e})},null,8,["modelValue"])]),Object(n["i"])("div",m,[Object(n["k"])(V,{label:"Электронная почта",type:"email",id:"counterpartyEmail",required:!0,modelValue:x.data.email,"onUpdate:modelValue":t[8]||(t[8]=function(e){return x.data.email=e})},null,8,["modelValue"])]),Object(n["i"])("div",f,[Object(n["k"])(V,{label:"Контактное лицо",id:"counterpartyContactPerson",required:!0,modelValue:x.data.contact_person,"onUpdate:modelValue":t[9]||(t[9]=function(e){return x.data.contact_person=e})},null,8,["modelValue"])]),Object(n["i"])("div",h,[Object(n["k"])(V,{label:"Скидка",type:"number",short:!0,id:"counterpartyDiscount",required:!0,maxLength:3,modelValue:x.data.discount,"onUpdate:modelValue":t[10]||(t[10]=function(e){return x.data.discount=e})},null,8,["modelValue"])])])])):Object(n["g"])("",!0),C.user&&"manager"!==C.user.access_group&&"director"!==C.user.access_group?(Object(n["x"])(),Object(n["h"])("div",_,[Object(n["i"])("div",g,[Object.values(x.data).some((function(e){return e}))?(Object(n["x"])(),Object(n["f"])(J,{key:0,type:"filled",onClick:C.addCounterparty},{default:Object(n["P"])((function(){return[y]})),_:1},8,["onClick"])):Object(n["g"])("",!0)])])):Object(n["g"])("",!0),Object(n["i"])("div",v,[Object(n["i"])("div",k,[Object(n["k"])(V,{id:"counterpartySearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:x.suggestions,onSetSuggestion:t[11]||(t[11]=function(e){return C.getCounterparties("",e)}),onKeypressEnter:t[12]||(t[12]=function(e){return C.getCounterparties("")}),onClear:t[13]||(t[13]=function(e){return x.query="",x.suggestions=[],C.getCounterparties()}),onInput:t[14]||(t[14]=function(e){return C.getCounterparties("search")}),modelValue:x.query,"onUpdate:modelValue":t[15]||(t[15]=function(e){return x.query=e})},null,8,["placeholder","suggestions","modelValue"])])]),x.edit?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("div",q,[w,Object(n["k"])($,{counterparties:x.counterparties,onEdit:C.editCounterparty},null,8,["counterparties","onEdit"])]))]),Object(n["k"])(I,{open:x.openModal,text:"Сохранено",onClose:t[16]||(t[16]=function(e){return x.openModal=!1})},null,8,["open"])],64)}var C=a("3835"),V=a("b85c"),J=a("ade3"),$=(a("d9e2"),a("d401"),a("99af"),a("c740"),a("4fadc"),a("caad"),a("2532"),a("7db0"),a("213a")),I=function(e){return Object(n["A"])("data-v-1c767aaa"),e=e(),Object(n["y"])(),e},E={key:0,class:"counterparty-table"},M=I((function(){return Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"Контрагент"),Object(n["i"])("th",{class:"upp"},"Инн"),Object(n["i"])("th",null,"Адрес"),Object(n["i"])("th",null,"Телефон"),Object(n["i"])("th",null,"Эл. почта"),Object(n["i"])("th",null,"Контактное лицо"),Object(n["i"])("th",null,"Скидка")])],-1)})),U={key:0},A=["onClick"],P={class:"tooltip"},Q={class:"tooltip"},F={class:"tooltip"},S={class:"tooltip"},D={class:"tooltip"},L={class:"tooltip"},T={class:"no-wrap"},B={key:1,class:"counterparty-table-mobile table-mobile",ref:"table"},R=["onClick"],W={class:"table-mobile-row"},K=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Контрагент ",-1)})),G={class:"table-mobile__value"},Y={class:"table-mobile-row"},Z=I((function(){return Object(n["i"])("span",{class:"table-mobile__title upp"}," Инн ",-1)})),z={class:"table-mobile__value"},H={class:"table-mobile-row"},N=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Адрес ",-1)})),X={class:"table-mobile__value"},ee={class:"table-mobile-row"},te=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Телефон ",-1)})),ae={class:"table-mobile__value"},ne={class:"table-mobile-row"},se=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Эл. почта ",-1)})),ie={class:"table-mobile__value"},ce={class:"table-mobile-row"},re=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Конт. лицо ",-1)})),oe={class:"table-mobile__value"},le={class:"table-mobile-row"},ue=I((function(){return Object(n["i"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),de={class:"table-mobile__value"};function be(e,t,a,s,i,c){var r=Object(n["G"])("tooltip");return e.$isMobile?a.counterparties.length&&e.$isMobile?(Object(n["x"])(),Object(n["h"])("div",B,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.counterparties,(function(t){return Object(n["x"])(),Object(n["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(a){return c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[Object(n["i"])("div",W,[K,Object(n["i"])("span",G,Object(n["J"])(t.name),1)]),Object(n["i"])("div",Y,[Z,Object(n["i"])("span",z,Object(n["J"])(t.inn),1)]),Object(n["i"])("div",H,[N,Object(n["i"])("span",X,Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1)]),Object(n["i"])("div",ee,[te,Object(n["i"])("span",ae," +"+Object(n["J"])(t.phone_number),1)]),Object(n["i"])("div",ne,[se,Object(n["i"])("span",ie,Object(n["J"])(t.email),1)]),Object(n["i"])("div",ce,[re,Object(n["i"])("span",oe,Object(n["J"])(t.contact_person),1)]),Object(n["i"])("div",le,[ue,Object(n["i"])("span",de,Object(n["J"])(t.discount)+"% ",1)])],8,R)})),128))],512)):Object(n["g"])("",!0):(Object(n["x"])(),Object(n["h"])("table",E,[M,a.counterparties.length?(Object(n["x"])(),Object(n["h"])("tbody",U,[(Object(n["x"])(!0),Object(n["h"])(n["b"],null,Object(n["D"])(a.counterparties,(function(t){return Object(n["x"])(),Object(n["h"])("tr",{key:t.id,onClick:function(a){return c.user&&"manager"!==c.user.access_group&&"director"!==c.user.access_group&&e.$emit("edit",t.id)}},[Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.name),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",P,[Object(n["j"])(Object(n["J"])(t.name),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.inn),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",Q,[Object(n["j"])(Object(n["J"])(t.inn),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",F,[Object(n["j"])(Object(n["J"])(t.address_street&&t.address_street+",")+" "+Object(n["J"])(t.address_city&&t.address_city+",")+" "+Object(n["J"])(t.address_country&&t.address_country+",")+" "+Object(n["J"])(t.address_index&&t.address_index),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null," +"+Object(n["J"])(t.phone_number),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",S,[Object(n["j"])(" +"+Object(n["J"])(t.phone_number),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.email),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",D,[Object(n["j"])(Object(n["J"])(t.email),1)])),[[r]])]),Object(n["i"])("td",null,[Object(n["i"])("span",null,Object(n["J"])(t.contact_person),1),Object(n["Q"])((Object(n["x"])(),Object(n["h"])("span",L,[Object(n["j"])(Object(n["J"])(t.contact_person),1)])),[[r]])]),Object(n["i"])("td",T,Object(n["J"])(t.discount)+"%",1)],8,A)})),128))])):Object(n["g"])("",!0)]))}var je={name:"CounterpartyTable",props:{counterparties:{type:Array}},computed:{user:function(){return this.$store.getters.user}}},Oe=(a("2cea"),a("d959")),pe=a.n(Oe);const me=pe()(je,[["render",be],["__scopeId","data-v-1c767aaa"]]);var fe=me,he={name:"Counterparty",components:{CounterpartyTable:fe},computed:{user:function(){return this.$store.getters.user}},data:function(){return{data:{name:"",inn:"",address_street:"",address_city:"",address_country:"",address_index:"",phone_number:"",email:"",contact_person:"",discount:""},message:"",query:"",openModal:!1,edit:!1,id:"",counterparties:[],suggestions:[]}},setup:function(){Object($["b"])({title:"Контрагент"})},mounted:function(){this.getCounterparties()},methods:{getCounterparties:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!t&&this.$store.dispatch("loading",!0);var n=Object(J["a"])({},this.query&&"search","search"===t?this.query:a);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/counterparty"),{params:n}).then((function(a){"search"!==t&&(e.counterparties=[]);var n,s=Object(V["a"])(a.data.results);try{for(s.s();!(n=s.n()).done;){var i=n.value;"search"!==t&&e.counterparties.push(i),"search"==t&&e.query&&e.suggestions.push({key:i.name,value:i.id})}}catch(c){s.e(c)}finally{s.f()}e.$store.dispatch("loading",!1)}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)}))},addCounterparty:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.$store.dispatch("loading",!0),this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/counterparty/").concat(this.id),this.data).then((function(t){var a=e.counterparties.findIndex((function(e){return e.id==t.data.id}));e.counterparties[a]=t.data;for(var n=0,s=Object.entries(e.data);n<s.length;n++){var i=Object(C["a"])(s[n],1),c=i[0];e.data[c]=""}e.edit=!1,e.openModal=!0,e.$store.dispatch("loading",!1)}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1)})):this.$api.post("".concat(this.$api.defaults.API,"/counterparty"),this.data).then((function(t){e.counterparties.push(t.data);for(var a=0,n=Object.entries(e.data);a<n.length;a++){var s=Object(C["a"])(n[a],1),i=s[0];e.data[i]=""}e.$store.dispatch("loading",!1),e.openModal=!0}))["catch"]((function(t){new Error(t),e.$store.dispatch("loading",!1),t.response.data.inn&&t.response.data.inn.includes("already exists")&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},editCounterparty:function(e){var t=this.counterparties.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var a=0,n=Object.entries(t);a<n.length;a++){var s=Object(C["a"])(n[a],1),i=s[0];this.data[i]=t[i]}}}};a("ae34");const _e=pe()(he,[["render",x],["__scopeId","data-v-18b75037"]]);t["default"]=_e},f80f:function(e,t,a){},fd53:function(e,t,a){"use strict";a("4032")}}]);
//# sourceMappingURL=requisites.72554f79.js.map