(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["offers"],{"0e34":function(e,t,n){e.exports=n.p+"img/excel.847a47e8.svg"},1148:function(e,t,n){"use strict";var o=n("da84"),c=n("5926"),r=n("577e"),a=n("1d80"),l=o.RangeError;e.exports=function(e){var t=r(a(this)),n="",o=c(e);if(o<0||o==1/0)throw l("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"1aea":function(e,t,n){e.exports=n.p+"img/pdf.ad036780.svg"},"1d60":function(e,t,n){e.exports=n.p+"img/filters.393d9f5b.svg"},"209a":function(e,t,n){e.exports=n.p+"img/ru.9a99cccd.svg"},2532:function(e,t,n){"use strict";var o=n("23e7"),c=n("e330"),r=n("5a34"),a=n("1d80"),l=n("577e"),i=n("ab13"),s=c("".indexOf);o({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~s(l(a(this)),l(r(e)),arguments.length>1?arguments[1]:void 0)}})},"4de4":function(e,t,n){},"5a34":function(e,t,n){var o=n("da84"),c=n("44e7"),r=o.TypeError;e.exports=function(e){if(c(e))throw r("The method doesn't accept regular expressions");return e}},"6f26":function(e,t,n){},"8dbe":function(e,t,n){e.exports=n.p+"img/tz.3a9a68e5.svg"},ab13:function(e,t,n){var o=n("b622"),c=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[c]=!1,"/./"[e](t)}catch(o){}}return!1}},b680:function(e,t,n){"use strict";var o=n("23e7"),c=n("da84"),r=n("e330"),a=n("5926"),l=n("408a"),i=n("1148"),s=n("d039"),u=c.RangeError,f=c.String,b=Math.floor,d=r(i),p=r("".slice),O=r(1..toFixed),j=function(e,t,n){return 0===t?n:t%2===1?j(e,t-1,n*e):j(e*e,t/2,n)},g=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},h=function(e,t,n){var o=-1,c=n;while(++o<6)c+=t*e[o],e[o]=c%1e7,c=b(c/1e7)},m=function(e,t){var n=6,o=0;while(--n>=0)o+=e[n],e[n]=b(o/t),o=o%t*1e7},v=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var o=f(e[t]);n=""===n?o:n+d("0",7-o.length)+o}return n},y=s((function(){return"0.000"!==O(8e-5,3)||"1"!==O(.9,0)||"1.25"!==O(1.255,2)||"1000000000000000128"!==O(0xde0b6b3a7640080,0)}))||!s((function(){O({})}));o({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,n,o,c,r=l(this),i=a(e),s=[0,0,0,0,0,0],b="",O="0";if(i<0||i>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return f(r);if(r<0&&(b="-",r=-r),r>1e-21)if(t=g(r*j(2,69,1))-69,n=t<0?r*j(2,-t,1):r/j(2,t,1),n*=4503599627370496,t=52-t,t>0){h(s,0,n),o=i;while(o>=7)h(s,1e7,0),o-=7;h(s,j(10,o,1),0),o=t-1;while(o>=23)m(s,1<<23),o-=23;m(s,1<<o),h(s,1,1),m(s,2),O=v(s)}else h(s,0,n),h(s,1<<-t,0),O=v(s)+d("0",i);return i>0?(c=O.length,O=b+(c<=i?"0."+d("0",i-c)+O:p(O,0,c-i)+"."+p(O,c-i))):O=b+O,O}})},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");var o=n("06c5");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(o["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(i)throw a}}}}},caad:function(e,t,n){"use strict";var o=n("23e7"),c=n("4d64").includes,r=n("44d2");o({target:"Array",proto:!0},{includes:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d0f1:function(e,t,n){"use strict";n("4de4")},da3f:function(e,t,n){"use strict";n.r(t);n("fb6a");var o=n("7a23"),c=n("1d60"),r=n.n(c),a=n("c8de"),l=n.n(a),i=function(e){return Object(o["x"])("data-v-ffe04778"),e=e(),Object(o["v"])(),e},s={class:"offer"},u=i((function(){return Object(o["g"])("h1",{class:"offer__title page__title"},"Коммерческое предложение",-1)})),f={class:"offer-header__buttons"},b={class:"offer_create"},d=Object(o["i"])(" Создать "),p=i((function(){return Object(o["g"])("span",{class:"upp",style:{"margin-left":"2px"}}," кп",-1)})),O={class:"offer_copy"},j=Object(o["i"])(" Копировать "),g={class:"offer-search"},h={key:0,class:"offer-filters__button"},m={key:0,class:"offer-filters__count"},v=i((function(){return Object(o["g"])("img",{src:r.a,alt:"Filters"},null,-1)})),y={key:0,class:"offer-filters__close"},_={key:1,class:"offer-filters__title page__title"},k={class:"offer-filters_counterparty"},w={class:"offer-filters_region"},C={class:"offer-filters_customer"},T={class:"offer-filters_manager"},x={key:2,class:"offer-filters__apply page-buttons"},F={class:"offer-filters__apply-button"},M=Object(o["i"])(" Применить "),V={class:"offer-content page-wrapper"};function $(e,t,n,c,r,a){var i=Object(o["C"])("base-button"),$=Object(o["C"])("base-input"),S=Object(o["C"])("base-select"),q=Object(o["C"])("offers-table");return Object(o["u"])(),Object(o["f"])("section",s,[u,Object(o["g"])("div",{class:Object(o["p"])(["offer-header page-wrapper",{shadow:r.scrollStart}])},[Object(o["g"])("div",f,[Object(o["g"])("div",b,[Object(o["j"])(i,{type:"filled",onClicked:t[0]||(t[0]=function(t){return e.$router.push({name:"offerCreate"})})},{default:Object(o["L"])((function(){return[d,p]})),_:1})]),Object(o["g"])("div",O,[Object(o["j"])(i,{type:"outlined",onClicked:a.copy,disabled:!r.offerToCopy.length},{default:Object(o["L"])((function(){return[j]})),_:1},8,["onClicked","disabled"])])]),Object(o["g"])("div",g,[Object(o["j"])($,{id:"offerSearch",placeholder:e.$isMobile?"Поиск":"Поиск по номеру КП, конечному заказчику, региону, контрагенту",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:r.suggestions,onSetSuggestion:a.getOffers,onKeypressEnter:a.getOffers,onClear:t[1]||(t[1]=function(e){return r.query="",a.getOffers()}),onInput:t[2]||(t[2]=function(e){return a.getOffers("search")}),modelValue:r.query,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])]),e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",h,[r.counterparty||r.region||r.customer||r.manager?(Object(o["u"])(),Object(o["f"])("div",m," 3 ")):Object(o["e"])("",!0),Object(o["j"])(i,{type:"outlined",onClick:t[4]||(t[4]=function(t){return e.open=!0})},{default:Object(o["L"])((function(){return[v]})),_:1})])):Object(o["e"])("",!0)],2),!e.$isMobile||e.$isMobile&&e.open?(Object(o["u"])(),Object(o["f"])("div",{key:0,class:Object(o["p"])(["offer-filters page-wrapper",{open:e.showContent}])},[e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",y,[Object(o["g"])("img",{src:l.a,alt:"Close",onClick:t[5]||(t[5]=function(){return e.closeDropdown&&e.closeDropdown.apply(e,arguments)})})])):Object(o["e"])("",!0),e.$isMobile?(Object(o["u"])(),Object(o["f"])("h4",_,"Фильтры")):Object(o["e"])("",!0),Object(o["g"])("div",k,[Object(o["j"])($,{id:"offerSearch",placeholder:"Контрагент",search:!0,suggestions:r.conterparties,onInput:t[6]||(t[6]=function(e){return a.getOffers("search")}),onKeypressEnter:a.getOffers,onSetSuggestion:t[7]||(t[7]=function(t){return a.getOffers(e.s)}),modelValue:r.counterparty,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.counterparty=e})},null,8,["suggestions","onKeypressEnter","modelValue"])]),Object(o["g"])("div",w,[Object(o["j"])(S,{options:r.regions,placeholder:"Регион",modelValue:r.region,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.region=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["g"])("div",C,[Object(o["j"])(S,{options:r.customers,placeholder:"Конечный заказчик",modelValue:r.customer,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.customer=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),Object(o["g"])("div",T,[Object(o["j"])(S,{options:r.managers,placeholder:"Менеджер",modelValue:r.manager,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.manager=e}),onChange:a.getOffers},null,8,["options","modelValue","onChange"])]),e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",x,[Object(o["g"])("div",F,[Object(o["j"])(i,{type:"filled",onClick:e.closeDropdown},{default:Object(o["L"])((function(){return[M]})),_:1},8,["onClick"])])])):Object(o["e"])("",!0)],2)):Object(o["e"])("",!0),Object(o["g"])("div",V,[Object(o["j"])(q,{offers:r.offers.slice(0,r.count),onDownload:a.download,onCopy:t[12]||(t[12]=function(e){r.offerToCopy=e}),onScroll:t[13]||(t[13]=function(e){r.scrollStart=e>0}),onScrolled:t[14]||(t[14]=function(){r.count+=5})},null,8,["offers","onDownload"])])])}var S=n("b85c");function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("b0c0"),n("d3b7");var I=n("30a8"),U=n("2141"),E=n("be12"),D=n("304d"),R=(n("caad"),n("2532"),n("1aea")),A=n.n(R),z=n("0e34"),B=n.n(z),L=n("209a"),K=n.n(L),H=n("8dbe"),N=n.n(H),P=function(e){return Object(o["x"])("data-v-17c5109f"),e=e(),Object(o["v"])(),e},J={key:0,class:"offer-table"},W=P((function(){return Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th"),Object(o["g"])("th",null,"Номер"),Object(o["g"])("th",null,"Дата создания"),Object(o["g"])("th",null,"Стоимость"),Object(o["g"])("th",null,"Контрагент"),Object(o["g"])("th",null,"Скидка"),Object(o["g"])("th",null,"Регион"),Object(o["g"])("th",null,"Файлы")])],-1)})),G={key:0,ref:"table"},Q={class:"no-wrap"},X={class:"base-check"},Y=["id","name","value","disabled"],Z=["for"],ee=["onClick"],te={class:"tooltip"},ne=["onClick"],oe={class:"tooltip"},ce=["onClick"],re={class:"tooltip"},ae=["onClick"],le={class:"tooltip"},ie=["onClick"],se={class:"tooltip"},ue=["onClick"],fe={class:"tooltip"},be={class:"no-wrap"},de={class:"offer-actions"},pe=["href"],Oe=P((function(){return Object(o["g"])("img",{src:A.a,alt:"PDF"},null,-1)})),je=[Oe],ge=["href"],he=P((function(){return Object(o["g"])("img",{src:B.a,alt:"Excel"},null,-1)})),me=[he],ve=["href"],ye=P((function(){return Object(o["g"])("img",{src:K.a,alt:"Ru"},null,-1)})),_e=[ye],ke={class:"offer-action _tz"},we=P((function(){return Object(o["g"])("img",{src:N.a,alt:"Tz"},null,-1)})),Ce={class:"offer-action-dropdown"},Te={class:"offer-action-dropdown-content"},xe={class:"base-check radio"},Fe=P((function(){return Object(o["g"])("label",{for:"ktru",class:"upp"}," ктру ",-1)})),Me={class:"base-check radio"},Ve=P((function(){return Object(o["g"])("label",{for:"tu",class:"upp"}," ту ",-1)})),$e={class:"base-check radio"},Se=P((function(){return Object(o["g"])("label",{for:"ktrus"},[Object(o["g"])("span",{class:"upp"},"ктру"),Object(o["i"])(" сокр. ")],-1)})),qe=["href"],Ie={key:1,class:"offer-table-mobile table-mobile",ref:"table"},Ue={class:"offer-table-mobile-checkbox"},Ee={class:"base-check"},De=["id","name","value","disabled"],Re=["for"],Ae={class:"table-mobile-row"},ze=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Номер ",-1)})),Be={class:"table-mobile__value"},Le={class:"table-mobile-row"},Ke=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Дата созд. ",-1)})),He={class:"table-mobile__value"},Ne={class:"table-mobile-row"},Pe=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Стоимость ",-1)})),Je={class:"table-mobile__value"},We={class:"table-mobile-row"},Ge=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Контрагент ",-1)})),Qe={class:"table-mobile__value"},Xe={class:"table-mobile-row"},Ye=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),Ze={class:"table-mobile__value"},et={class:"table-mobile-row"},tt=P((function(){return Object(o["g"])("span",{class:"table-mobile__title"}," Регион ",-1)})),nt={class:"table-mobile__value"},ot={class:"offer-actions"},ct=Object(o["h"])('<a class="offer-action _pdf" data-v-17c5109f><img src="'+A.a+'" alt="PDF" data-v-17c5109f></a><a class="offer-action _excel" data-v-17c5109f><img src="'+B.a+'" alt="Excel" data-v-17c5109f></a><a class="offer-action _ru" data-v-17c5109f><img src="'+K.a+'" alt="Ru" data-v-17c5109f></a>',3),rt={class:"offer-action _tz"},at=P((function(){return Object(o["g"])("img",{src:N.a,alt:"Tz"},null,-1)})),lt={class:"offer-action-dropdown"},it={class:"offer-action-dropdown-content"},st={class:"base-check radio"},ut=P((function(){return Object(o["g"])("label",{for:"ktru",class:"upp"}," ктру ",-1)})),ft={class:"base-check radio"},bt=P((function(){return Object(o["g"])("label",{for:"tu",class:"upp"}," ту ",-1)})),dt={class:"base-check radio"},pt=P((function(){return Object(o["g"])("label",{for:"ktrus"},[Object(o["g"])("span",{class:"upp"},"ктру"),Object(o["i"])(" сокр. ")],-1)})),Ot=P((function(){return Object(o["g"])("a",{href:"#",class:"offer-action__button"}," Скачать ",-1)})),jt={key:2,class:"offer-content-notFound"};function gt(e,t,n,c,r,a){var l=Object(o["D"])("tooltip");return Object(o["u"])(),Object(o["f"])(o["a"],null,[e.$isMobile?n.offers.length&&e.$isMobile?(Object(o["u"])(),Object(o["f"])("div",Ie,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.offers,(function(e,n){return Object(o["u"])(),Object(o["f"])("div",{class:"table-mobile-column",key:n},[Object(o["g"])("div",Ue,[Object(o["g"])("div",Ee,[Object(o["M"])(Object(o["g"])("input",{type:"checkbox",id:e.id,name:e.id,value:e.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(e.id),"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.offerToCopy=e})},null,8,De),[[o["H"],r.offerToCopy]]),Object(o["g"])("label",{for:e.id},null,8,Re)])]),Object(o["g"])("div",Ae,[ze,Object(o["g"])("span",Be,Object(o["F"])(e.id),1)]),Object(o["g"])("div",Le,[Ke,Object(o["g"])("span",He,Object(o["F"])(e.created_at),1)]),Object(o["g"])("div",Ne,[Pe,Object(o["g"])("span",Je,Object(o["F"])(e.total_cost)+" ₽ ",1)]),Object(o["g"])("div",We,[Ge,Object(o["g"])("span",Qe,Object(o["F"])(e.counterparty.name),1)]),Object(o["g"])("div",Xe,[Ye,Object(o["g"])("span",Ze,Object(o["F"])(e.counterparty.discount)+"% ",1)]),Object(o["g"])("div",et,[tt,Object(o["g"])("span",nt,Object(o["F"])(e.end_customer&&e.end_customer.region),1)]),Object(o["g"])("div",ot,[ct,Object(o["g"])("div",rt,[at,Object(o["g"])("div",lt,[Object(o["g"])("div",it,[Object(o["g"])("div",st,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"ktru",value:"ktru","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),ut]),Object(o["g"])("div",ft,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"tu",value:"tu","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),bt]),Object(o["g"])("div",dt,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"ktrus",value:"ktrus","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),pt]),Ot])])])])])})),128))],512)):Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("table",J,[W,n.offers.length?(Object(o["u"])(),Object(o["f"])("tbody",G,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(n.offers,(function(n,c){return Object(o["u"])(),Object(o["f"])("tr",{key:c},[Object(o["g"])("td",Q,[Object(o["g"])("div",X,[Object(o["M"])(Object(o["g"])("input",{type:"checkbox",id:n.id,name:n.id,value:n.id,disabled:r.offerToCopy.length&&!r.offerToCopy.includes(n.id),"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.offerToCopy=e})},null,8,Y),[[o["H"],r.offerToCopy]]),Object(o["g"])("label",{for:n.id},null,8,Z)])]),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.id),1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",te,[Object(o["i"])(Object(o["F"])(n.id),1)])),[[l]])],8,ee),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.created_at),1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",oe,[Object(o["i"])(Object(o["F"])(n.created_at),1)])),[[l]])],8,ne),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.total_cost)+" ₽ ",1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",re,[Object(o["i"])(Object(o["F"])(n.total_cost)+" ₽ ",1)])),[[l]])],8,ce),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.counterparty.name),1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",le,[Object(o["i"])(Object(o["F"])(n.counterparty.name),1)])),[[l]])],8,ae),Object(o["g"])("td",{class:"no-wrap",onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.counterparty.discount)+"% ",1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",se,[Object(o["i"])(Object(o["F"])(n.counterparty.discount)+"% ",1)])),[[l]])],8,ie),Object(o["g"])("td",{onClick:function(t){return e.$router.push({name:"offerCreate",query:{id:n.id}})}},[Object(o["g"])("span",null,Object(o["F"])(n.end_customer&&n.end_customer.region),1),Object(o["M"])((Object(o["u"])(),Object(o["f"])("span",fe,[Object(o["i"])(Object(o["F"])(n.end_customer&&n.end_customer.region),1)])),[[l]])],8,ue),Object(o["g"])("td",be,[Object(o["g"])("div",de,[Object(o["g"])("a",{href:n.kp_pdf_file,class:"offer-action _pdf"},je,8,pe),Object(o["g"])("a",{href:n.kp_exel_file,class:"offer-action _excel"},me,8,ge),Object(o["g"])("a",{href:n.ru_file,class:"offer-action _ru"},_e,8,ve),Object(o["g"])("div",ke,[we,Object(o["g"])("div",Ce,[Object(o["g"])("div",Te,[Object(o["g"])("div",xe,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"ktru",value:"ktru","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),Fe]),Object(o["g"])("div",Me,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"tu",value:"tu","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),Ve]),Object(o["g"])("div",$e,[Object(o["M"])(Object(o["g"])("input",{type:"radio",id:"ktrus",value:"ktrus","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.downloadType=e})},null,512),[[o["I"],r.downloadType]]),Se]),Object(o["g"])("a",{href:r.downloadType,class:"offer-action__button"}," Скачать ",8,qe)])])])])])])})),128))],512)):Object(o["e"])("",!0)])),n.offers.length?Object(o["e"])("",!0):(Object(o["u"])(),Object(o["f"])("span",jt," Ничего не найдено "))],64)}n("b680");var ht={name:"OfferTable",props:{offers:{type:Array}},data:function(){return{offerToCopy:[],downloadType:""}},methods:{onScroll:function(e){var t=e.getBoundingClientRect().height,n=e.scrollHeight,o=e.scrollTop;this.$emit("scroll",o),Math.ceil(o+t)==n.toFixed(0)&&this.$emit("scrolled")}},mounted:function(){var e=this,t=this.$refs.table;t&&t.addEventListener("scroll",(function(){e.onScroll(t)}))},watch:{offerToCopy:function(){this.$emit("copy",this.offerToCopy)}},emits:["download","scroll","scrolled","copy"]},mt=(n("fd48"),n("6b0d")),vt=n.n(mt);const yt=vt()(ht,[["render",gt],["__scopeId","data-v-17c5109f"]]);var _t=yt,kt={components:{BaseButton:I["a"],BaseInput:U["a"],BaseSelect:E["a"],OffersTable:_t},data:function(){return{query:"",counterparty:"",region:"",customer:"",manager:"",count:10,scrollStart:!1,offerToCopy:[],regions:[{key:"Не Выбран",value:""}],offers:[],conterparties:[],suggestions:[],customers:[{key:"Не Выбран",value:""}],managers:[]}},mounted:function(){this.getOffers(),this.getRegions()},methods:{copy:function(){this.$router.push({name:"offerCreate",query:{id:this.offerToCopy[0]}})},clear:function(){this.query=""},download:function(e){console.log(e)},getOffers:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(e={},q(e,this.query&&"search",this.query),q(e,this.counterparty&&"counterparty",this.counterparty),q(e,this.customer&&"end_customer",this.customer),q(e,this.region&&"end_customer__region",this.region),e);this.conterparties=[],this.suggestions=[],this.customers=[{key:"Не Выбран",value:""}],this.$api.get("".concat("https://51.250.6.131/api/v1","/offer"),{params:o}).then((function(e){"search"!==n&&(t.offers=[]);var o,c=Object(S["a"])(e.data.results);try{var r=function(){var e=o.value;"search"!==n&&t.offers.push(e),"search"==n&&t.query&&t.suggestions.push({key:e.id,value:e.id});var c={key:e.end_customer?e.end_customer.name:"",value:e.end_customer?e.end_customer.id:""};!t.customers.some((function(e){return e.value===c.value}))&&c.key&&t.customers.push(c);var r={key:e.counterparty.name,value:e.counterparty.id};!t.conterparties.some((function(e){return e.value===r.value}))&&r.key&&t.conterparties.push(r)};for(c.s();!(o=c.n()).done;)r()}catch(a){c.e(a)}finally{c.f()}})).catch((function(e){return console.log(e)}))},getRegions:function(){var e=this;this.$api.get("".concat("https://51.250.6.131/api/v1","/regions")).then((function(t){var n,o=Object(S["a"])(t.data);try{var c=function(){var t=n.value,o={key:t.region,value:t.region};!e.regions.some((function(e){return e.key==o.key}))&&e.regions.push(o)};for(o.s();!(n=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}console.log(e.regions[0])}))}},mixins:[D["a"]]};n("d0f1");const wt=vt()(kt,[["render",$],["__scopeId","data-v-ffe04778"]]);t["default"]=wt},fd48:function(e,t,n){"use strict";n("6f26")}}]);
//# sourceMappingURL=offers.4a6db24f.js.map