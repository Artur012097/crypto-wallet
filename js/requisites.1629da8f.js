(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["requisites"],{"02dc":function(e,t,n){"use strict";n("6b3c")},"07ac":function(e,t,n){var a=n("23e7"),i=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return i(e)}})},"0a79":function(e,t,n){"use strict";n("27f3")},"26ad":function(e,t,n){"use strict";n.r(t);n("b0c0"),n("d3b7");var a=n("7a23"),i=n("c8de"),s=n.n(i),c=function(e){return Object(a["A"])("data-v-6e9fee21"),e=e(),Object(a["y"])(),e},l={class:"requisites"},o=c((function(){return Object(a["i"])("h1",{class:"requisites__title page__title"},"Реквизиты компании",-1)})),r={class:"requisites-content page-wrapper"},d={class:"requisites-fields"},u={class:"requisites-fields-row fields-row"},b={class:"requisites-fields-row fields-row _inn"},j={class:"requisites-fields-row fields-row"},O={class:"requisites-fields-row fields-row"},p={class:"requisites-fields-row fields-row"},m={class:"requisites-fields-row fields-row _index"},f={class:"requisites-fields-row fields-row"},_={class:"requisites-fields-row fields-row _email"},h={class:"requisites-fields-row fields-row"},y={class:"requisites-fields-row fields-row _position"},v={class:"requisites-file _logo"},g=c((function(){return Object(a["i"])("span",{class:"requisites-file__title"},"Логотип",-1)})),q={for:"requisitesLogo"},k={key:1,class:"requisites-file-loaded"},w=c((function(){return Object(a["i"])("img",{src:s.a,alt:"Remove"},null,-1)})),C=[w],V=["src"],x={class:"requisites-file"},J=c((function(){return Object(a["i"])("span",{class:"requisites-file__title"},"Оттиск печати",-1)})),$={for:"requisitesBlankPhoto"},I={key:1,class:"requisites-file-loaded"},E=c((function(){return Object(a["i"])("img",{src:s.a,alt:"Remove"},null,-1)})),M=[E],U=["src"],A={class:"requisites-buttons page-buttons _save"},P={class:"requisites__send _save__button"},S=Object(a["j"])(" Сохранить "),Q={class:"requisites-search page-wrapper"},D={class:"requisites-search-field"},F={class:"page-wrapper"};function B(e,t,n,i,s,c){var w=Object(a["F"])("base-input"),E=Object(a["F"])("base-button"),B=Object(a["F"])("company-requisites-table"),L=Object(a["F"])("base-modal");return Object(a["x"])(),Object(a["h"])(a["b"],null,[Object(a["i"])("section",l,[o,Object(a["i"])("div",r,[Object(a["i"])("div",d,[Object(a["i"])("div",u,[Object(a["k"])(w,{id:"requisitesCompany",label:"Компания",required:!0,modelValue:s.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.data.name=e})},null,8,["modelValue"])]),Object(a["i"])("div",b,[Object(a["k"])(w,{id:"requisitesInn",label:"ИНН",type:"number",message:s.message,onInput:t[1]||(t[1]=function(e){return s.message=""}),required:!0,modelValue:s.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.data.inn=e})},null,8,["message","modelValue"])]),Object(a["i"])("div",j,[Object(a["k"])(w,{id:"requisitesAddress",label:"Адрес",required:!0,modelValue:s.data.address_street,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.data.address_street=e})},null,8,["modelValue"])]),Object(a["i"])("div",O,[Object(a["k"])(w,{id:"requisitesCity",label:"Город",modelValue:s.data.address_city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return s.data.address_city=e})},null,8,["modelValue"])]),Object(a["i"])("div",p,[Object(a["k"])(w,{id:"requisitesCountry",label:"Страна",required:!0,modelValue:s.data.address_country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return s.data.address_country=e})},null,8,["modelValue"])]),Object(a["i"])("div",m,[Object(a["k"])(w,{id:"requisitesIndex",label:"Индекс",type:"number",short:!0,required:!0,modelValue:s.data.address_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return s.data.address_index=e})},null,8,["modelValue"])]),Object(a["i"])("div",f,[Object(a["k"])(w,{id:"requisitesPhone",label:"Телефон",type:"number",required:!0,modelValue:s.data.phone_number,"onUpdate:modelValue":t[7]||(t[7]=function(e){return s.data.phone_number=e})},null,8,["modelValue"])]),Object(a["i"])("div",_,[Object(a["k"])(w,{id:"requisitesEmail",type:"email",label:"Электронная почта",required:!0,modelValue:s.data.email,"onUpdate:modelValue":t[8]||(t[8]=function(e){return s.data.email=e})},null,8,["modelValue"])]),Object(a["i"])("div",h,[Object(a["k"])(w,{id:"requisitesBio",label:"ФИО",modelValue:s.data.director_full_name,"onUpdate:modelValue":t[9]||(t[9]=function(e){return s.data.director_full_name=e})},null,8,["modelValue"])]),Object(a["i"])("div",y,[Object(a["k"])(w,{id:"requisitesPosition",label:"Должность",required:!0,modelValue:s.data.director_position,"onUpdate:modelValue":t[10]||(t[10]=function(e){return s.data.director_position=e})},null,8,["modelValue"])]),Object(a["i"])("div",v,[g,s.data.logo?(Object(a["x"])(),Object(a["h"])("div",k,[Object(a["i"])("div",{class:"requisites-file-loaded__close",onClick:t[14]||(t[14]=function(e){return s.data.logo=null})},C),Object(a["i"])("img",{src:s.data.logo,alt:"Logo"},null,8,V)])):(Object(a["x"])(),Object(a["h"])("div",{key:0,class:"requisites-file-field",onDragover:t[12]||(t[12]=Object(a["S"])((function(){}),["prevent"])),onDrop:t[13]||(t[13]=function(e){return c.drop("logo","requisitesLogo")})},[Object(a["i"])("label",q,[Object(a["j"])(Object(a["J"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(a["i"])("span",null,Object(a["J"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(a["j"])(" "+Object(a["J"])(e.$isMobile?"":"файл")+" ",1),Object(a["i"])("input",{type:"file",id:"requisitesLogo",ref:"requisitesLogo",multiple:"",onChange:t[11]||(t[11]=function(e){return c.uploadImage("logo","requisitesLogo")}),accept:".jpg,.jpeg,.png"},null,544)])],32))]),Object(a["i"])("div",x,[J,s.data.blank_photo?(Object(a["x"])(),Object(a["h"])("div",I,[Object(a["i"])("div",{class:"requisites-file-loaded__close",onClick:t[18]||(t[18]=function(e){return s.data.blank_photo=null})},M),Object(a["i"])("img",{src:s.data.blank_photo,alt:"BlankPhoto"},null,8,U)])):(Object(a["x"])(),Object(a["h"])("div",{key:0,class:"requisites-file-field",onDragover:t[16]||(t[16]=Object(a["S"])((function(){}),["prevent"])),onDrop:t[17]||(t[17]=Object(a["S"])((function(e){return c.drop("blank_photo","requisitesBlankPhoto")}),["prevent"]))},[Object(a["i"])("label",$,[Object(a["j"])(Object(a["J"])(e.$isMobile?"":"Перетащите или ")+" ",1),Object(a["i"])("span",null,Object(a["J"])(e.$isMobile?"Выберите файл":"выберите"),1),Object(a["j"])(" "+Object(a["J"])(e.$isMobile?"":"файл")+" ",1),Object(a["i"])("input",{type:"file",id:"requisitesBlankPhoto",ref:"requisitesBlankPhoto",multiple:"",onChange:t[15]||(t[15]=function(e){return c.uploadImage("blank_photo","requisitesBlankPhoto")}),accept:".pdf,.jpg,.jpeg,.png"},null,544)])],32))])])]),Object(a["i"])("div",A,[Object(a["i"])("div",P,[Object(a["k"])(E,{type:"filled",onClick:c.addCompany},{default:Object(a["P"])((function(){return[S]})),_:1},8,["onClick"])])]),Object(a["i"])("div",Q,[Object(a["i"])("div",D,[Object(a["k"])(w,{id:"requisitesSearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:s.suggestions,onSetSuggestion:c.getCompanies,onKeypressEnter:c.getCompanies,onClear:t[19]||(t[19]=function(e){return s.query="",c.getCompanies()}),onInput:t[20]||(t[20]=function(e){return c.getCompanies("search")}),modelValue:s.query,"onUpdate:modelValue":t[21]||(t[21]=function(e){return s.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])])]),Object(a["i"])("div",F,[Object(a["k"])(B,{companies:s.companies,onEdit:c.editCompany},null,8,["companies","onEdit"])])]),Object(a["k"])(L,{open:s.openModal,text:"Отправлено",onClose:t[22]||(t[22]=function(e){return s.openModal=!1})},null,8,["open"])],64)}var L=n("3835"),R=n("b85c"),T=n("ade3"),K=(n("45fc"),n("07ac"),n("99af"),n("c740"),n("4fadc"),n("d9e2"),n("d401"),n("7db0"),n("213a")),G=function(e){return Object(a["A"])("data-v-591922fa"),e=e(),Object(a["y"])(),e},W={key:0,class:"requisites-table"},Y=G((function(){return Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"Компания"),Object(a["i"])("th",{class:"upp"},"Инн"),Object(a["i"])("th",null,"Адрес"),Object(a["i"])("th",null,"Телефон"),Object(a["i"])("th",null,"Эл. почта")])],-1)})),z={key:0},H=["onClick"],N={class:"tooltip"},X={class:"tooltip"},Z={class:"tooltip"},ee={class:"tooltip"},te={class:"tooltip"},ne={key:1,class:"requisites-table-mobile table-mobile",ref:"table"},ae=["onClick"],ie={class:"table-mobile-row"},se=G((function(){return Object(a["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Компания ",-1)})),ce={class:"table-mobile__value"},le={class:"table-mobile-row"},oe=G((function(){return Object(a["i"])("span",{class:"table-mobile__title requisites-table-mobile__title upp"}," Инн ",-1)})),re={class:"table-mobile__value"},de={class:"table-mobile-row"},ue=G((function(){return Object(a["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Адрес ",-1)})),be={class:"table-mobile__value"},je={class:"table-mobile-row"},Oe=G((function(){return Object(a["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Телефон ",-1)})),pe={class:"table-mobile__value"},me={class:"table-mobile-row"},fe=G((function(){return Object(a["i"])("span",{class:"table-mobile__title requisites-table-mobile__title"}," Эл. почта ",-1)})),_e={class:"table-mobile__value"};function he(e,t,n,i,s,c){var l=Object(a["G"])("tooltip");return e.$isMobile?n.companies.length&&e.$isMobile?(Object(a["x"])(),Object(a["h"])("div",ne,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.companies,(function(t){return Object(a["x"])(),Object(a["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[Object(a["i"])("div",ie,[se,Object(a["i"])("span",ce,Object(a["J"])(t.name),1)]),Object(a["i"])("div",le,[oe,Object(a["i"])("span",re,Object(a["J"])(t.inn),1)]),Object(a["i"])("div",de,[ue,Object(a["i"])("span",be,Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1)]),Object(a["i"])("div",je,[Oe,Object(a["i"])("span",pe,Object(a["J"])(t.phone_number),1)]),Object(a["i"])("div",me,[fe,Object(a["i"])("span",_e,Object(a["J"])(t.email),1)])],8,ae)})),128))],512)):Object(a["g"])("",!0):(Object(a["x"])(),Object(a["h"])("table",W,[Y,n.companies.length?(Object(a["x"])(),Object(a["h"])("tbody",z,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.companies,(function(t){return Object(a["x"])(),Object(a["h"])("tr",{key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.name),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",N,[Object(a["j"])(Object(a["J"])(t.name),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.inn),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",X,[Object(a["j"])(Object(a["J"])(t.inn),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",Z,[Object(a["j"])(Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.phone_number),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",ee,[Object(a["j"])(Object(a["J"])(t.phone_number),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.email),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",te,[Object(a["j"])(Object(a["J"])(t.email),1)])),[[l]])])],8,H)})),128))])):Object(a["g"])("",!0)]))}var ye={name:"CompanyRequisitesTable",props:{companies:{type:Array}}},ve=(n("a19e"),n("6b0d")),ge=n.n(ve);const qe=ge()(ye,[["render",he],["__scopeId","data-v-591922fa"]]);var ke=qe,we={name:"CompanyRequisites",components:{CompanyRequisitesTable:ke},computed:{user:function(){return this.$store.state.user}},data:function(){return{data:{name:"",inn:"",address_street:"",address_city:"",address_country:"",address_index:"",phone_number:"",email:"",director_full_name:"",director_position:"",logo:null,blank_photo:null},message:"",query:"",openModal:!1,edit:!1,id:"",companies:[],suggestions:[]}},setup:function(){Object(K["b"])({title:"Реквизиты компании"})},mounted:function(){this.getCompanies()},methods:{getCompanies:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(T["a"])({},this.query&&"search",this.query);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/company"),{params:n}).then((function(n){"search"!==t&&(e.companies=[]);var a,i=Object(R["a"])(n.data.results);try{for(i.s();!(a=i.n()).done;){var s=a.value;"search"!==t&&e.companies.push(s),"search"==t&&e.query&&e.suggestions.push({key:s.id,value:s.id})}}catch(c){i.e(c)}finally{i.f()}}))},addCompany:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/company/").concat(this.id),this.data).then((function(t){var n=e.companies.findIndex((function(e){return e.id==t.data.id}));e.companies[n]=t.data;for(var a=0,i=Object.entries(e.data);a<i.length;a++){var s=Object(L["a"])(i[a],1),c=s[0];e.data[c]=""}e.edit=!1,e.openModal=!0})).catch((function(e){new Error(e)})):this.$api.post("".concat(this.$api.defaults.API,"/company"),this.data).then((function(t){e.companies.push(t.data);for(var n=0,a=Object.entries(e.data);n<a.length;n++){var i=Object(L["a"])(a[n],1),s=i[0];e.data[s]=""}e.openModal=!0})).catch((function(t){t.response.data.inn&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},uploadImage:function(e,t){var n=this,a=this.$refs[t].files[0],i=new FileReader;i.readAsDataURL(a),i.onload=function(t){"logo"===e?n.data.logo=t.target.result:n.data.blank_photo=t.target.result}},drop:function(e,t){var n=window.event;n.preventDefault(),this.$refs[t].files=n.dataTransfer.files,this.uploadImage(e,t)},editCompany:function(e){var t=this.companies.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var n=0,a=Object.entries(t);n<a.length;n++){var i=Object(L["a"])(a[n],1),s=i[0];this.data[s]=t[s]}}}};n("56f8");const Ce=ge()(we,[["render",B],["__scopeId","data-v-6e9fee21"]]);t["default"]=Ce},"27f3":function(e,t,n){},"4fadc":function(e,t,n){var a=n("23e7"),i=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return i(e)}})},5503:function(e,t,n){},"56f8":function(e,t,n){"use strict";n("66c0")},"582d":function(e,t,n){},"66c0":function(e,t,n){},"6b3c":function(e,t,n){},"6c61":function(e,t,n){"use strict";n("582d")},"6f53":function(e,t,n){var a=n("83ab"),i=n("e330"),s=n("df75"),c=n("fc6a"),l=n("d1e7").f,o=i(l),r=i([].push),d=function(e){return function(t){var n,i=c(t),l=s(i),d=l.length,u=0,b=[];while(d>u)n=l[u++],a&&!o(i,n)||r(b,e?[n,i[n]]:i[n]);return b}};e.exports={entries:d(!0),values:d(!1)}},"72bc":function(e,t,n){"use strict";n("be93")},"7db0":function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").find,s=n("44d2"),c="find",l=!0;c in[]&&Array(1)[c]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(c)},a19e:function(e,t,n){"use strict";n("5503")},be93:function(e,t,n){},ed05:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),i=function(e){return Object(a["A"])("data-v-0681f7d7"),e=e(),Object(a["y"])(),e},s={class:"end-customer"},c=i((function(){return Object(a["i"])("h1",{class:"end-customer__title page__title"},"Конечный заказчик",-1)})),l={class:"end-customer-content page-wrapper"},o={class:"end-customer-fields"},r={class:"end-customer-fields-row fields-row"},d={class:"end-customer-fields-row fields-row _inn"},u={class:"end-customer-fields-row fields-row"},b={class:"end-customer-fields-row fields-row _city"},j={class:"end-customer-fields-row fields-row _bio"},O={class:"end-customer-buttons page-buttons _save"},p={class:"end-customer-buttons__send _save__button"},m=Object(a["j"])("Сохранить"),f={class:"end-customer-search page-wrapper"},_={class:"end-customer-search-field"},h={class:"page-wrapper"};function y(e,t,n,i,y,v){var g=Object(a["F"])("base-input"),q=Object(a["F"])("base-button"),k=Object(a["F"])("end-customer-table"),w=Object(a["F"])("base-modal");return Object(a["x"])(),Object(a["h"])(a["b"],null,[Object(a["i"])("section",s,[c,Object(a["i"])("div",l,[Object(a["i"])("div",o,[Object(a["i"])("div",r,[Object(a["k"])(g,{id:"end-customer-customer",label:"Конечный заказчик",required:!0,modelValue:y.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return y.data.name=e})},null,8,["modelValue"])]),Object(a["i"])("div",d,[Object(a["k"])(g,{label:"ИНН",id:"end-customer-inn",type:"number",message:y.message,onInput:t[1]||(t[1]=function(e){return y.message=""}),required:!0,modelValue:y.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return y.data.inn=e})},null,8,["message","modelValue"])]),Object(a["i"])("div",u,[Object(a["k"])(g,{label:"Регион",id:"end-customer-region",required:!0,modelValue:y.data.region,"onUpdate:modelValue":t[3]||(t[3]=function(e){return y.data.region=e})},null,8,["modelValue"])]),Object(a["i"])("div",b,[Object(a["k"])(g,{label:"Город",id:"end-customer-city",required:!0,modelValue:y.data.city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return y.data.city=e})},null,8,["modelValue"])]),Object(a["i"])("div",j,[Object(a["k"])(g,{label:"ФИО заведующего эндоскопии",id:"end-customer",placeholder:"Если есть",labelStyle:{transform:"translateY(10px)"},required:!0,modelValue:y.data.head_of_endoscopy_full_name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return y.data.head_of_endoscopy_full_name=e})},null,8,["labelStyle","modelValue"])])])]),Object(a["i"])("div",O,[Object(a["i"])("div",p,[Object(a["k"])(q,{type:"filled",onClicked:v.addEndCustomer},{default:Object(a["P"])((function(){return[m]})),_:1},8,["onClicked"])])]),Object(a["i"])("div",f,[Object(a["i"])("div",_,[Object(a["k"])(g,{id:"endCustomerSearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:y.suggestions,onSetSuggestion:v.getEndCustomers,onKeypressEnter:v.getEndCustomers,onClear:t[6]||(t[6]=function(e){return y.query="",v.getEndCustomers()}),onInput:t[7]||(t[7]=function(e){return v.getEndCustomers("search")}),modelValue:y.query,"onUpdate:modelValue":t[8]||(t[8]=function(e){return y.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])])]),Object(a["i"])("div",h,[Object(a["k"])(k,{endCustomers:y.endCustomers,onEdit:v.editEndCustomer},null,8,["endCustomers","onEdit"])])]),Object(a["k"])(w,{open:y.openModal,text:"Отправлено",onClose:t[9]||(t[9]=function(e){return y.openModal=!1})},null,8,["open"])],64)}var v=n("3835"),g=n("b85c"),q=n("ade3"),k=(n("45fc"),n("d3b7"),n("07ac"),n("99af"),n("c740"),n("4fadc"),n("d9e2"),n("d401"),n("7db0"),n("213a")),w=function(e){return Object(a["A"])("data-v-ecf38076"),e=e(),Object(a["y"])(),e},C={key:0,class:"end-customer-table"},V=w((function(){return Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"Конечный заказчик"),Object(a["i"])("th",{class:"upp"},"Инн"),Object(a["i"])("th",null,"Регион"),Object(a["i"])("th",null,"Город"),Object(a["i"])("th",null,"ФИО заведующего эндоскопии")])],-1)})),x={key:0},J=["onClick"],$={class:"tooltip"},I={class:"tooltip"},E={class:"tooltip"},M={class:"tooltip"},U={class:"tooltip"},A={key:1,class:"end-customer-table-mobile table-mobile",ref:"table"},P=["onClick"],S={key:0,class:"table-mobile-row"},Q=w((function(){return Object(a["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Кон. заказчик ",-1)})),D={class:"table-mobile__value"},F={key:1,class:"table-mobile-row"},B=w((function(){return Object(a["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title upp"}," ИНН ",-1)})),L={class:"table-mobile__value"},R={key:2,class:"table-mobile-row"},T=w((function(){return Object(a["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Регион ",-1)})),K={class:"table-mobile__value"},G={key:3,class:"table-mobile-row"},W=w((function(){return Object(a["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"}," Город ",-1)})),Y={class:"table-mobile__value"},z={key:4,class:"table-mobile-row"},H=w((function(){return Object(a["i"])("span",{class:"end-customer-table-mobile__title table-mobile__title"},[Object(a["i"])("span",{class:"upp"},"фио"),Object(a["j"])(" зав. ")],-1)})),N={class:"table-mobile__value"};function X(e,t,n,i,s,c){var l=Object(a["G"])("tooltip");return e.$isMobile?n.endCustomers.length&&e.$isMobile?(Object(a["x"])(),Object(a["h"])("div",A,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.endCustomers,(function(t){return Object(a["x"])(),Object(a["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[t.name?(Object(a["x"])(),Object(a["h"])("div",S,[Q,Object(a["i"])("span",D,Object(a["J"])(t.name),1)])):Object(a["g"])("",!0),t.inn?(Object(a["x"])(),Object(a["h"])("div",F,[B,Object(a["i"])("span",L,Object(a["J"])(t.inn),1)])):Object(a["g"])("",!0),t.region?(Object(a["x"])(),Object(a["h"])("div",R,[T,Object(a["i"])("span",K,Object(a["J"])(t.region),1)])):Object(a["g"])("",!0),t.city?(Object(a["x"])(),Object(a["h"])("div",G,[W,Object(a["i"])("span",Y,Object(a["J"])(t.city),1)])):Object(a["g"])("",!0),t.head_of_endoscopy_full_name?(Object(a["x"])(),Object(a["h"])("div",z,[H,Object(a["i"])("span",N,Object(a["J"])(t.head_of_endoscopy_full_name),1)])):Object(a["g"])("",!0)],8,P)})),128))],512)):Object(a["g"])("",!0):(Object(a["x"])(),Object(a["h"])("table",C,[V,n.endCustomers.length?(Object(a["x"])(),Object(a["h"])("tbody",x,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.endCustomers,(function(t){return Object(a["x"])(),Object(a["h"])("tr",{key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.name),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",$,[Object(a["j"])(Object(a["J"])(t.name),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.inn),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",I,[Object(a["j"])(Object(a["J"])(t.inn),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.region),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",E,[Object(a["j"])(Object(a["J"])(t.region),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.city),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",M,[Object(a["j"])(Object(a["J"])(t.city),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.head_of_endoscopy_full_name),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",U,[Object(a["j"])(Object(a["J"])(t.head_of_endoscopy_full_name),1)])),[[l]])])],8,J)})),128))])):Object(a["g"])("",!0)]))}var Z={name:"EndCustomersTable",props:{endCustomers:{type:Array}}},ee=(n("02dc"),n("6b0d")),te=n.n(ee);const ne=te()(Z,[["render",X],["__scopeId","data-v-ecf38076"]]);var ae=ne,ie={name:"EndCustomer",components:{EndCustomerTable:ae},computed:{user:function(){return this.$store.state.user}},data:function(){return{data:{name:"",inn:"",region:"",city:"",head_of_endoscopy_full_name:""},message:"",query:"",openModal:!1,edit:!1,id:"",endCustomers:[],suggestions:[]}},setup:function(){Object(k["b"])({title:"Конечный заказчик"})},mounted:function(){this.getEndCustomers()},methods:{getEndCustomers:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(q["a"])({},this.query&&"search",this.query);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/end-customer"),{params:n}).then((function(n){console.log(n.data.results),"search"!==t&&(e.endCustomers=[]);var a,i=Object(g["a"])(n.data.results);try{for(i.s();!(a=i.n()).done;){var s=a.value;"search"!==t&&e.endCustomers.push(s),"search"==t&&e.query&&e.suggestions.push({key:s.id,value:s.id})}}catch(c){i.e(c)}finally{i.f()}}))},addEndCustomer:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/end-customer/").concat(this.id),this.data).then((function(t){var n=e.endCustomers.findIndex((function(e){return e.id==t.data.id}));e.endCustomers[n]=t.data;for(var a=0,i=Object.entries(e.data);a<i.length;a++){var s=Object(v["a"])(i[a],1),c=s[0];e.data[c]=""}e.edit=!1,e.openModal=!0})).catch((function(e){new Error(e)})):this.$api.post("".concat(this.$api.defaults.API,"/end-customer"),this.data).then((function(t){e.endCustomers.push(t.data);for(var n=0,a=Object.entries(e.data);n<a.length;n++){var i=Object(v["a"])(a[n],1),s=i[0];e.data[s]=""}e.openModal=!0})).catch((function(t){t.response.data.inn&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},editEndCustomer:function(e){var t=this.endCustomers.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var n=0,a=Object.entries(t);n<a.length;n++){var i=Object(v["a"])(a[n],1),s=i[0];this.data[s]=t[s]}}}};n("6c61");const se=te()(ie,[["render",y],["__scopeId","data-v-0681f7d7"]]);t["default"]=se},f546:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),i=function(e){return Object(a["A"])("data-v-691e2fb0"),e=e(),Object(a["y"])(),e},s={class:"counterparty"},c=i((function(){return Object(a["i"])("h1",{class:"counterparty__title page__title"},"Контрагент",-1)})),l={key:0,class:"counterparty-content page-wrapper"},o={class:"counterparty-fields"},r={class:"counterparty-fields-row fields-row"},d={class:"counterparty-fields-row fields-row _inn"},u={class:"counterparty-fields-row fields-row _address"},b={class:"counterparty-fields-row fields-row"},j={class:"counterparty-fields-row fields-row"},O={class:"counterparty-fields-row fields-row _index"},p={class:"counterparty-fields-row fields-row"},m={class:"counterparty-fields-row fields-row"},f={class:"counterparty-fields-row fields-row _contact-person"},_={class:"counterparty-fields-row fields-row"},h={key:1,class:"counterparty-buttons page-buttons _save"},y={class:"counterparty__send _save__button"},v=Object(a["j"])(" Сохранить "),g={class:"counterparty-search page-wrapper"},q={class:"counterparty-search-field"},k={class:"page-wrapper"};function w(e,t,n,i,w,C){var V=Object(a["F"])("base-input"),x=Object(a["F"])("base-button"),J=Object(a["F"])("counterparty-table"),$=Object(a["F"])("base-modal");return Object(a["x"])(),Object(a["h"])(a["b"],null,[Object(a["i"])("section",s,[c,C.user?(Object(a["x"])(),Object(a["h"])("div",l,[Object(a["i"])("div",o,[Object(a["i"])("div",r,[Object(a["k"])(V,{label:"Контрагент",id:"counterparty",required:!0,modelValue:w.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return w.data.name=e})},null,8,["modelValue"])]),Object(a["i"])("div",d,[Object(a["k"])(V,{label:"ИНН",type:"number",id:"counterpartyInn",message:w.message,onInput:t[1]||(t[1]=function(e){return w.message=""}),required:!0,modelValue:w.data.inn,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.data.inn=e})},null,8,["message","modelValue"])]),Object(a["i"])("div",u,[Object(a["k"])(V,{label:"Адрес",id:"counterpartyAddress",required:!0,modelValue:w.data.address_street,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.data.address_street=e})},null,8,["modelValue"])]),Object(a["i"])("div",b,[Object(a["k"])(V,{label:"Город",id:"counterpartyCity",required:!0,modelValue:w.data.address_city,"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.data.address_city=e})},null,8,["modelValue"])]),Object(a["i"])("div",j,[Object(a["k"])(V,{label:"Страна",id:"counterpartyCountry",required:!0,modelValue:w.data.address_country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return w.data.address_country=e})},null,8,["modelValue"])]),Object(a["i"])("div",O,[Object(a["k"])(V,{label:"Индекс",type:"number",short:!0,id:"counterpartyIndex",required:!0,modelValue:w.data.address_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return w.data.address_index=e})},null,8,["modelValue"])]),Object(a["i"])("div",p,[Object(a["k"])(V,{label:"Телефон",type:"number",id:"counterpartyPhone",required:!0,modelValue:w.data.phone_number,"onUpdate:modelValue":t[7]||(t[7]=function(e){return w.data.phone_number=e})},null,8,["modelValue"])]),Object(a["i"])("div",m,[Object(a["k"])(V,{label:"Электронная почта",type:"email",id:"counterpartyEmail",required:!0,modelValue:w.data.email,"onUpdate:modelValue":t[8]||(t[8]=function(e){return w.data.email=e})},null,8,["modelValue"])]),Object(a["i"])("div",f,[Object(a["k"])(V,{label:"Контактное лицо",id:"counterpartyContactPerson",required:!0,modelValue:w.data.contact_person,"onUpdate:modelValue":t[9]||(t[9]=function(e){return w.data.contact_person=e})},null,8,["modelValue"])]),Object(a["i"])("div",_,[Object(a["k"])(V,{label:"Скидка",type:"number",short:!0,id:"counterpartyDiscount",required:!0,modelValue:w.data.discount,"onUpdate:modelValue":t[10]||(t[10]=function(e){return w.data.discount=e})},null,8,["modelValue"])])])])):Object(a["g"])("",!0),C.user?(Object(a["x"])(),Object(a["h"])("div",h,[Object(a["i"])("div",y,[Object(a["k"])(x,{type:"filled",onClick:C.addCounterparty},{default:Object(a["P"])((function(){return[v]})),_:1},8,["onClick"])])])):Object(a["g"])("",!0),Object(a["i"])("div",g,[Object(a["i"])("div",q,[Object(a["k"])(V,{id:"counterpartySearch",placeholder:e.$isMobile?"Поиск":"Поиск по контрагенту или ИНН",search:!0,searchIcon:!0,suggestionWidth:380,suggestions:w.suggestions,onSetSuggestion:C.getCounterparties,onKeypressEnter:C.getCounterparties,onClear:t[11]||(t[11]=function(e){return w.query="",C.getCounterparties()}),onInput:t[12]||(t[12]=function(e){return C.getCounterparties("search")}),modelValue:w.query,"onUpdate:modelValue":t[13]||(t[13]=function(e){return w.query=e})},null,8,["placeholder","suggestions","onSetSuggestion","onKeypressEnter","modelValue"])])]),Object(a["i"])("div",k,[Object(a["k"])(J,{counterparties:w.counterparties,onEdit:C.editCounterparty},null,8,["counterparties","onEdit"])])]),Object(a["k"])($,{open:w.openModal,text:"Сохранено",onClose:t[14]||(t[14]=function(e){return w.openModal=!1})},null,8,["open"])],64)}var C=n("3835"),V=n("b85c"),x=n("ade3"),J=(n("45fc"),n("d3b7"),n("07ac"),n("99af"),n("c740"),n("4fadc"),n("d9e2"),n("d401"),n("7db0"),n("213a")),$=function(e){return Object(a["A"])("data-v-02e5d24c"),e=e(),Object(a["y"])(),e},I={key:0,class:"counterparty-table"},E=$((function(){return Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"Контрагент"),Object(a["i"])("th",{class:"upp"},"Инн"),Object(a["i"])("th",null,"Адрес"),Object(a["i"])("th",null,"Телефон"),Object(a["i"])("th",null,"Эл. почта"),Object(a["i"])("th",null,"Контактное лицо"),Object(a["i"])("th",null,"Скидка")])],-1)})),M={key:0},U=["onClick"],A={class:"tooltip"},P={class:"tooltip"},S={class:"tooltip"},Q={class:"tooltip"},D={class:"tooltip"},F={class:"tooltip"},B={class:"no-wrap"},L={class:"tooltip"},R={key:1,class:"counterparty-table-mobile table-mobile",ref:"table"},T=["onClick"],K={class:"table-mobile-row"},G=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Контрагент ",-1)})),W={class:"table-mobile__value"},Y={class:"table-mobile-row"},z=$((function(){return Object(a["i"])("span",{class:"table-mobile__title upp"}," Инн ",-1)})),H={class:"table-mobile__value"},N={class:"table-mobile-row"},X=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Адрес ",-1)})),Z={class:"table-mobile__value"},ee={class:"table-mobile-row"},te=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Телефон ",-1)})),ne={class:"table-mobile__value"},ae={class:"table-mobile-row"},ie=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Эл. почта ",-1)})),se={class:"table-mobile__value"},ce={class:"table-mobile-row"},le=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Конт. лицо ",-1)})),oe={class:"table-mobile__value"},re={class:"table-mobile-row"},de=$((function(){return Object(a["i"])("span",{class:"table-mobile__title"}," Скидка ",-1)})),ue={class:"table-mobile__value"};function be(e,t,n,i,s,c){var l=Object(a["G"])("tooltip");return e.$isMobile?n.counterparties.length&&e.$isMobile?(Object(a["x"])(),Object(a["h"])("div",R,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.counterparties,(function(t){return Object(a["x"])(),Object(a["h"])("div",{class:"table-mobile-column",key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[Object(a["i"])("div",K,[G,Object(a["i"])("span",W,Object(a["J"])(t.name),1)]),Object(a["i"])("div",Y,[z,Object(a["i"])("span",H,Object(a["J"])(t.inn),1)]),Object(a["i"])("div",N,[X,Object(a["i"])("span",Z,Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1)]),Object(a["i"])("div",ee,[te,Object(a["i"])("span",ne," +"+Object(a["J"])(t.phone_number),1)]),Object(a["i"])("div",ae,[ie,Object(a["i"])("span",se,Object(a["J"])(t.email),1)]),Object(a["i"])("div",ce,[le,Object(a["i"])("span",oe,Object(a["J"])(t.contact_person),1)]),Object(a["i"])("div",re,[de,Object(a["i"])("span",ue,Object(a["J"])(t.discount)+"% ",1)])],8,T)})),128))],512)):Object(a["g"])("",!0):(Object(a["x"])(),Object(a["h"])("table",I,[E,n.counterparties.length?(Object(a["x"])(),Object(a["h"])("tbody",M,[(Object(a["x"])(!0),Object(a["h"])(a["b"],null,Object(a["D"])(n.counterparties,(function(t){return Object(a["x"])(),Object(a["h"])("tr",{key:t.id,onClick:function(n){return e.$emit("edit",t.id)}},[Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.name),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",A,[Object(a["j"])(Object(a["J"])(t.name),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.inn),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",P,[Object(a["j"])(Object(a["J"])(t.inn),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",S,[Object(a["j"])(Object(a["J"])(t.address_street&&t.address_street+",")+" "+Object(a["J"])(t.address_city&&t.address_city+",")+" "+Object(a["J"])(t.address_country&&t.address_country+",")+" "+Object(a["J"])(t.address_index&&t.address_index),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null," +"+Object(a["J"])(t.phone_number),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",Q,[Object(a["j"])(" +"+Object(a["J"])(t.phone_number),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.email),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",D,[Object(a["j"])(Object(a["J"])(t.email),1)])),[[l]])]),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["J"])(t.contact_person),1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",F,[Object(a["j"])(Object(a["J"])(t.contact_person),1)])),[[l]])]),Object(a["i"])("td",B,[Object(a["j"])(Object(a["J"])(t.discount)+"% ",1),Object(a["Q"])((Object(a["x"])(),Object(a["h"])("span",L,[Object(a["j"])(Object(a["J"])(t.discount)+"% ",1)])),[[l]])])],8,U)})),128))])):Object(a["g"])("",!0)]))}var je={name:"CounterpartyTable",props:{counterparties:{type:Array}}},Oe=(n("0a79"),n("6b0d")),pe=n.n(Oe);const me=pe()(je,[["render",be],["__scopeId","data-v-02e5d24c"]]);var fe=me,_e={name:"Counterparty",components:{CounterpartyTable:fe},computed:{user:function(){return this.$store.state.user}},data:function(){return{data:{name:"",inn:"",address_street:"",address_city:"",address_country:"",address_index:"",phone_number:"",email:"",contact_person:"",discount:""},message:"",query:"",openModal:!1,edit:!1,id:"",counterparties:[],suggestions:[]}},setup:function(){Object(J["b"])({title:"Контрагент"})},mounted:function(){this.getCounterparties()},methods:{getCounterparties:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(x["a"])({},this.query&&"search",this.query);this.suggestions=[],this.$api.get("".concat(this.$api.defaults.API,"/counterparty"),{params:n}).then((function(n){console.log(n.data.results),"search"!==t&&(e.counterparties=[]);var a,i=Object(V["a"])(n.data.results);try{for(i.s();!(a=i.n()).done;){var s=a.value;"search"!==t&&e.counterparties.push(s),"search"==t&&e.query&&e.suggestions.push({key:s.id,value:s.id})}}catch(c){i.e(c)}finally{i.f()}}))},addCounterparty:function(){var e=this;Object.values(this.data).some((function(e){return!e}))||(this.edit?this.$api.patch("".concat(this.$api.defaults.API,"/counterparty/").concat(this.id),this.data).then((function(t){var n=e.counterparties.findIndex((function(e){return e.id==t.data.id}));e.counterparties[n]=t.data;for(var a=0,i=Object.entries(e.data);a<i.length;a++){var s=Object(C["a"])(i[a],1),c=s[0];e.data[c]=""}e.edit=!1,e.openModal=!0})).catch((function(e){new Error(e)})):this.$api.post("".concat(this.$api.defaults.API,"/counterparty"),this.data).then((function(t){e.counterparties.push(t.data);for(var n=0,a=Object.entries(e.data);n<a.length;n++){var i=Object(C["a"])(a[n],1),s=i[0];e.data[s]=""}e.openModal=!0})).catch((function(t){t.response.data.inn&&(e.message="Данный ИНН уже существует в нашей базе данных")})))},editCounterparty:function(e){var t=this.counterparties.find((function(t){return t.id===e}));this.id=t.id,this.edit=!0;for(var n=0,a=Object.entries(t);n<a.length;n++){var i=Object(C["a"])(a[n],1),s=i[0];this.data[s]=t[s]}}}};n("72bc");const he=pe()(_e,[["render",w],["__scopeId","data-v-691e2fb0"]]);t["default"]=he}}]);
//# sourceMappingURL=requisites.1629da8f.js.map